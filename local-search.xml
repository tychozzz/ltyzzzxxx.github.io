<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>LC-Solution 1441. Build an Array With Stack Operations</title>
    <link href="/2022/10/15/LC-Solution-1441-Build-an-Array-With-Stack-Operations/"/>
    <url>/2022/10/15/LC-Solution-1441-Build-an-Array-With-Stack-Operations/</url>
    
    <content type="html"><![CDATA[<h1 id="1441-ç”¨æ ˆæ“ä½œæ„å»ºæ•°ç»„"><a href="#1441-ç”¨æ ˆæ“ä½œæ„å»ºæ•°ç»„" class="headerlink" title="1441. ç”¨æ ˆæ“ä½œæ„å»ºæ•°ç»„"></a><a href="https://leetcode.cn/problems/build-an-array-with-stack-operations/">1441. ç”¨æ ˆæ“ä½œæ„å»ºæ•°ç»„</a></h1><h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>ç»™ä½ ä¸€ä¸ªæ•°ç»„ <code>target</code> å’Œä¸€ä¸ªæ•´æ•° <code>n</code>ã€‚æ¯æ¬¡è¿­ä»£ï¼Œéœ€è¦ä» <code>list = &#123; 1 , 2 , 3 ..., n &#125;</code> ä¸­ä¾æ¬¡è¯»å–ä¸€ä¸ªæ•°å­—ã€‚</p><p>è¯·ä½¿ç”¨ä¸‹è¿°æ“ä½œæ¥æ„å»ºç›®æ ‡æ•°ç»„ <code>target</code> ï¼š</p><ul><li><code>&quot;Push&quot;</code>ï¼šä» <code>list</code> ä¸­è¯»å–ä¸€ä¸ªæ–°å…ƒç´ ï¼Œ å¹¶å°†å…¶æ¨å…¥æ•°ç»„ä¸­ã€‚</li><li><code>&quot;Pop&quot;</code>ï¼šåˆ é™¤æ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ ã€‚</li><li>å¦‚æœç›®æ ‡æ•°ç»„æ„å»ºå®Œæˆï¼Œå°±åœæ­¢è¯»å–æ›´å¤šå…ƒç´ ã€‚</li></ul><p>é¢˜ç›®æ•°æ®ä¿è¯ç›®æ ‡æ•°ç»„ä¸¥æ ¼é€’å¢ï¼Œå¹¶ä¸”åªåŒ…å« <code>1</code> åˆ° <code>n</code> ä¹‹é—´çš„æ•°å­—ã€‚</p><p>è¯·è¿”å›æ„å»ºç›®æ ‡æ•°ç»„æ‰€ç”¨çš„æ“ä½œåºåˆ—ã€‚å¦‚æœå­˜åœ¨å¤šä¸ªå¯è¡Œæ–¹æ¡ˆï¼Œè¿”å›ä»»ä¸€å³å¯ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs prolog">è¾“å…¥ï¼štarget = [<span class="hljs-number">1</span>,<span class="hljs-number">3</span>], n = <span class="hljs-number">3</span><br>è¾“å‡ºï¼š[<span class="hljs-string">&quot;Push&quot;</span>,<span class="hljs-string">&quot;Push&quot;</span>,<span class="hljs-string">&quot;Pop&quot;</span>,<span class="hljs-string">&quot;Push&quot;</span>]<br>è§£é‡Šï¼š <br>è¯»å– <span class="hljs-number">1</span> å¹¶è‡ªåŠ¨æ¨å…¥æ•°ç»„ -&gt; [<span class="hljs-number">1</span>]<br>è¯»å– <span class="hljs-number">2</span> å¹¶è‡ªåŠ¨æ¨å…¥æ•°ç»„ï¼Œç„¶ååˆ é™¤å®ƒ -&gt; [<span class="hljs-number">1</span>]<br>è¯»å– <span class="hljs-number">3</span> å¹¶è‡ªåŠ¨æ¨å…¥æ•°ç»„ -&gt; [<span class="hljs-number">1</span>,<span class="hljs-number">3</span>]<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs prolog">è¾“å…¥ï¼štarget = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>], n = <span class="hljs-number">3</span><br>è¾“å‡ºï¼š[<span class="hljs-string">&quot;Push&quot;</span>,<span class="hljs-string">&quot;Push&quot;</span>,<span class="hljs-string">&quot;Push&quot;</span>]<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 3ï¼š</strong></p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs prolog">è¾“å…¥ï¼štarget = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>], n = <span class="hljs-number">4</span><br>è¾“å‡ºï¼š[<span class="hljs-string">&quot;Push&quot;</span>,<span class="hljs-string">&quot;Push&quot;</span>]<br>è§£é‡Šï¼šåªéœ€è¦è¯»å–å‰ <span class="hljs-number">2</span> ä¸ªæ•°å­—å°±å¯ä»¥åœæ­¢ã€‚<br></code></pre></td></tr></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li><code>1 &lt;= target.length &lt;= 100</code></li><li><code>1 &lt;= n &lt;= 100</code></li><li><code>1 &lt;= target[i] &lt;= n</code></li><li><code>target</code> ä¸¥æ ¼é€’å¢</li></ul><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><h3 id="æ–¹æ³•ä¸€ï¼šç®€å•æ¨¡æ‹Ÿ"><a href="#æ–¹æ³•ä¸€ï¼šç®€å•æ¨¡æ‹Ÿ" class="headerlink" title="æ–¹æ³•ä¸€ï¼šç®€å•æ¨¡æ‹Ÿ"></a>æ–¹æ³•ä¸€ï¼šç®€å•æ¨¡æ‹Ÿ</h3><p>é¢˜ç›®ç»™å®šçš„æ¡ä»¶ï¼š<code>target</code> æ•°ç»„ä¸¥æ ¼é€’å¢å‡åºä¸”åªåŒ…å«1~nä¹‹é—´çš„æ•°å­—</p><ol><li>å¯¹äº <code>target</code> ä¸­ç¼ºå°‘çš„æ•°å­—ï¼Œåˆ†ç±»è®¨è®º<ol><li>è¯¥æ•°å­—å°äº <code>target[-1]</code>ï¼ˆæ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ ï¼‰ï¼Œéœ€è¦è¿›è¡Œ â€˜Pushâ€™ + â€˜Popâ€™ æ“ä½œ</li><li>è¯¥æ•°å­—å¤§äº <code>target[-1]</code>ï¼ˆæ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ ï¼‰ï¼Œæ— éœ€è¿›è¡Œæ“ä½œï¼Œå› ä¸ºè¯¥æ•°å·²ç»ä¸åœ¨ <code>target</code> å†…äº†</li></ol></li><li>å¯¹äº <code>target</code> ä¸­å­˜åœ¨çš„æ•°å­—ï¼Œæˆ‘åªéœ€è¦è¿›è¡Œ â€˜Pushâ€™ æ“ä½œ</li></ol><p>æ ¹æ®ä¸Šè¿°åˆ†æå¯çŸ¥ï¼Œæˆ‘ä»¬æ ¹æœ¬ä¸éœ€è¦ç”¨åˆ°é¢˜ç›®ç»™å®šçš„ nï¼Œå› ä¸º n ä¸­å¤§äº <code>target[-1]</code> çš„æ•°ä¸éœ€è¦å¤„ç†ï¼Œè€Œå°äº <code>target[-1]</code> çš„æ•°åªéœ€è¦éå† <code>target</code> æ•°ç»„å³å¯</p><p>å› æ­¤ï¼Œéå† <code>target</code> æ•°ç»„ï¼Œæ‰¾å‡º <code>target</code> ç¼ºå°‘çš„æ•°å­—ã€‚é€šè¿‡åˆå§‹åŒ– <code>j = 1</code>ï¼Œåˆ¤æ–­å½“å‰éå†çš„æ•°æ˜¯å¦ç­‰äº <code>j</code> æ¥åˆ¤æ–­æ˜¯å¦ç¼ºå°‘è¯¥æ•°ã€‚</p><p>ç›´æ¥çœ‹ä»£ç æ›´å¥½ç†è§£ï¼</p><h4 id="Python3"><a href="#Python3" class="headerlink" title="Python3"></a>Python3</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python3">class Solution:<br>    def buildArray(self, target: List[int], n: int) -&gt; List[str]:<br>        ans = []<br>        j = 1<br>        for i in range(len(target)):<br>            while target[i] != j:<br>                ans.append(&#x27;Push&#x27;)<br>                ans.append(&#x27;Pop&#x27;)<br>                j += 1<br>            ans.append(&#x27;Push&#x27;)<br>            j += 1 # å½“target[i] == jæ—¶ï¼Œå¤„ç†å®Œä¹‹åè¿˜éœ€è¦åœ¨è‡ªå¢ä¸€æ¬¡j<br>        return ans<br></code></pre></td></tr></table></figure><h4 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title function_">buildArray</span><span class="hljs-params">(<span class="hljs-type">int</span>[] target, <span class="hljs-type">int</span> n)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">len</span> <span class="hljs-operator">=</span> target.length;<br>        List&lt;String&gt; ans = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; len; i++) &#123;<br>            <span class="hljs-keyword">while</span>(target[i] != j) &#123;<br>                ans.add(<span class="hljs-string">&quot;Push&quot;</span>);<br>                ans.add(<span class="hljs-string">&quot;Pop&quot;</span>);<br>                j++;<br>            &#125;<br>            ans.add(<span class="hljs-string">&quot;Push&quot;</span>)<br>            j++; <span class="hljs-comment">// å½“target[i] == jæ—¶ï¼Œå¤„ç†å®Œä¹‹åè¿˜éœ€è¦åœ¨è‡ªå¢ä¸€æ¬¡j</span><br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Leetcodeé¢˜è§£</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LC-Solution 5. Longest Palindromic Substring</title>
    <link href="/2022/10/14/LC-Solution-5-Longest-Palindromic-Substring/"/>
    <url>/2022/10/14/LC-Solution-5-Longest-Palindromic-Substring/</url>
    
    <content type="html"><![CDATA[<h1 id="5-æœ€é•¿å›æ–‡å­ä¸²"><a href="#5-æœ€é•¿å›æ–‡å­ä¸²" class="headerlink" title="5. æœ€é•¿å›æ–‡å­ä¸²"></a><a href="https://leetcode.cn/problems/longest-palindromic-substring/">5. æœ€é•¿å›æ–‡å­ä¸²</a></h1><h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² <code>s</code>ï¼Œæ‰¾åˆ° <code>s</code> ä¸­æœ€é•¿çš„å›æ–‡å­ä¸²ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf">è¾“å…¥ï¼šs <span class="hljs-operator">=</span> <span class="hljs-string">&quot;babad&quot;</span><br>è¾“å‡ºï¼š<span class="hljs-string">&quot;bab&quot;</span><br>è§£é‡Šï¼š<span class="hljs-string">&quot;aba&quot;</span> åŒæ ·æ˜¯ç¬¦åˆé¢˜æ„çš„ç­”æ¡ˆã€‚<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 2</strong></p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs abnf">è¾“å…¥ï¼šs <span class="hljs-operator">=</span> <span class="hljs-string">&quot;cbbd&quot;</span><br>è¾“å‡ºï¼š<span class="hljs-string">&quot;bb&quot;</span><br></code></pre></td></tr></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li><code>1 &lt;= s.length &lt;= 1000</code></li><li><code>s</code> ä»…ç”±æ•°å­—å’Œè‹±æ–‡å­—æ¯ç»„æˆ</li></ul><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><h3 id="æ–¹æ³•ä¸€ï¼šä¸­å¿ƒæ‰©æ•£æ³•-åŒæŒ‡é’ˆ"><a href="#æ–¹æ³•ä¸€ï¼šä¸­å¿ƒæ‰©æ•£æ³•-åŒæŒ‡é’ˆ" class="headerlink" title="æ–¹æ³•ä¸€ï¼šä¸­å¿ƒæ‰©æ•£æ³• + åŒæŒ‡é’ˆ"></a>æ–¹æ³•ä¸€ï¼šä¸­å¿ƒæ‰©æ•£æ³• + åŒæŒ‡é’ˆ</h3><p>æ€è·¯ä¸ºï¼šä» <code>s</code> ä¸­é€‰å–ä¸€ä¸ªä½ç½®ä½œä¸ºä¸­å¿ƒï¼Œä»è¯¥ä¸­å¿ƒä½ç½®å‘ä¸¤è¾¹æ‰©æ•£ï¼Œå¦‚æœä¸¤è¾¹å…ƒç´ ä¸ç›¸ç­‰çš„æ—¶å€™åœæ­¢ã€‚</p><p>ä¸¾ä¸ªğŸŒ°ï¼šå¦‚ <code>abbac</code>ï¼Œå‡è®¾é€‰å–ç¬¬ä¸€ä¸ªâ€™bâ€™ä½œä¸ºä¸­å¿ƒä½ç½®ï¼Œ<code>i = 2</code>ã€‚è®¾å·¦æŒ‡é’ˆ <code>l == i - 1</code> ï¼Œå³æŒ‡é’ˆ<code>r == i + 1</code> </p><ol><li>å…ˆå‘å·¦æ‰©æ•£ã€‚<code>l</code> ä¸€ç›´è‡ªå‡ï¼Œç›´åˆ°é‡åˆ°ä¸ä¸­å¿ƒä½ç½®ä¸ç›¸ç­‰çš„å­—ç¬¦ã€‚æ­¤æ—¶ <code>s[l] = &#39;a&#39;</code> <code>l = 1</code> </li><li>å†å‘å³æ‰©æ•£ã€‚<code>r</code> ä¸€ç›´è‡ªå¢ï¼Œç›´åˆ°é‡åˆ°ä¸ä¸­å¿ƒä½ç½®ä¸ç›¸ç­‰çš„å­—ç¬¦ã€‚æ­¤æ—¶ <code>s[r] = &#39;a&#39;</code> <code>r = 3</code></li><li>å·¦æŒ‡é’ˆä¸å³æŒ‡é’ˆåŒæ—¶å¼€å§‹åŒå‘æ‰©æ•£ï¼Œç›´åˆ°å·¦å’Œå³ä¸ç›¸ç­‰</li></ol><p>ä¸€å¼€å§‹ä¹‹æ‰€ä»¥è¦æ‰§è¡Œç¬¬1æ­¥å’Œç¬¬2æ­¥ï¼Œå°±æ˜¯è¦è¿›ä¸€æ­¥ç¡®å®šä¸­å¿ƒå—ã€‚å› ä¸ºå®šä¹‰çš„ä¸­å¿ƒå¯èƒ½åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œä½†å¯èƒ½ç”±å¤šä¸ªç›¸åŒå…ƒç´ ç»„æˆã€‚</p><p>éå† <code>s</code>ï¼Œ æ‰§è¡Œå®Œä¸Šè¿°æµç¨‹åï¼Œéœ€è¦æ›´æ–°æœ€é•¿å›æ–‡å­ä¸²çš„å·¦ç«¯ç‚¹ä¸é•¿åº¦ï¼Œä»¥ä¾¿äºæœ€åè¿”å›ç»“æœ</p><h4 id="Python3"><a href="#Python3" class="headerlink" title="Python3"></a>Python3</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">longestPalindrome</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:<br>        maxLen, maxLeft = <span class="hljs-number">0</span>, <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>            l, r = i - <span class="hljs-number">1</span>, i + <span class="hljs-number">1</span><br>            curLen = <span class="hljs-number">1</span><br>            <span class="hljs-keyword">while</span> l &gt;= <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> s[l] == s[i]:<br>                curLen, l = curLen + <span class="hljs-number">1</span>, l - <span class="hljs-number">1</span><br>            <span class="hljs-keyword">while</span> r &lt; n <span class="hljs-keyword">and</span> s[r] == s[i]:<br>                curLen, r = curLen + <span class="hljs-number">1</span>, r + <span class="hljs-number">1</span><br>            <span class="hljs-keyword">while</span> l &gt;= <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> r &lt; n <span class="hljs-keyword">and</span> s[l] == s[r]:<br>                curLen += <span class="hljs-number">2</span><br>                l, r = l - <span class="hljs-number">1</span>, r + <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span> curLen &gt;= maxLen:<br>                maxLen = curLen<br>                maxLeft = l<br>        <span class="hljs-keyword">return</span> s[maxLeft + <span class="hljs-number">1</span>: maxLeft + maxLen + <span class="hljs-number">1</span>]<br></code></pre></td></tr></table></figure><h4 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">longestPalindrome</span><span class="hljs-params">(String s)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> s.length();<br>        <span class="hljs-type">char</span>[] cs = s.toCharArray();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">maxLen</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, maxLeft = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; cs.length; i++) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">l</span> <span class="hljs-operator">=</span> i - <span class="hljs-number">1</span>, r = i + <span class="hljs-number">1</span>;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">curLen</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">while</span>(l &gt;= <span class="hljs-number">0</span> &amp;&amp; cs[l] == cs[i]) &#123;<br>                curLen++;<br>                l--;<br>            &#125;<br>            <span class="hljs-keyword">while</span>(r &lt; n &amp;&amp; cs[r] == cs[i]) &#123;<br>                curLen++;<br>                r++;<br>            &#125;<br>            <span class="hljs-keyword">while</span>(l &gt;= <span class="hljs-number">0</span> &amp;&amp; r &lt; n &amp;&amp; cs[l] == cs[r]) &#123;<br>                l--;<br>                r++;<br>                curLen += <span class="hljs-number">2</span>;<br>            &#125;<br>            <span class="hljs-keyword">if</span>(curLen &gt; maxLen) &#123;<br>                maxLen = curLen;<br>                maxLeft = l;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> s.substring(maxLeft + <span class="hljs-number">1</span>, maxLeft + <span class="hljs-number">1</span> + maxLen);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ–¹æ³•äºŒï¼šåŠ¨æ€è§„åˆ’"><a href="#æ–¹æ³•äºŒï¼šåŠ¨æ€è§„åˆ’" class="headerlink" title="æ–¹æ³•äºŒï¼šåŠ¨æ€è§„åˆ’"></a>æ–¹æ³•äºŒï¼šåŠ¨æ€è§„åˆ’</h3><p>ä¸­å¿ƒæ‰©æ•£æ³•åšäº†å¾ˆå¤šé‡å¤çš„è®¡ç®—ã€‚å…¶å®å¯ä»¥åœ¨è®¡ç®—çš„è¿‡ç¨‹ä¸­å°†è¿™äº›å€¼å­˜å‚¨èµ·æ¥ï¼Œå³è®°å¿†åŒ–æœç´¢ã€‚å¯ä»¥é‡‡ç”¨åŠ¨æ€è§„åˆ’å®ç°ã€‚</p><p>è®¾ <code>dp[i][j]</code>ï¼Œå…¶ä¸º<code>True</code> ä»£è¡¨ <code>[i, j]</code> åŒºé—´å­—ç¬¦ä¸²ä¸ºå›æ–‡å­—ç¬¦ä¸²</p><h4 id="Python3-1"><a href="#Python3-1" class="headerlink" title="Python3"></a>Python3</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">longestPalindrome</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:<br>        n = <span class="hljs-built_in">len</span>(s)<br>        maxLen, maxLeft, maxRight = <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span><br>        dp = [[<span class="hljs-literal">False</span>]*n <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>        <span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n):<br>            <span class="hljs-keyword">for</span> l <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(r):<br>                <span class="hljs-keyword">if</span> s[l] == s[r] <span class="hljs-keyword">and</span> (r - l &lt;= <span class="hljs-number">2</span> <span class="hljs-keyword">or</span> dp[l+<span class="hljs-number">1</span>][r-<span class="hljs-number">1</span>]):<br>                    dp[l][r] = <span class="hljs-literal">True</span><br>                    <span class="hljs-keyword">if</span> r - l + <span class="hljs-number">1</span> &gt; maxLen:<br>                        maxLen = r - l + <span class="hljs-number">1</span><br>                        maxLeft, maxRight = l, r<br>        <span class="hljs-keyword">return</span> s[maxLeft: maxRight + <span class="hljs-number">1</span>]<br></code></pre></td></tr></table></figure><h4 id="Java-1"><a href="#Java-1" class="headerlink" title="Java"></a>Java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">longestPalindrome</span><span class="hljs-params">(String s)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> s.length();<br>        <span class="hljs-type">char</span>[] cs = s.toCharArray();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">maxLen</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, maxLeft = <span class="hljs-number">0</span>, maxRight = <span class="hljs-number">0</span>;<br>        <span class="hljs-type">boolean</span>[][] dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">boolean</span>[n][n];<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">r</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; r &lt; n; r++) &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">l</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; l &lt; r; l++) &#123;<br>                <span class="hljs-keyword">if</span>(cs[l] == cs[r] &amp;&amp; (r - l &lt;= <span class="hljs-number">2</span> || dp[l + <span class="hljs-number">1</span>][r - <span class="hljs-number">1</span>])) &#123;<br>                    dp[l][r] = <span class="hljs-literal">true</span>;<br>                    <span class="hljs-keyword">if</span>(r - l + <span class="hljs-number">1</span>&gt; maxLen) &#123;<br>                        maxLen = r - l + <span class="hljs-number">1</span>;<br>                        maxLeft = l;<br>                        maxRight = r;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> s.substring(maxLeft, maxRight + <span class="hljs-number">1</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Encouragement"><a href="#Encouragement" class="headerlink" title="Encouragement"></a>Encouragement</h2><p>ç›®å‰å°±è¯»äºæ–°åŠ å¡å›½ç«‹å¤§å­¦ï¼Œè½¬ç èœé¸¡ä¸€æšã€‚</p><p>å†³å¿ƒé€šè¿‡æ—¥æ›´ä¸€ç¯‡é¢˜è§£æ¿€åŠ±è‡ªå·±åšæŒåˆ·é¢˜ï¼ŒåšæŒå­¦ä¹ ç®—æ³•ã€‚</p><p>è¿™æ˜¯æˆ‘æ­å»º<a href="https://github.com/ltyzzzxxx/Leetcode-Everyday">Leetcode-Everyday</a>ä»“åº“åå‘å¸ƒã®ç¬¬24ç¯‡é¢˜è§£ï¼Œæ¬¢è¿å„ä½starå¹¶æå‡ºIssue~</p><p>ç‚¹å‡»<a href="https://leetcode.cn/u/ltyzzz/">è¿™é‡Œ</a>ï¼Œè¿›å…¥æˆ‘çš„ä¸ªäººLeetcodeä¸»é¡µ~</p>]]></content>
    
    
    <categories>
      
      <category>Leetcodeé¢˜è§£</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LC-Solution 817. Linked List Components</title>
    <link href="/2022/10/12/LC-Solution-817-Linked-List-Components/"/>
    <url>/2022/10/12/LC-Solution-817-Linked-List-Components/</url>
    
    <content type="html"><![CDATA[<h1 id="817-é“¾è¡¨ç»„ä»¶"><a href="#817-é“¾è¡¨ç»„ä»¶" class="headerlink" title="817. é“¾è¡¨ç»„ä»¶"></a><a href="https://leetcode.cn/problems/linked-list-components/">817. é“¾è¡¨ç»„ä»¶</a></h1><h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>ç»™å®šé“¾è¡¨å¤´ç»“ç‚¹Â <code>head</code>ï¼Œè¯¥é“¾è¡¨ä¸Šçš„æ¯ä¸ªç»“ç‚¹éƒ½æœ‰ä¸€ä¸ªÂ <strong>å”¯ä¸€çš„æ•´å‹å€¼</strong>Â ã€‚åŒæ—¶ç»™å®šåˆ—è¡¨Â <code>nums</code>ï¼Œè¯¥åˆ—è¡¨æ˜¯ä¸Šè¿°é“¾è¡¨ä¸­æ•´å‹å€¼çš„ä¸€ä¸ªå­é›†ã€‚</p><p>è¿”å›åˆ—è¡¨Â <code>nums</code>Â ä¸­ç»„ä»¶çš„ä¸ªæ•°ï¼Œè¿™é‡Œå¯¹ç»„ä»¶çš„å®šä¹‰ä¸ºï¼šé“¾è¡¨ä¸­ä¸€æ®µæœ€é•¿è¿ç»­ç»“ç‚¹çš„å€¼ï¼ˆè¯¥å€¼å¿…é¡»åœ¨åˆ—è¡¨Â <code>nums</code>Â ä¸­ï¼‰æ„æˆçš„é›†åˆã€‚</p><p><strong>ç¤ºä¾‹Â 1ï¼š</strong></p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥: head = <span class="hljs-comment">[0,1,2,3]</span>, nums = <span class="hljs-comment">[0,1,3]</span><br>è¾“å‡º: 2<br>è§£é‡Š: é“¾è¡¨ä¸­,0 å’Œ 1 æ˜¯ç›¸è¿æ¥çš„ï¼Œä¸” nums ä¸­ä¸åŒ…å« 2ï¼Œæ‰€ä»¥ <span class="hljs-comment">[0, 1]</span> æ˜¯ nums çš„ä¸€ä¸ªç»„ä»¶ï¼ŒåŒç† <span class="hljs-comment">[3]</span> ä¹Ÿæ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œæ•…è¿”å› 2ã€‚<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥: head = <span class="hljs-comment">[0,1,2,3,4]</span>, nums = <span class="hljs-comment">[0,3,1,4]</span><br>è¾“å‡º: 2<br>è§£é‡Š: é“¾è¡¨ä¸­ï¼Œ0 å’Œ 1 æ˜¯ç›¸è¿æ¥çš„ï¼Œ3 å’Œ 4 æ˜¯ç›¸è¿æ¥çš„ï¼Œæ‰€ä»¥ <span class="hljs-comment">[0, 1]</span> å’Œ <span class="hljs-comment">[3, 4]</span> æ˜¯ä¸¤ä¸ªç»„ä»¶ï¼Œæ•…è¿”å› 2ã€‚<br></code></pre></td></tr></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li>é“¾è¡¨ä¸­èŠ‚ç‚¹æ•°ä¸º<code>n</code></li><li><code>1 &lt;= n &lt;= 104</code></li><li><code>0 &lt;= Node.val &lt; n</code></li><li><code>Node.val</code>Â ä¸­æ‰€æœ‰å€¼Â <strong>ä¸åŒ</strong></li><li><code>1 &lt;= nums.length &lt;= n</code></li><li><code>0 &lt;= nums[i] &lt; n</code></li><li><code>nums</code>Â ä¸­æ‰€æœ‰å€¼Â <strong>ä¸åŒ</strong></li></ul><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><h3 id="æ–¹æ³•ä¸€ï¼šæ¨¡æ‹Ÿ-å“ˆå¸Œè¡¨-é“¾è¡¨éå†"><a href="#æ–¹æ³•ä¸€ï¼šæ¨¡æ‹Ÿ-å“ˆå¸Œè¡¨-é“¾è¡¨éå†" class="headerlink" title="æ–¹æ³•ä¸€ï¼šæ¨¡æ‹Ÿ + å“ˆå¸Œè¡¨ + é“¾è¡¨éå†"></a>æ–¹æ³•ä¸€ï¼šæ¨¡æ‹Ÿ + å“ˆå¸Œè¡¨ + é“¾è¡¨éå†</h3><p>åˆ†æé¢˜æ„å¯çŸ¥ï¼Œéœ€è¦è¿”å›é“¾è¡¨ä¸­è¿é€šé‡çš„ä¸ªæ•°ï¼ˆè¿é€šé‡ä¸­çš„å€¼å¿…é¡»åœ¨ <code>nums</code> ä¸­ï¼‰</p><p>å› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡éå†åˆ—è¡¨ï¼Œåˆ¤æ–­å½“å‰èŠ‚ç‚¹ <code>cur.val</code> ä»¥åŠå…¶å‰é©±èŠ‚ç‚¹ <code>pre.val</code> æ˜¯å¦å­˜åœ¨äº <code>nums</code> ä¸­ï¼Œå¦‚ä¸‹åˆ†ç±»è®¨è®ºï¼š</p><ol><li>è‹¥ <code>cur.val</code> åœ¨ <code>nums</code> ä¸­ï¼Œä½† <code>pre.val</code> ä¸åœ¨ <code>nums</code> ä¸­ï¼š</li></ol><p>  è¯´æ˜æ­¤æ—¶äº§ç”Ÿäº†æ–°çš„è¿é€šåˆ†é‡ï¼Œéœ€è¦è¿›è¡Œè®¡æ•°</p><ol start="2"><li><p>è‹¥ <code>cur.val</code> ä¸åœ¨ <code>nums</code> ä¸­ï¼Œ<code>pre.val</code> ä¹Ÿä¸åœ¨ <code>nums</code> ä¸­ï¼šæ²¡æœ‰æ–°çš„è¿é€šåˆ†é‡äº§ç”Ÿ</p></li><li><p>è‹¥ <code>cur.val</code> ä¸åœ¨ <code>nums</code> ä¸­ï¼Œä½†<code>pre.val</code> åœ¨ <code>nums</code> ä¸­ï¼šæ²¡æœ‰æ–°çš„è¿é€šåˆ†é‡äº§ç”Ÿ</p></li><li><p>è‹¥ <code>cur.val</code> åœ¨ <code>nums</code> ä¸­ï¼Œ<code>pre.val</code> ä¹Ÿåœ¨ <code>nums</code> ä¸­ï¼š</p></li></ol><p>  æ²¡æœ‰æ–°çš„è¿é€šåˆ†é‡äº§ç”Ÿï¼Œ<code>cur</code> å½’å±äºå‰ä¸€ä¸ªè¿é€šåˆ†é‡é›†åˆä¸­</p><p>å› æ­¤ï¼Œåªæœ‰ç¬¬ä¸€ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œè®¡æ•°ï¼Œå…¶ä»–æƒ…å†µä¸ç”¨ä½“ç°åœ¨ä»£ç ä¸­ã€‚</p><p>ä¸ºäº†æé«˜åˆ¤æ–­é“¾è¡¨èŠ‚ç‚¹å€¼æ˜¯å¦åœ¨ <code>nums</code> ä¸­ï¼Œæˆ‘ä»¬å°†å…¶è½¬æ¢ä¸º <code>set</code> é›†åˆï¼Œæ›´åŠ é«˜æ•ˆã€‚</p><h4 id="Python3"><a href="#Python3" class="headerlink" title="Python3"></a>Python3</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">numComponents</span>(<span class="hljs-params">self, head: <span class="hljs-type">Optional</span>[ListNode], nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:<br>        cur = head<br>        ans, pre = <span class="hljs-number">0</span>, ListNode(-<span class="hljs-number">1</span>)<br>        s = <span class="hljs-built_in">set</span>(nums)<br>        <span class="hljs-keyword">while</span> cur:<br>            <span class="hljs-keyword">if</span> cur.val <span class="hljs-keyword">in</span> s <span class="hljs-keyword">and</span> pre.val <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> s:<br>                    ans += <span class="hljs-number">1</span><br>            pre, cur = cur, cur.<span class="hljs-built_in">next</span><br>        <span class="hljs-keyword">return</span> ans<br></code></pre></td></tr></table></figure><h4 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">numComponents</span><span class="hljs-params">(ListNode head, <span class="hljs-type">int</span>[] nums)</span> &#123;<br>        Set&lt;Integer&gt; set = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> n : nums) set.add(n);<br>        <span class="hljs-type">ListNode</span> <span class="hljs-variable">cur</span> <span class="hljs-operator">=</span> head, pre = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ListNode</span>(-<span class="hljs-number">1</span>);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span>(cur != <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">if</span>(set.contains(cur.val) &amp;&amp; !set.contains(pre.val)) &#123;<br>                ans++;<br>            &#125;<br>            pre = cur;<br>            cur = cur.next;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Encouragement"><a href="#Encouragement" class="headerlink" title="Encouragement"></a>Encouragement</h2><p>ç›®å‰å°±è¯»äºæ–°åŠ å¡å›½ç«‹å¤§å­¦ï¼Œè½¬ç èœé¸¡ä¸€æšã€‚</p><p>å†³å¿ƒé€šè¿‡æ—¥æ›´ä¸€ç¯‡é¢˜è§£æ¿€åŠ±è‡ªå·±åšæŒåˆ·é¢˜ï¼ŒåšæŒå­¦ä¹ ç®—æ³•ã€‚</p><p>è¿™æ˜¯æˆ‘æ­å»º<a href="https://github.com/ltyzzzxxx/Leetcode-Everyday">Leetcode-Everyday</a>ä»“åº“åå‘å¸ƒã®ç¬¬23ç¯‡é¢˜è§£ï¼Œæ¬¢è¿å„ä½starå¹¶æå‡ºIssue~</p><p>ç‚¹å‡»<a href="https://leetcode.cn/u/ltyzzz/">è¿™é‡Œ</a>ï¼Œè¿›å…¥æˆ‘çš„ä¸ªäººLeetcodeä¸»é¡µ~</p>]]></content>
    
    
    <categories>
      
      <category>Leetcodeé¢˜è§£</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è¯¦è§£JDKé”01:Lockæ¥å£</title>
    <link href="/2022/10/12/%E8%AF%A6%E8%A7%A3JDK%E9%94%8101-Lock%E6%8E%A5%E5%8F%A3/"/>
    <url>/2022/10/12/%E8%AF%A6%E8%A7%A3JDK%E9%94%8101-Lock%E6%8E%A5%E5%8F%A3/</url>
    
    <content type="html"><![CDATA[<h1 id="è¯¦è§£JDKé”01ï¼šLockæ¥å£"><a href="#è¯¦è§£JDKé”01ï¼šLockæ¥å£" class="headerlink" title="è¯¦è§£JDKé”01ï¼šLockæ¥å£"></a>è¯¦è§£JDKé”01ï¼šLockæ¥å£</h1><h2 id="1-Lockç®€ä»‹"><a href="#1-Lockç®€ä»‹" class="headerlink" title="1. Lockç®€ä»‹"></a>1. Lockç®€ä»‹</h2><p>å…ˆå¼•ç”¨Lockæ¥å£æºç ä¸­ä½œè€…è´´çš„ä¸€æ®µè¯</p><blockquote><p>Lock implementations provide more extensive locking operations than can be obtained using synchronized methods and statements. They allow more <code>flexible structuring</code>, may have quite <code>different properties</code>, and may support <code>multiple associated Condition objects</code>.</p></blockquote><p>å…¶å®è¿™æ®µè¯å°±ç®€å•æ¦‚æ‹¬äº†Lockçš„ä¸‰å¤§ä¼˜ç‚¹ï¼š</p><ol><li><p>çµæ´»çš„ç»“æ„ï¼šå¯ä»¥æ˜¾å¼åœ°è·å–ä¸é‡Šæ”¾é”</p></li><li><p>å¤šç§ä¸åŒçš„å±æ€§ä¸æ–¹æ³•</p></li><li><p>å¼•å…¥äº† <code>Condition</code> å¯¹è±¡</p></li></ol><p>æ¥ä¸‹æ¥çš„éƒ¨åˆ†å°†ç€é‡ä»‹ç»è¿™å‡ ç‚¹</p><h2 id="2-Locké”çš„çµæ´»æ€§"><a href="#2-Locké”çš„çµæ´»æ€§" class="headerlink" title="2. Locké”çš„çµæ´»æ€§"></a>2. Locké”çš„çµæ´»æ€§</h2><h3 id="2-1-Lockæ¥å£æ–¹æ³•"><a href="#2-1-Lockæ¥å£æ–¹æ³•" class="headerlink" title="2.1 Lockæ¥å£æ–¹æ³•"></a>2.1 Lockæ¥å£æ–¹æ³•</h3><p>åœ¨ JDK5.0 ä¹‹å‰ï¼ŒJavaæ˜¯å€ŸåŠ©äº <code>Synchronized</code> å…³é”®å­—å®ç°åŠ é”åŠŸèƒ½ï¼Œè€Œè¿™ä¸ªåŠŸèƒ½æ˜¯é€šè¿‡JVMå®ç°çš„ã€‚è€Œåœ¨ JDK5.0 ä¹‹åï¼ŒJUCåŒ…ä¸­æ–°å¢äº†Lockæ¥å£å®ç°é”åŠŸèƒ½ã€‚</p><p>è™½ç„¶è¯¥Lockæ¥å£ä¸å…·å¤‡ <code>Synchronized</code> å…³é”®å­—éšå¼è·å–é”çš„ä¾¿æ·æ€§ï¼Œä½†æ˜¯å…¶æä¾›äº†ä¸€ç³»åˆ—æ‰‹åŠ¨æ“ä½œé”çš„æ–¹æ³•ï¼š</p><ol><li>é˜»å¡å¼åœ°è·å–é”</li></ol><p>  è¯¥æ–¹æ³•æœ‰ä¸€å®šçš„ç¼ºé™·ï¼šå¦‚æœå½“å‰é”è¢«å ç”¨ï¼Œé‚£ä¹ˆå½“å‰çº¿ç¨‹å°†è¢«ç¦ç”¨ï¼Œè¿›å…¥é˜»å¡çŠ¶æ€ï¼Œç›´åˆ°è·å–åˆ°é”ä¸ºæ­¢ã€‚</p>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">void</span> <span class="hljs-title function_">lock</span><span class="hljs-params">()</span>;<br></code></pre></td></tr></table></figure><ol start="2"><li>é˜»å¡å¼åœ°å¯æ‰“æ–­åœ°è·å–é”</li></ol>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">void</span> <span class="hljs-title function_">lockInterruptibly</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> InterruptedException;<br></code></pre></td></tr></table></figure><p>  è™½ç„¶æ˜¯é˜»å¡å¼åœ°è·å–é”ï¼Œä½†æ˜¯å¦‚æœè¯¥çº¿ç¨‹è¢«ä¸­æ–­åï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œåœæ­¢ç»§ç»­é˜»å¡ã€‚</p><ol start="3"><li>éé˜»å¡å¼åœ°è·å–é”</li></ol><p>  å°è¯•éé˜»å¡åœ°è·å–é”ï¼Œè°ƒç”¨è¯¥æ–¹æ³•åç«‹å³è¿”å›</p><ul><li><p>è‹¥èƒ½å¤Ÿè·å–åˆ°é”ï¼Œåˆ™è¿”å› true</p></li><li><p>è‹¥é”å·²è¢«å ç”¨ï¼Œåˆ™è¿”å› false</p></li></ul>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">boolean</span> <span class="hljs-title function_">tryLock</span><span class="hljs-params">()</span>;<br></code></pre></td></tr></table></figure><p>  è¯¥æ–¹æ³•çš„å…¸å‹ä½¿ç”¨åœºæ™¯ä¸ºï¼š</p>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// ä¼ªä»£ç </span><br><span class="hljs-type">Lock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> ...;<br><span class="hljs-keyword">if</span> (lock.tryLock() &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-comment">// æ“ä½œå…±äº«èµ„æº</span><br>    &#125; <span class="hljs-keyword">finally</span> &#123;<br>        <span class="hljs-comment">// é‡Šæ”¾é”</span><br>        lock.unlock();<br>    &#125;<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-comment">// æœªè·å–åˆ°é”ï¼Œæ‰§è¡Œå…¶ä½™æ“ä½œ</span><br>&#125;<br></code></pre></td></tr></table></figure><ol start="4"><li>å¸¦æœ‰è¶…æ—¶æ—¶é—´åœ°è·å–é”</li></ol><p>  å°è¯•åœ¨æŒ‡å®šçš„ä¸€æ®µæ—¶é—´å†…è·å–é”</p><ul><li><p>è‹¥åœ¨æŒ‡å®šæ—¶é—´ <code>time</code> å†…èƒ½å¤Ÿè·å–åˆ°é”ï¼Œä¸”æœªè¢«ä¸­æ–­ï¼Œåˆ™è¿”å› true</p></li><li><p>è‹¥æŒ‡å®šæ—¶é—´ <code>time</code> ç»“æŸåä»æœªè·å–åˆ°é”ï¼Œåˆ™è¿”å› false</p></li><li><p>è‹¥åœ¨æŒ‡å®šæ—¶é—´ <code>time</code> å†…è¢«æ‰“æ–­ï¼Œåˆ™æŠ›å‡º <code>InterruptedException</code></p></li></ul>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">boolean</span> <span class="hljs-title function_">tryLock</span><span class="hljs-params">(<span class="hljs-type">long</span> time, TimeUnit unit)</span> <span class="hljs-keyword">throws</span> InterruptedException;<br></code></pre></td></tr></table></figure><p>  å…¶ä¸­ <code>time</code> ä»£è¡¨æŒ‡å®šçš„è¶…æ—¶æ—¶é—´ï¼Œ<code>unit</code> ä»£è¡¨æ—¶é—´å•ä½</p><ol start="5"><li>é‡Šæ”¾é”</li></ol>  <figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">unlock</span>()</span>;<br></code></pre></td></tr></table></figure><h3 id="2-2-çµæ´»æ€§ä½“ç°"><a href="#2-2-çµæ´»æ€§ä½“ç°" class="headerlink" title="2.2 çµæ´»æ€§ä½“ç°"></a>2.2 çµæ´»æ€§ä½“ç°</h3><p>ä½¿ç”¨ <code>Synchronized</code> å…³é”®å­—è¿›è¡Œè·å–é”ä¸é‡Šæ”¾é”æ“ä½œæ—¶ï¼š</p><p>å½“åµŒå¥—å¼åœ°è·å–é”ä¹‹åï¼Œå…¶é‡Šæ”¾é”çš„é¡ºåºå¿…é¡»ä¸è·å–é”çš„é¡ºåºç›¸å</p><p>å¦‚ä¸‹è·å–é”é¡ºåºä¸ºï¼šlock1 -&gt; lock2 -&gt; lock3</p><p>é‡Šæ”¾é”é¡ºåºä¸ºï¼šlock3 -&gt; lock2 -&gt; lock1</p><p>ä»å¤–åˆ°å†…è·å–é”ï¼Œä»å†…åˆ°å¤–é‡Šæ”¾é”</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Object</span> <span class="hljs-variable">lock1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();<br><span class="hljs-type">Object</span> <span class="hljs-variable">lock2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();<br><span class="hljs-type">Object</span> <span class="hljs-variable">lock3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();<br><span class="hljs-keyword">synchronized</span> (lock1) &#123;<br>    System.out.println(<span class="hljs-string">&quot;è·å–åˆ°lock1é”&quot;</span>);<br>    <span class="hljs-keyword">synchronized</span> (lock2) &#123;<br>        System.out.println(<span class="hljs-string">&quot;è·å–åˆ°lock2é”&quot;</span>);<br>        <span class="hljs-keyword">synchronized</span> (lock3) &#123;<br>            System.out.println(<span class="hljs-string">&quot;è·å–åˆ°lock3é”&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½†æ˜¯æˆ‘ä»¬å‡è®¾å­˜åœ¨è¿™ä¸€ä¸šåŠ¡éœ€æ±‚ï¼š</p><p>å…ˆè·å–é”Aï¼Œå†è·å–é”Bï¼Œå†é‡Šæ”¾é”Aï¼Œå†è·å–é”Cï¼Œå†é‡Šæ”¾é”Bï¼Œå†è·å–é”Dã€‚</p><p>è¿™ç§è·å–é”çš„é¡ºåºä¸é‡Šæ”¾é”çš„é¡ºåºæ˜¯ä¸å›ºå®šçš„ï¼Œæ­¤æ—¶æ— æ³•ç”¨ <code>Synchronized</code> è§£å†³ã€‚</p><p>è€Œé‡‡ç”¨Lockæ¥å£å®ç°é”åˆ™å¯ä»¥å®Œç¾è§£å†³è¿™ä¸€é—®é¢˜ï¼Œå› ä¸ºå®ƒæä¾›äº†æ‰‹åŠ¨çš„åŠ é”è§£é”æ–¹æ³•ï¼</p><h2 id="3-Locké”çš„å¤šç§åŠŸèƒ½"><a href="#3-Locké”çš„å¤šç§åŠŸèƒ½" class="headerlink" title="3. Locké”çš„å¤šç§åŠŸèƒ½"></a>3. Locké”çš„å¤šç§åŠŸèƒ½</h2><p>Lockæ¥å£ä¸­è™½ç„¶åªæä¾›äº†ç®€å•çš„è·å–é”ä¸é‡Šæ”¾é”çš„åŸºæœ¬æ–¹æ³•ï¼Œä½†æ˜¯å…¶å®ç°ç±»ReentrantLockä¸­å®ç°äº†å¤šç§æ–¹æ³•ï¼Œæä¾›äº†ä¸åŒçš„åŠŸèƒ½ã€‚</p><blockquote><p>è¿™ä¸€ç¯‡æ–‡ç« åªå¯¹Lockæ¥å£è¿›è¡Œè¯¦ç»†ä»‹ç»ï¼Œæ‰€ä»¥ä»¥ä¸‹åªåšç®€å•çš„æ–‡å­—ä»‹ç»ã€‚</p><p>åç»­æ–‡ç« ä¼šé€šè¿‡æºç è§£è¯» <code>ReentrantLock</code></p></blockquote><ol><li>å®ç°å…¬å¹³é”ä¸éå…¬å¹³é”ã€‚å®ä¾‹åŒ–ReentrantLockæ—¶ï¼Œå…¶æœ‰å‚æ„é€ æ–¹æ³•ä¸­ä¼ å…¥çš„å€¼ä¸ºbooleanç±»å‹ã€‚è‹¥ä¼ å…¥å€¼ä¸ºtrueï¼Œä¸ºå…¬å¹³é”ï¼›å¦åˆ™ä¸ºéå…¬å¹³é”</li></ol>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-title function_">ReentrantLock</span><span class="hljs-params">(<span class="hljs-type">boolean</span> fair)</span> &#123;<br>    sync = fair ? <span class="hljs-keyword">new</span> <span class="hljs-title class_">FairSync</span>() : <span class="hljs-keyword">new</span> <span class="hljs-title class_">NonfairSync</span>();<br>&#125;<br></code></pre></td></tr></table></figure><ol start="2"><li>åˆ¤æ–­é”æ˜¯å¦å·²ç»è¢«æŒæœ‰</li></ol>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isLocked</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">return</span> sync.isLocked();<br>&#125;<br></code></pre></td></tr></table></figure><ol start="3"><li>åˆ¤æ–­é”æ˜¯å¦ä¸ºå…¬å¹³é”</li></ol>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isFair</span><span class="hljs-params">()</span> &#123;  <br>    <span class="hljs-keyword">return</span> sync <span class="hljs-keyword">instanceof</span> FairSync;  <br>&#125;<br></code></pre></td></tr></table></figure><p>ç›¸è¾ƒäºLockæ¥å£ï¼Œ<code>Synchronized</code> åªå®ç°äº†éå…¬å¹³é”ã€‚</p><h2 id="4-ConditionåŸºæœ¬ä½¿ç”¨"><a href="#4-ConditionåŸºæœ¬ä½¿ç”¨" class="headerlink" title="4. ConditionåŸºæœ¬ä½¿ç”¨"></a>4. ConditionåŸºæœ¬ä½¿ç”¨</h2><p>å›é¡¾ <code>Synchronized</code> å…³é”®å­—ï¼Œå…¶å®ç° <code>ç­‰å¾…/é€šçŸ¥</code> çš„æ¨¡å¼æ˜¯é€šè¿‡ <code>Object</code> ç±»å†…éƒ¨çš„ <code>wait</code>ã€<code>notify</code> ä»¥åŠ <code>notifyAll</code> å®ç°çš„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Object</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();  <br><span class="hljs-type">Thread</span> <span class="hljs-variable">thread1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; &#123;  <br>    <span class="hljs-keyword">synchronized</span> (lock) &#123;  <br>        <span class="hljs-keyword">try</span> &#123;  <br>            lock.wait();  <br>        &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;  <br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);  <br>        &#125;  <br>        System.out.println(<span class="hljs-string">&quot;Thread1å·²è¢«å”¤é†’&quot;</span>);  <br>    &#125;  <br>&#125;);  <br>thread1.start();  <br>Thread.sleep(<span class="hljs-number">2000</span>);  <br><span class="hljs-keyword">synchronized</span> (lock) &#123;  <br>    System.out.println(<span class="hljs-string">&quot;å”¤é†’Thread1&quot;</span>);  <br>    lock.notify();  <br>    <span class="hljs-comment">// lock.notifyAll();  </span><br>&#125;<br></code></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>notify</code> æ–¹æ³•æ˜¯å”¤é†’ <code>lock</code> é”ä¸Šçš„å…¶ä¸­ä¸€ä¸ªçº¿ç¨‹ï¼Œ<code>notifyAll</code> æ–¹æ³•æ˜¯å”¤é†’ <code>lock</code> é”ä¸Šçš„å…¨éƒ¨çº¿ç¨‹ã€‚</p><p>ç„¶è€Œï¼Œè¿™ä¸¤ç§æ–¹æ³•å‡ä¸èƒ½æŒ‡å®šæƒ³è¦å”¤é†’çš„çº¿ç¨‹ã€‚</p><p>Conditionçš„å‡ºç°å¾ˆå¥½åœ°è§£å†³äº†è¿™ä¸€é—®é¢˜ï¼Œå¯ä»¥åˆ†ç»„å”¤é†’æƒ³è¦å”¤é†’çš„çº¿ç¨‹ã€‚</p><p>å¦‚ä¸‹ä¸ºConditionçš„åŸºæœ¬å®ç°æ–¹å¼ï¼šéœ€è¦ä½¿ç”¨ <code>ReentrantLock</code> å®ç° <code>Lock</code> æ¥å£</p><blockquote><p>åç»­æ–‡ç« ä¼šè¯¦ç»†è§£è¯» <code>Condition</code></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Lock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReentrantLock</span>();  <br><span class="hljs-type">Condition</span> <span class="hljs-variable">condition</span> <span class="hljs-operator">=</span> lock.newCondition();  <br><br><span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; &#123;  <br>    lock.lock();  <br>    <span class="hljs-keyword">try</span> &#123;  <br>        <span class="hljs-keyword">try</span> &#123;  <br>            System.out.println(<span class="hljs-string">&quot;Thread1è¿›å…¥ç­‰å¾…&quot;</span>);  <br>            condition.await();  <br>        &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;  <br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);  <br>        &#125;  <br>        System.out.println(<span class="hljs-string">&quot;Thread1å·²è¢«å”¤é†’&quot;</span>);  <br>    &#125; <span class="hljs-keyword">finally</span> &#123;  <br>        lock.unlock();  <br>    &#125;  <br>&#125;).start();  <br><br>Thread.sleep(<span class="hljs-number">3000</span>);  <br><span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; &#123;  <br>    lock.lock();  <br>    <span class="hljs-keyword">try</span> &#123;  <br>        System.out.println(<span class="hljs-string">&quot;å”¤é†’Thread1&quot;</span>);  <br>        condition.signal();  <br>    &#125; <span class="hljs-keyword">finally</span> &#123;  <br>        lock.unlock();  <br>    &#125;  <br>&#125;).start();<br></code></pre></td></tr></table></figure><h2 id="5-Lockä¸Synchronized-å¯¹æ¯”"><a href="#5-Lockä¸Synchronized-å¯¹æ¯”" class="headerlink" title="5. Lockä¸Synchronized å¯¹æ¯”"></a>5. Lockä¸Synchronized å¯¹æ¯”</h2><ol><li><p><code>Lock</code> æ‰€å¤„çš„å±‚é¢æ˜¯JDKï¼Œæ˜¯äººä¸ºé€šè¿‡Javaä»£ç è€Œå®ç°çš„ï¼›è€Œ <code>Synchronized</code> æ˜¯Javaçš„å…³é”®å­—ï¼Œæ˜¯åº•å±‚C++è¯­è¨€å®ç°ï¼Œå¤„äºJVMå±‚é¢ã€‚</p></li><li><p><code>Lock</code> è·å–å’Œé‡Šæ”¾é”çš„é¡ºåºä¸å›ºå®šï¼Œå› ä¸ºå…¶å†…ç½®äº†æ‰‹åŠ¨æ“ä½œé”çš„æ–¹æ³•ï¼›è€Œ <code>Synchronized</code> å¿…é¡»æŒ‰ç…§è·å–é”çš„ç›¸åé¡ºåºå»é‡Šæ”¾é”ã€‚</p></li><li><p><code>Lock</code> å¯ä»¥éé˜»å¡å¼åœ°è·å–é”ï¼ˆ <code>tryLock</code> æ–¹æ³•ï¼‰ï¼›è€Œ <code>Synchronized</code> åªèƒ½é€šè¿‡é˜»å¡å¼åœ°è·å–é”ï¼Œè‹¥å½“å‰é”å·²è¢«å…¶ä»–çº¿ç¨‹è·å–ï¼Œé‚£ä¹ˆè¯¥çº¿ç¨‹åªèƒ½é˜»å¡ç­‰å¾…ã€‚</p></li><li><p><code>Lock</code> æ—¢å¯å®ç°å…¬å¹³é”ï¼Œä¹Ÿå¯å®ç°éå…¬å¹³é”ï¼›è€Œ <code>Synchronized</code>åªèƒ½å®ç°éå…¬å¹³é”ã€‚</p></li><li><p><code>lock</code> ç­‰å¾…é”è¿‡ç¨‹ä¸­å¯ä»¥ç”¨ <code>lockInterruptibly</code> æ¥ä¸­æ–­ç­‰å¾…ï¼Œè€Œsynchronizedåªèƒ½ç­‰å¾…é”çš„é‡Šæ”¾ï¼Œä¸èƒ½å“åº”ä¸­æ–­ï¼›</p></li></ol><h2 id="6-å†™åœ¨åé¢"><a href="#6-å†™åœ¨åé¢" class="headerlink" title="6. å†™åœ¨åé¢"></a>6. å†™åœ¨åé¢</h2><p>å‚è€ƒæ–‡çŒ®ï¼š</p><blockquote><ol><li><p>JDK5.0æºç </p></li><li><p>ã€ŠJavaå¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯ã€‹</p></li><li><p><a href="https://www.bilibili.com/video/BV16J411h7Rd/?spm_id_from=333.337.search-card.all.click&vd_source=4e7654633e4719c03a8fb6c6b524ddc2">é»‘é©¬Javaå¹¶å‘ç¼–ç¨‹æ•™ç¨‹</a></p></li></ol></blockquote><p>è¿™ä¸ªç³»åˆ—å¤§æ¦‚ä¼šæœ‰5ç¯‡å·¦å³çš„æ ·å­ï¼Œæˆ‘å°½å¯èƒ½æŠŠè‡ªå·±å¯¹äºJUCçš„ç†è§£é€šä¿—æ˜“æ‡‚åœ°å†™å‡ºæ¥</p><p>ä½†å¦‚æœæœ‰é”™è¯¯çš„åœ°æ–¹ï¼Œè¯·å¤§å®¶æŒ‡å‡ºæ¥ï¼Œæˆ‘ä¼šåŠæ—¶å»å­¦ä¹ ä¸æ”¹è¿›~</p><p>å¦‚æœå¤§å®¶è§‰å¾—æˆ‘çš„å†…å®¹å†™çš„è¿˜ä¸é”™ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºç•™è¨€æ”¯æŒä¸€ä¸‹å‘€~</p><p>æ¬¢è¿å¤§å®¶æ¥é€›ä¸€é€›æˆ‘çš„<a href="https://ltyzzzxxx.github.io/">ä¸ªäººåšå®¢</a>~</p><p>æ­¤å¤–ï¼Œä»2022.10.1å¼€å§‹ï¼Œä¸ºæ¿€åŠ±è‡ªå·±æŒç»­åˆ·é¢˜ï¼Œæˆ‘å¼€å§‹æŒç»­æ—¥æ›´Leetcodeé¢˜è§£å•¦~</p><p>æ‰€æœ‰é¢˜è§£å‡å·²æ”¾åˆ°<a href="https://github.com/ltyzzzxxx/Leetcode-Everyday">Githubä»“åº“</a>ä¸­ï¼Œæ¬¢è¿å¤§å®¶Starå¹¶æå‡ºIssue~</p>]]></content>
    
    
    <categories>
      
      <category>å¹¶å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JUC</tag>
      
      <tag>Java</tag>
      
      <tag>é”</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LC-Solution 1877. Minimize Maximum Pair Sum in Array</title>
    <link href="/2022/10/11/LC-Solution-1877-Minimize-Maximum-Pair-Sum-in-Array/"/>
    <url>/2022/10/11/LC-Solution-1877-Minimize-Maximum-Pair-Sum-in-Array/</url>
    
    <content type="html"><![CDATA[<h1 id="1877-æ•°ç»„ä¸­æœ€å¤§æ•°å¯¹å’Œçš„æœ€å°å€¼"><a href="#1877-æ•°ç»„ä¸­æœ€å¤§æ•°å¯¹å’Œçš„æœ€å°å€¼" class="headerlink" title="1877. æ•°ç»„ä¸­æœ€å¤§æ•°å¯¹å’Œçš„æœ€å°å€¼"></a><a href="https://leetcode.cn/problems/minimize-maximum-pair-sum-in-array/">1877. æ•°ç»„ä¸­æœ€å¤§æ•°å¯¹å’Œçš„æœ€å°å€¼</a></h1><h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>ä¸€ä¸ªæ•°å¯¹Â <code>(a,b)</code>Â çš„Â <strong>æ•°å¯¹å’Œ</strong>Â ç­‰äºÂ <code>a + b</code>Â ã€‚<strong>æœ€å¤§æ•°å¯¹å’Œ</strong>Â æ˜¯ä¸€ä¸ªæ•°å¯¹æ•°ç»„ä¸­æœ€å¤§çš„Â <strong>æ•°å¯¹å’Œ</strong>Â ã€‚</p><ul><li>æ¯”æ–¹è¯´ï¼Œå¦‚æœæˆ‘ä»¬æœ‰æ•°å¯¹Â <code>(1,5)</code>Â ï¼Œ<code>(2,3)</code>Â å’ŒÂ <code>(4,4)</code>ï¼Œ<strong>æœ€å¤§æ•°å¯¹å’Œ</strong>Â ä¸º <code>max(1+5, 2+3, 4+4) = max(6, 5, 8) = 8</code>Â ã€‚</li></ul><p>ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸ºÂ <strong>å¶æ•°</strong>Â <code>n</code>Â çš„æ•°ç»„Â <code>nums</code>Â ï¼Œè¯·ä½ å°†Â <code>nums</code>Â ä¸­çš„å…ƒç´ åˆ†æˆÂ <code>n / 2</code>Â ä¸ªæ•°å¯¹ï¼Œä½¿å¾—ï¼š</p><ul><li><code>nums</code>Â ä¸­æ¯ä¸ªå…ƒç´ Â <strong>æ°å¥½</strong>Â åœ¨Â <strong>ä¸€ä¸ª</strong>Â æ•°å¯¹ä¸­ï¼Œä¸”</li><li><strong>æœ€å¤§æ•°å¯¹å’Œ</strong>Â çš„å€¼Â <strong>æœ€å°</strong>Â ã€‚</li></ul><p>è¯·ä½ åœ¨æœ€ä¼˜æ•°å¯¹åˆ’åˆ†çš„æ–¹æ¡ˆä¸‹ï¼Œè¿”å›æœ€å°çš„Â <strong>æœ€å¤§æ•°å¯¹å’Œ</strong>Â ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus">è¾“å…¥ï¼šnums = <span class="hljs-selector-attr">[3,5,2,3]</span><br>è¾“å‡ºï¼š<span class="hljs-number">7</span><br>è§£é‡Šï¼šæ•°ç»„ä¸­çš„å…ƒç´ å¯ä»¥åˆ†ä¸ºæ•°å¯¹ (<span class="hljs-number">3</span>,<span class="hljs-number">3</span>) å’Œ (<span class="hljs-number">5</span>,<span class="hljs-number">2</span>) ã€‚<br>æœ€å¤§æ•°å¯¹å’Œä¸º <span class="hljs-built_in">max</span>(<span class="hljs-number">3</span>+<span class="hljs-number">3</span>, <span class="hljs-number">5</span>+<span class="hljs-number">2</span>) = <span class="hljs-built_in">max</span>(<span class="hljs-number">6</span>, <span class="hljs-number">7</span>) = <span class="hljs-number">7</span> ã€‚<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus">è¾“å…¥ï¼šnums = <span class="hljs-selector-attr">[3,5,4,2,4,6]</span><br>è¾“å‡ºï¼š<span class="hljs-number">8</span><br>è§£é‡Šï¼šæ•°ç»„ä¸­çš„å…ƒç´ å¯ä»¥åˆ†ä¸ºæ•°å¯¹ (<span class="hljs-number">3</span>,<span class="hljs-number">5</span>)ï¼Œ(<span class="hljs-number">4</span>,<span class="hljs-number">4</span>) å’Œ (<span class="hljs-number">6</span>,<span class="hljs-number">2</span>) ã€‚<br>æœ€å¤§æ•°å¯¹å’Œä¸º <span class="hljs-built_in">max</span>(<span class="hljs-number">3</span>+<span class="hljs-number">5</span>, <span class="hljs-number">4</span>+<span class="hljs-number">4</span>, <span class="hljs-number">6</span>+<span class="hljs-number">2</span>) = <span class="hljs-built_in">max</span>(<span class="hljs-number">8</span>, <span class="hljs-number">8</span>, <span class="hljs-number">8</span>) = <span class="hljs-number">8</span> ã€‚<br></code></pre></td></tr></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li><code>n == nums.length</code></li><li><code>2 &lt;= n &lt;= 105</code></li><li><code>n</code>Â æ˜¯Â <strong>å¶æ•°</strong>Â ã€‚</li><li><code>1 &lt;= nums[i] &lt;= 105</code></li></ul><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><h3 id="æ–¹æ³•ä¸€ï¼šè´ªå¿ƒ-åŒæŒ‡é’ˆ"><a href="#æ–¹æ³•ä¸€ï¼šè´ªå¿ƒ-åŒæŒ‡é’ˆ" class="headerlink" title="æ–¹æ³•ä¸€ï¼šè´ªå¿ƒ + åŒæŒ‡é’ˆ"></a>æ–¹æ³•ä¸€ï¼šè´ªå¿ƒ + åŒæŒ‡é’ˆ</h3><p>åˆ†æé¢˜æ„å¯çŸ¥ï¼šé¢˜ç›®ç»™å®šäº†ä¸€ä¸ªå¶æ•°é•¿åº¦çš„ <code>nums</code> æ•°ç»„ï¼Œå°†å…¶ä¸¤ä¸¤åˆ†ç»„ç»„æˆæ•°å¯¹ï¼Œä½¿å¾—æœ€ç»ˆæ„æˆçš„æ•°å¯¹æ•°ç»„ä¸­çš„æœ€å¤§æ•°å¯¹å’Œå°½å¯èƒ½çš„å°ã€‚</p><p>æ•°å¯¹å’Œæ„æ€æ˜¯ï¼šä¸€ä¸ªæ•°å¯¹ä¸­çš„ä¸¤ä¸ªæ•°ä¹‹å’Œ</p><p>ä¸ºäº†ä½¿å¾—æœ€å¤§çš„æ•°å¯¹å’Œå°½å¯èƒ½åœ°å°ï¼Œç›´è§‚åˆ¤æ–­ä¾¿æ˜¯é‡‡ç”¨è´ªå¿ƒæ€æƒ³ï¼Œä½¿å¾—æ•°ç»„ä¸­çš„æœ€å°å€¼ä¸æœ€å¤§å€¼ç»„é˜Ÿï¼Œç¬¬äºŒå°å€¼ä¸ç¬¬äºŒå¤§å€¼ç»„é˜Ÿ â€¦ ä¾æ¬¡ç±»æ¨ã€‚æœ€ç»ˆå¾—åˆ°çš„æ•°å¯¹æ•°ç»„ä¾¿å¯ç¬¦åˆè¿™ä¸€æ¡ä»¶ã€‚</p><p>äºæ˜¯æ ¹æ®è¿™ä¸€è´ªå¿ƒæ€æƒ³ï¼Œå¾ˆå®¹æ˜“æƒ³åˆ°ç®—æ³•å®ç°æ–¹æ¡ˆ -&gt; æ’åºåŒæŒ‡é’ˆï¼Œéå†æ•°ç»„</p><h4 id="Python3"><a href="#Python3" class="headerlink" title="Python3"></a>Python3</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">minPairSum</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:<br>        nums.sort()<br>        i, j = <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(nums) - <span class="hljs-number">1</span><br>        ans = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">while</span> i &lt; j:<br>            ans = <span class="hljs-built_in">max</span>(ans, nums[i] + nums[j])<br>            i, j = i + <span class="hljs-number">1</span>, j - <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> ans<br></code></pre></td></tr></table></figure><p>é‡‡ç”¨æ¨å¯¼å¼è¿›ä¸€æ­¥ç®€åŒ–ä»£ç </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">minPairSum</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:<br>        nums.sort()<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">max</span>(nums[i] + nums[<span class="hljs-built_in">len</span>(nums) - <span class="hljs-number">1</span> - i] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nums)) <span class="hljs-keyword">if</span> i &lt; <span class="hljs-built_in">len</span>(nums) // <span class="hljs-number">2</span>)<br></code></pre></td></tr></table></figure><h4 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">minPairSum</span><span class="hljs-params">(<span class="hljs-type">int</span>[] nums)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> nums.length;<br>        Arrays.sort(nums);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">l</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, r = n - <span class="hljs-number">1</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span>(l &lt; r) &#123;<br>            ans = Math.max(ans, nums[l] + nums[r]);<br>            l++;<br>            r--;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Encouragement"><a href="#Encouragement" class="headerlink" title="Encouragement"></a>Encouragement</h2><p>ç›®å‰å°±è¯»äºæ–°åŠ å¡å›½ç«‹å¤§å­¦ï¼Œè½¬ç èœé¸¡ä¸€æšã€‚</p><p>å†³å¿ƒé€šè¿‡æ—¥æ›´ä¸€ç¯‡é¢˜è§£æ¿€åŠ±è‡ªå·±åšæŒåˆ·é¢˜ï¼ŒåšæŒå­¦ä¹ ç®—æ³•ã€‚</p><p>è¿™æ˜¯æˆ‘æ­å»º<a href="https://github.com/ltyzzzxxx/Leetcode-Everyday">Leetcode-Everyday</a>ä»“åº“åå‘å¸ƒã®ç¬¬22ç¯‡é¢˜è§£ï¼Œæ¬¢è¿å„ä½starå¹¶æå‡ºIssue~</p><p>ç‚¹å‡»<a href="https://leetcode.cn/u/ltyzzz/">è¿™é‡Œ</a>ï¼Œè¿›å…¥æˆ‘çš„ä¸ªäººLeetcodeä¸»é¡µ~</p>]]></content>
    
    
    <categories>
      
      <category>Leetcodeé¢˜è§£</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LC-Solution 1846. Maximum Element After Decreasing and Rearranging</title>
    <link href="/2022/10/11/LC-Solution-1846-Maximum-Element-After-Decreasing-and-Rearranging/"/>
    <url>/2022/10/11/LC-Solution-1846-Maximum-Element-After-Decreasing-and-Rearranging/</url>
    
    <content type="html"><![CDATA[<h1 id="1846-å‡å°å’Œé‡æ–°æ’åˆ—æ•°ç»„åçš„æœ€å¤§å…ƒç´ "><a href="#1846-å‡å°å’Œé‡æ–°æ’åˆ—æ•°ç»„åçš„æœ€å¤§å…ƒç´ " class="headerlink" title="1846. å‡å°å’Œé‡æ–°æ’åˆ—æ•°ç»„åçš„æœ€å¤§å…ƒç´ "></a><a href="https://leetcode.cn/problems/maximum-element-after-decreasing-and-rearranging/">1846. å‡å°å’Œé‡æ–°æ’åˆ—æ•°ç»„åçš„æœ€å¤§å…ƒç´ </a></h1><h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>ç»™ä½ ä¸€ä¸ªæ­£æ•´æ•°æ•°ç»„Â <code>arr</code>Â ã€‚è¯·ä½ å¯¹Â <code>arr</code>Â æ‰§è¡Œä¸€äº›æ“ä½œï¼ˆä¹Ÿå¯ä»¥ä¸è¿›è¡Œä»»ä½•æ“ä½œï¼‰ï¼Œä½¿å¾—æ•°ç»„æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p><ul><li><p><code>arr</code>Â ä¸­Â <strong>ç¬¬ä¸€ä¸ª</strong>Â å…ƒç´ å¿…é¡»ä¸ºÂ <code>1</code></p></li><li><p>ä»»æ„ç›¸é‚»ä¸¤ä¸ªå…ƒç´ çš„å·®çš„ç»å¯¹å€¼Â <strong>å°äºç­‰äº</strong>Â <code>1</code>Â ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºä»»æ„çš„Â <code>1 &lt;= i &lt; arr.length</code>Â ï¼ˆ<strong>æ•°ç»„ä¸‹æ ‡ä» 0 å¼€å§‹</strong>ï¼‰ï¼Œéƒ½æ»¡è¶³Â <code>abs(arr[i] - arr[i - 1]) &lt;= 1</code>Â ã€‚<code>abs(x)</code>Â ä¸ºÂ <code>x</code>Â çš„ç»å¯¹å€¼ã€‚</p></li></ul><p>ä½ å¯ä»¥æ‰§è¡Œä»¥ä¸‹ 2 ç§æ“ä½œä»»æ„æ¬¡ï¼š</p><ul><li><strong>å‡å°</strong>Â <code>arr</code>Â ä¸­ä»»æ„å…ƒç´ çš„å€¼ï¼Œä½¿å…¶å˜ä¸ºä¸€ä¸ªÂ <strong>æ›´å°çš„æ­£æ•´æ•°</strong>Â ã€‚</li><li><strong>é‡æ–°æ’åˆ—</strong>Â <code>arr</code>Â ä¸­çš„å…ƒç´ ï¼Œä½ å¯ä»¥ä»¥ä»»æ„é¡ºåºé‡æ–°æ’åˆ—ã€‚</li></ul><p>è¯·ä½ è¿”å›æ‰§è¡Œä»¥ä¸Šæ“ä½œåï¼Œåœ¨æ»¡è¶³å‰æ–‡æ‰€è¿°çš„æ¡ä»¶ä¸‹ï¼Œ<code>arr</code>Â ä¸­å¯èƒ½çš„Â <strong>æœ€å¤§å€¼</strong>Â ã€‚</p><p><strong>ç¤ºä¾‹1ï¼š</strong></p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">è¾“å…¥ï¼šarr = <span class="hljs-string">[2,2,1,2,1]</span><br>è¾“å‡ºï¼š<span class="hljs-number">2</span><br>è§£é‡Šï¼š<br>æˆ‘ä»¬å¯ä»¥é‡æ–°æ’åˆ— arr å¾—åˆ° <span class="hljs-string">[1,2,2,2,1]</span> ï¼Œè¯¥æ•°ç»„æ»¡è¶³æ‰€æœ‰æ¡ä»¶ã€‚<br>arr ä¸­æœ€å¤§å…ƒç´ ä¸º <span class="hljs-number">2</span> ã€‚<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs markdown">è¾“å…¥ï¼šarr = [100,1,1000]<br>è¾“å‡ºï¼š3<br>è§£é‡Šï¼š<br>ä¸€ä¸ªå¯è¡Œçš„æ–¹æ¡ˆå¦‚ä¸‹ï¼š<br><span class="hljs-bullet">1.</span> é‡æ–°æ’åˆ— arr å¾—åˆ° [1,100,1000] ã€‚<br><span class="hljs-bullet">2.</span> å°†ç¬¬äºŒä¸ªå…ƒç´ å‡å°ä¸º 2 ã€‚<br><span class="hljs-bullet">3.</span> å°†ç¬¬ä¸‰ä¸ªå…ƒç´ å‡å°ä¸º 3 ã€‚<br>ç°åœ¨ arr = [1,2,3] ï¼Œæ»¡è¶³æ‰€æœ‰æ¡ä»¶ã€‚<br>arr ä¸­æœ€å¤§å…ƒç´ ä¸º 3 ã€‚<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 3ï¼š</strong></p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">è¾“å…¥ï¼šarr = <span class="hljs-string">[1,2,3,4,5]</span><br>è¾“å‡ºï¼š<span class="hljs-number">5</span><br>è§£é‡Šï¼šæ•°ç»„å·²ç»æ»¡è¶³æ‰€æœ‰æ¡ä»¶ï¼Œæœ€å¤§å…ƒç´ ä¸º <span class="hljs-number">5</span> ã€‚<br></code></pre></td></tr></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li><code>1 &lt;= arr.length &lt;= 105</code></li><li><code>1 &lt;= arr[i] &lt;= 109</code></li></ul><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><h3 id="æ–¹æ³•ä¸€ï¼šè´ªå¿ƒ"><a href="#æ–¹æ³•ä¸€ï¼šè´ªå¿ƒ" class="headerlink" title="æ–¹æ³•ä¸€ï¼šè´ªå¿ƒ"></a>æ–¹æ³•ä¸€ï¼šè´ªå¿ƒ</h3><p>åˆ†æé¢˜æ„ï¼šé¢˜ç›®è¦æ±‚é€šè¿‡ <code>å‡æ³•è¿ç®—</code> æˆ– <code>é‡æ’åº</code> ä¸¤ç§æ–¹æ³•ï¼Œä½¿å¾—æ•°ç»„çš„ä¸¤ä¸¤å…ƒç´ ä¹‹å·®çš„ç»å¯¹å€¼å°äºç­‰äº1ï¼ˆ<code>abs(arr[i] - arr[i - 1]) &lt;= 1</code>ï¼‰ï¼Œä¸” <code>arr[0] = 1</code></p><p>äºæ˜¯å¾ˆå®¹æ˜“æƒ³åˆ°ç”¨è´ªå¿ƒæ€æƒ³è§£å†³æœ¬é¢˜</p><ol><li><p>å…è®¸é‡æ’åºä¸”é¢˜ç›®æœ€ç»ˆè¦æ±‚è¿”å›æ•°ç»„æœ€å¤§å€¼ï¼šæœ€ç»ˆè¿”å›ç»“æœä¸æ•°ç»„é¡ºåºæ— å…³ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥å¯¹æ•°ç»„ <code>arr</code> è¿›è¡Œæ’åºã€‚</p></li><li><p><code>arr[0] = 1</code>ï¼šä»æ­¤å¯ä»¥ç¡®å®šå¯¹ <code>arr</code> è¿›è¡Œå‡åºæ’åº</p></li><li><p>å¯ä»¥åšå‡æ³•è¿ç®—ï¼šä»æ­¤æ¡ä»¶å¯ä»¥è¿›ä¸€æ­¥ç®€åŒ–é¢˜ç›®ã€‚æ—¢ç„¶æˆ‘ä»¬ä¹‹å‰å·²ç»ç¡®å®šäº†é‡‡ç”¨å‡åºæ’åºï¼Œé‚£ä¹ˆå¯ä»¥å¾—çŸ¥æ­¤æ¡ä»¶å§‹ç»ˆæˆç«‹ <code>arr[i] &gt;= arr[i - 1]</code>ã€‚</p></li></ol><p>  æ‰€ä»¥æˆ‘ä»¬éå† <code>arr</code> æ•°ç»„æ—¶ï¼š</p><ol><li><p>æ— éœ€è®¡ç®—å…ƒç´ ä¹‹å·®çš„ç»å¯¹å€¼</p></li><li><p>å½“ä¸æ»¡è¶³å…ƒç´ ä¹‹å·®å°äºç­‰äº1çš„æ¡ä»¶ï¼ˆ <code>arr[i] &gt; arr[i] + 1</code> ï¼‰æ—¶ï¼Œåªéœ€ <code>arr[i] = arr[i -1] + 1</code>ï¼Œä½¿è¾ƒå¤§çš„å€¼ç­‰äºè¾ƒå°çš„å€¼åŠ 1ï¼Œç›¸å½“äºå¯¹è¾ƒå¤§çš„å€¼åšå‡æ³•è¿ç®—</p></li></ol><h4 id="Python3"><a href="#Python3" class="headerlink" title="Python3"></a>Python3</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">maximumElementAfterDecrementingAndRearranging</span>(<span class="hljs-params">self, arr: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:<br>        arr.sort()<br>        arr[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(arr)):<br>            <span class="hljs-keyword">if</span> arr[i] - arr[i - <span class="hljs-number">1</span>] &gt; <span class="hljs-number">1</span>:<br>                arr[i] = arr[i - <span class="hljs-number">1</span>] + <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> arr[-<span class="hljs-number">1</span>]<br></code></pre></td></tr></table></figure><h4 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">maximumElementAfterDecrementingAndRearranging</span><span class="hljs-params">(<span class="hljs-type">int</span>[] arr)</span> &#123;<br>        Arrays.sort(arr);<br>        arr[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; arr.length; i++) &#123;<br>            <span class="hljs-keyword">if</span>(arr[i] - arr[i - <span class="hljs-number">1</span>] &gt; <span class="hljs-number">1</span>) &#123;<br>               arr[i] = arr[i - <span class="hljs-number">1</span>] + <span class="hljs-number">1</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> arr[arr.length - <span class="hljs-number">1</span>];<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Encouragement"><a href="#Encouragement" class="headerlink" title="Encouragement"></a>Encouragement</h2><p>ç›®å‰å°±è¯»äºæ–°åŠ å¡å›½ç«‹å¤§å­¦ï¼Œè½¬ç èœé¸¡ä¸€æšã€‚</p><p>å†³å¿ƒé€šè¿‡æ—¥æ›´ä¸€ç¯‡é¢˜è§£æ¿€åŠ±è‡ªå·±åšæŒåˆ·é¢˜ï¼ŒåšæŒå­¦ä¹ ç®—æ³•ã€‚</p><p>è¿™æ˜¯æˆ‘æ­å»º<a href="https://github.com/ltyzzzxxx/Leetcode-Everyday">Leetcode-Everyday</a>ä»“åº“åå‘å¸ƒã®ç¬¬21ç¯‡é¢˜è§£ï¼Œæ¬¢è¿å„ä½starå¹¶æå‡ºIssue~</p><p>ç‚¹å‡»<a href="https://leetcode.cn/u/ltyzzz/">è¿™é‡Œ</a>ï¼Œè¿›å…¥æˆ‘çš„ä¸ªäººLeetcodeä¸»é¡µ~</p>]]></content>
    
    
    <categories>
      
      <category>Leetcodeé¢˜è§£</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LC-Solution 1833. Maximum Ice Cream Bars</title>
    <link href="/2022/10/11/LC-Solution-1833-Maximum-Ice-Cream-Bars/"/>
    <url>/2022/10/11/LC-Solution-1833-Maximum-Ice-Cream-Bars/</url>
    
    <content type="html"><![CDATA[<h1 id="1833-é›ªç³•çš„æœ€å¤§æ•°é‡"><a href="#1833-é›ªç³•çš„æœ€å¤§æ•°é‡" class="headerlink" title="1833. é›ªç³•çš„æœ€å¤§æ•°é‡"></a><a href="https://leetcode.cn/problems/maximum-ice-cream-bars/">1833. é›ªç³•çš„æœ€å¤§æ•°é‡</a></h1><h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>å¤æ—¥ç‚ç‚ï¼Œå°ç”·å­© Tony æƒ³ä¹°ä¸€äº›é›ªç³•æ¶ˆæ¶ˆæš‘ã€‚</p><p>å•†åº—ä¸­æ–°åˆ°Â <code>n</code>Â æ”¯é›ªç³•ï¼Œç”¨é•¿åº¦ä¸ºÂ <code>n</code>Â çš„æ•°ç»„Â <code>costs</code>Â è¡¨ç¤ºé›ªç³•çš„å®šä»·ï¼Œå…¶ä¸­Â <code>costs[i]</code>Â è¡¨ç¤ºç¬¬Â <code>i</code>Â æ”¯é›ªç³•çš„ç°é‡‘ä»·æ ¼ã€‚Tony ä¸€å…±æœ‰Â <code>coins</code>Â ç°é‡‘å¯ä»¥ç”¨äºæ¶ˆè´¹ï¼Œä»–æƒ³è¦ä¹°å°½å¯èƒ½å¤šçš„é›ªç³•ã€‚</p><p>ç»™ä½ ä»·æ ¼æ•°ç»„Â <code>costs</code>Â å’Œç°é‡‘é‡Â <code>coins</code>Â ï¼Œè¯·ä½ è®¡ç®—å¹¶è¿”å› Tony ç”¨Â <code>coins</code>Â ç°é‡‘èƒ½å¤Ÿä¹°åˆ°çš„é›ªç³•çš„Â <strong>æœ€å¤§æ•°é‡</strong>Â ã€‚</p><p><strong>æ³¨æ„ï¼š</strong> Tony å¯ä»¥æŒ‰ä»»æ„é¡ºåºè´­ä¹°é›ªç³•ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥ï¼šcosts = [1,3,2,4,1], coins = 7<br>è¾“å‡ºï¼š4<br>è§£é‡Šï¼šTony å¯ä»¥ä¹°ä¸‹æ ‡ä¸º 0ã€1ã€2ã€4 çš„é›ªç³•ï¼Œæ€»ä»·ä¸º<span class="hljs-number"> 1 </span>+<span class="hljs-number"> 3 </span>+<span class="hljs-number"> 2 </span>+<span class="hljs-number"> 1 </span>= 7<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">è¾“å…¥ï¼šcosts = <span class="hljs-string">[10,6,8,7,7,8]</span>, coins = <span class="hljs-number">5</span><br>è¾“å‡ºï¼š<span class="hljs-number">0</span><br>è§£é‡Šï¼šTony æ²¡æœ‰è¶³å¤Ÿçš„é’±ä¹°ä»»ä½•ä¸€æ”¯é›ªç³•ã€‚<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 3ï¼š</strong></p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tap">è¾“å…¥ï¼šcosts = [1,6,3,1,2,5], coins = 20<br>è¾“å‡ºï¼š6<br>è§£é‡Šï¼šTony å¯ä»¥ä¹°ä¸‹æ‰€æœ‰çš„é›ªç³•ï¼Œæ€»ä»·ä¸º<span class="hljs-number"> 1 </span>+<span class="hljs-number"> 6 </span>+<span class="hljs-number"> 3 </span>+<span class="hljs-number"> 1 </span>+<span class="hljs-number"> 2 </span>+<span class="hljs-number"> 5 </span>=<span class="hljs-number"> 18 </span>ã€‚<br></code></pre></td></tr></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li><code>costs.length == n</code></li><li><code>1 &lt;= n &lt;= 105</code></li><li><code>1 &lt;= costs[i] &lt;= 105</code></li><li><code>1 &lt;= coins &lt;= 108</code></li></ul><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><h3 id="æ–¹æ³•ä¸€ï¼šè´ªå¿ƒ"><a href="#æ–¹æ³•ä¸€ï¼šè´ªå¿ƒ" class="headerlink" title="æ–¹æ³•ä¸€ï¼šè´ªå¿ƒ"></a>æ–¹æ³•ä¸€ï¼šè´ªå¿ƒ</h3><p>ç”¨æœ‰é™çš„é’±ï¼Œä¹°åˆ°æœ€å¤šçš„é›ªç³•ã€‚</p><p>ä»æ­¤å¾ˆå®¹æ˜“å¯ä»¥æƒ³åˆ°ï¼Œå¯¹äºä»·æ ¼ä¾¿å®œçš„é›ªç³•ï¼Œè´­ä¹°ä¼˜å…ˆçº§é«˜ã€‚</p><p>å› æ­¤ï¼Œå¯¹é›ªç³•çš„ä»·æ ¼æ•°ç»„ <code>costs</code> è¿›è¡Œæ’åºã€‚</p><p>æ¯ä¸ªé›ªç³•åªèƒ½ä¹°ä¸€æ¬¡ï¼Œå› æ­¤éå† <code>costs</code> æ•°ç»„ï¼Œç”¨ <code>cnt</code> è®¡æ•°ä¹°åˆ°é›ªç³•çš„æ•°é‡ã€‚</p><p>å½“å°† <code>coins</code> èŠ±å®Œçš„æ—¶å€™ï¼Œä¾¿å¯ä»¥å¾—åˆ°å¯ä»¥è´­ä¹°çš„æœ€å¤§æ•°é‡ã€‚</p><h4 id="Python3"><a href="#Python3" class="headerlink" title="Python3"></a>Python3</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">maxIceCream</span>(<span class="hljs-params">self, costs: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], coins: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        costs.sort()<br>        cnt = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> costs:<br>            <span class="hljs-keyword">if</span> coins - c &gt;= <span class="hljs-number">0</span>:<br>                coins -= c<br>                cnt += <span class="hljs-number">1</span><br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-keyword">break</span><br>        <span class="hljs-keyword">return</span> cnt<br></code></pre></td></tr></table></figure><h4 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">maxIceCream</span><span class="hljs-params">(<span class="hljs-type">int</span>[] costs, <span class="hljs-type">int</span> coins)</span> &#123;<br>        Arrays.sort(costs);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">cnt</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> c : costs) &#123;<br>            <span class="hljs-keyword">if</span>(coins - c &gt;= <span class="hljs-number">0</span>) &#123;<br>                coins -= c;<br>                cnt++;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> cnt;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Encouragement"><a href="#Encouragement" class="headerlink" title="Encouragement"></a>Encouragement</h2><p>ç›®å‰å°±è¯»äºæ–°åŠ å¡å›½ç«‹å¤§å­¦ï¼Œè½¬ç èœé¸¡ä¸€æšã€‚</p><p>å†³å¿ƒé€šè¿‡æ—¥æ›´ä¸€ç¯‡é¢˜è§£æ¿€åŠ±è‡ªå·±åšæŒåˆ·é¢˜ï¼ŒåšæŒå­¦ä¹ ç®—æ³•ã€‚</p><p>è¿™æ˜¯æˆ‘æ­å»º<a href="https://github.com/ltyzzzxxx/Leetcode-Everyday">Leetcode-Everyday</a>ä»“åº“åå‘å¸ƒã®ç¬¬20ç¯‡é¢˜è§£ï¼Œæ¬¢è¿å„ä½starå¹¶æå‡ºIssue~</p><p>ç‚¹å‡»<a href="https://leetcode.cn/u/ltyzzz/">è¿™é‡Œ</a>ï¼Œè¿›å…¥æˆ‘çš„ä¸ªäººLeetcodeä¸»é¡µ~</p>]]></content>
    
    
    <categories>
      
      <category>Leetcodeé¢˜è§£</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LC-Solution 1790. Check if One String Swap Can Make Strings Equal</title>
    <link href="/2022/10/11/LC-Solution-1790-Check-if-One-String-Swap-Can-Make-Strings-Equal/"/>
    <url>/2022/10/11/LC-Solution-1790-Check-if-One-String-Swap-Can-Make-Strings-Equal/</url>
    
    <content type="html"><![CDATA[<h1 id="1790-ä»…æ‰§è¡Œä¸€æ¬¡å­—ç¬¦ä¸²äº¤æ¢èƒ½å¦ä½¿ä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸ç­‰"><a href="#1790-ä»…æ‰§è¡Œä¸€æ¬¡å­—ç¬¦ä¸²äº¤æ¢èƒ½å¦ä½¿ä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸ç­‰" class="headerlink" title="1790. ä»…æ‰§è¡Œä¸€æ¬¡å­—ç¬¦ä¸²äº¤æ¢èƒ½å¦ä½¿ä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸ç­‰"></a><a href="https://leetcode.cn/problems/check-if-one-string-swap-can-make-strings-equal/">1790. ä»…æ‰§è¡Œä¸€æ¬¡å­—ç¬¦ä¸²äº¤æ¢èƒ½å¦ä½¿ä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸ç­‰</a></h1><h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>ç»™ä½ é•¿åº¦ç›¸ç­‰çš„ä¸¤ä¸ªå­—ç¬¦ä¸²Â <code>s1</code>Â å’ŒÂ <code>s2</code>Â ã€‚ä¸€æ¬¡Â <strong>å­—ç¬¦ä¸²äº¤æ¢</strong>Â æ“ä½œçš„æ­¥éª¤å¦‚ä¸‹ï¼šé€‰å‡ºæŸä¸ªå­—ç¬¦ä¸²ä¸­çš„ä¸¤ä¸ªä¸‹æ ‡ï¼ˆä¸å¿…ä¸åŒï¼‰ï¼Œå¹¶äº¤æ¢è¿™ä¸¤ä¸ªä¸‹æ ‡æ‰€å¯¹åº”çš„å­—ç¬¦ã€‚</p><p>å¦‚æœå¯¹Â <strong>å…¶ä¸­ä¸€ä¸ªå­—ç¬¦ä¸²</strong>Â æ‰§è¡ŒÂ <strong>æœ€å¤šä¸€æ¬¡å­—ç¬¦ä¸²äº¤æ¢</strong>Â å°±å¯ä»¥ä½¿ä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸ç­‰ï¼Œè¿”å›Â <code>true</code>Â ï¼›å¦åˆ™ï¼Œè¿”å›Â <code>false</code>Â ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs armasm">è¾“å…¥ï¼š<span class="hljs-built_in">s1</span> = <span class="hljs-string">&quot;bank&quot;</span>, <span class="hljs-built_in">s2</span> = <span class="hljs-string">&quot;kanb&quot;</span><br>è¾“å‡ºï¼štrue<br>è§£é‡Šï¼šä¾‹å¦‚ï¼Œäº¤æ¢ <span class="hljs-built_in">s2</span> ä¸­çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå­—ç¬¦å¯ä»¥å¾—åˆ° <span class="hljs-string">&quot;bank&quot;</span><br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs armasm">è¾“å…¥ï¼š<span class="hljs-built_in">s1</span> = <span class="hljs-string">&quot;attack&quot;</span>, <span class="hljs-built_in">s2</span> = <span class="hljs-string">&quot;defend&quot;</span><br>è¾“å‡ºï¼šfalse<br>è§£é‡Šï¼šä¸€æ¬¡å­—ç¬¦ä¸²äº¤æ¢æ— æ³•ä½¿ä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸ç­‰<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 3ï¼š</strong></p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs armasm">è¾“å…¥ï¼š<span class="hljs-built_in">s1</span> = <span class="hljs-string">&quot;kelb&quot;</span>, <span class="hljs-built_in">s2</span> = <span class="hljs-string">&quot;kelb&quot;</span><br>è¾“å‡ºï¼štrue<br>è§£é‡Šï¼šä¸¤ä¸ªå­—ç¬¦ä¸²å·²ç»ç›¸ç­‰ï¼Œæ‰€ä»¥ä¸éœ€è¦è¿›è¡Œå­—ç¬¦ä¸²äº¤æ¢<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 4ï¼š</strong></p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs armasm">è¾“å…¥ï¼š<span class="hljs-built_in">s1</span> = <span class="hljs-string">&quot;abcd&quot;</span>, <span class="hljs-built_in">s2</span> = <span class="hljs-string">&quot;dcba&quot;</span><br>è¾“å‡ºï¼šfalse<br></code></pre></td></tr></table></figure><p><strong>æç¤º</strong></p><ul><li><code>1 &lt;= s1.length, s2.length &lt;= 100</code></li><li><code>s1.length == s2.length</code></li><li><code>s1</code>Â å’ŒÂ <code>s2</code>Â ä»…ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ</li></ul><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><h3 id="æ–¹æ³•ä¸€ï¼šå“ˆå¸Œè¡¨-è®¡æ•°"><a href="#æ–¹æ³•ä¸€ï¼šå“ˆå¸Œè¡¨-è®¡æ•°" class="headerlink" title="æ–¹æ³•ä¸€ï¼šå“ˆå¸Œè¡¨ + è®¡æ•°"></a>æ–¹æ³•ä¸€ï¼šå“ˆå¸Œè¡¨ + è®¡æ•°</h3><p>æ€è·¯ï¼š</p><ul><li><p>å…ˆç”¨å“ˆå¸Œè¡¨ç»Ÿè®¡å­—ç¬¦ä¸² <code>s1</code> ä¸ <code>s2</code> çš„è¯é¢‘ï¼Œåªæœ‰è¯é¢‘ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œæ‰å¯èƒ½æ»¡è¶³é¢˜ç›®è¦æ±‚çš„äº¤æ¢ä¸€æ¬¡ä¾¿å¾—åˆ°ç›¸åŒå­—ç¬¦ä¸²ã€‚</p></li><li><p>è®¡æ•°ï¼šéå†ï¼Œå¯¹ä¸¤ä¸ªå­—ç¬¦ä¸²é€ä¸ªåˆ¤æ–­ï¼Œå¾—åˆ°ä¸åŒå­—ç¬¦æ•°é‡ <code>cnt</code> ã€‚</p><ul><li>è‹¥ <code>s1[i] != s2[i]</code>ï¼Œ<code>cnt += 1</code></li></ul></li><li><p>æœ€ç»ˆï¼Œå½“ <code>cnt == 0</code> æˆ– <code>cnt == 2</code>ï¼Œåˆ†åˆ«å¯¹åº”ç€äº¤æ¢æ¬¡æ•°ä¸º0å’Œäº¤æ¢æ¬¡æ•°ä¸º1çš„æƒ…å†µã€‚ï¼ˆå‰ææ˜¯ä¸¤å­—ç¬¦ä¸²è¯é¢‘ç›¸åŒï¼‰</p></li></ul><p>è¯¥æ–¹æ³•ç¼ºç‚¹åœ¨äºç©ºé—´å¤æ‚åº¦ä¸ºO(n)</p><h4 id="Python3"><a href="#Python3" class="headerlink" title="Python3"></a>Python3</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">areAlmostEqual</span>(<span class="hljs-params">self, s1: <span class="hljs-built_in">str</span>, s2: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">bool</span>:<br>        dic1, dic2 = Counter(s1), Counter(s2)<br>        cnt = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(s1)):<br>            <span class="hljs-keyword">if</span> s1[i] != s2[i]:<br>                cnt += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> (cnt == <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> cnt == <span class="hljs-number">2</span>) <span class="hljs-keyword">and</span> dic1 == dic2<br></code></pre></td></tr></table></figure><h4 id="java"><a href="#java" class="headerlink" title="java"></a>java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">areAlmostEqual</span><span class="hljs-params">(String s1, String s2)</span> &#123;<br>        <span class="hljs-type">char</span>[] cs1 = s1.toCharArray(), cs2 = s2.toCharArray();<br>        Map&lt;Character, Integer&gt; map1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;(), map2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">cnt</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; cs1.length; i++) &#123;<br>            map1.put(cs1[i], map1.getOrDefault(cs1[i], <span class="hljs-number">0</span>) + <span class="hljs-number">1</span>);<br>            map2.put(cs2[i], map2.getOrDefault(cs2[i], <span class="hljs-number">0</span>) + <span class="hljs-number">1</span>);<br>            <span class="hljs-keyword">if</span>(cs1[i] != cs2[i]) cnt++;<br>        &#125;<br>        <span class="hljs-keyword">return</span> (cnt == <span class="hljs-number">0</span> || cnt == <span class="hljs-number">2</span>) &amp;&amp; map1.equals(map2);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ–¹æ³•äºŒï¼šçº¯è®¡æ•°"><a href="#æ–¹æ³•äºŒï¼šçº¯è®¡æ•°" class="headerlink" title="æ–¹æ³•äºŒï¼šçº¯è®¡æ•°"></a>æ–¹æ³•äºŒï¼šçº¯è®¡æ•°</h3><p>æ€è·¯ï¼š</p><p>ä»ç„¶æ˜¯åŒæ—¶éå†ä¸¤å­—ç¬¦ä¸² <code>s1</code> ä¸ <code>s2</code>ï¼Œç”¨ <code>cnt</code> ç»Ÿè®¡ç›¸åŒä¸‹æ ‡ä¸åŒå­—ç¬¦çš„æ•°é‡ã€‚</p><p>ä½†ä¸é‡‡ç”¨å“ˆå¸Œè¡¨ç»Ÿè®¡è¯é¢‘ï¼Œè€Œæ˜¯ç”¨ä¸¤ä¸ªå˜é‡ <code>c1</code> ä¸ <code>c2</code> è®°å½•ä¸Šä¸€æ¬¡ç›¸åŒä¸‹æ ‡çš„æƒ…å†µä¸‹ <code>s1</code> ä¸ <code>s2</code> ä¸ç›¸åŒçš„å­—ç¬¦ã€‚</p><p>è‹¥ <code>cnt == 2</code>æ—¶ï¼Œå½“å‰ <code>s1[i] != c2</code> æˆ– <code>s2[i] != c1</code>ï¼Œæ­¤æ—¶å¯èƒ½å‡ºç°å¦‚ä¸‹æƒ…å†µ</p><ul><li><p><code>bank</code> ä¸ <code>canb</code>ï¼Œéšå«çš„æ„æ€å°±æ˜¯ä¸¤å­—ç¬¦ä¸²è¯é¢‘ä¸åŒï¼Œåªä¸è¿‡è¿™ä¸ªæ–¹æ³•å’±ä»¬æ²¡æœ‰ç”¨å“ˆå¸Œè¡¨è¿›è¡Œç»Ÿè®¡ã€‚</p><p>å› ä¸ºé¢˜ç›®ä¸­è¯´åªå¯äº¤æ¢ä¸€æ¬¡ï¼Œæ‰€ä»¥åªéœ€åˆ¤æ–­ <code>cnt == 2</code> è¿™ç§æƒ…å†µä¸‹è¯é¢‘æ˜¯å¦ç›¸åŒã€‚</p></li></ul><p>æœ€ç»ˆéå†å®Œæˆä¹‹åï¼Œè¿˜éœ€è¦åˆ¤æ–­ cnt æ˜¯å¦ç­‰äº 1ï¼Œé˜²æ­¢å‡ºç°å¦‚ä¸‹æƒ…å†µ</p><ul><li><code>bank</code> ä¸ <code>cank</code>ï¼Œåªæœ‰ä¸€ä¸ªä¸‹æ ‡çš„å­—ç¬¦ä¸ç›¸åŒï¼Œéšå«æ„æ€æ˜¯è¯é¢‘ä¸ç›¸åŒï¼Œæ— æ³•äº¤æ¢ã€‚</li></ul><h4 id="Python3-1"><a href="#Python3-1" class="headerlink" title="Python3"></a>Python3</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">areAlmostEqual</span>(<span class="hljs-params">self, s1: <span class="hljs-built_in">str</span>, s2: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">bool</span>:<br>        cnt = <span class="hljs-number">0</span><br>        c1, c2 = <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(s1)):<br>            <span class="hljs-keyword">if</span> s1[i] != s2[i]:<br>                cnt += <span class="hljs-number">1</span><br>                <span class="hljs-keyword">if</span> cnt &gt; <span class="hljs-number">2</span> <span class="hljs-keyword">or</span> (cnt == <span class="hljs-number">2</span> <span class="hljs-keyword">and</span> (s1[i] != c2 <span class="hljs-keyword">or</span> s2[i] != c1)):<br>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>                c1, c2 = s1[i], s2[i]<br>        <span class="hljs-keyword">return</span> cnt != <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h4 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">areAlmostEqual</span><span class="hljs-params">(String s1, String s2)</span> &#123;<br>        <span class="hljs-type">char</span>[] cs1 = s1.toCharArray(), cs2 = s2.toCharArray();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">cnt</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">char</span> <span class="hljs-variable">c1</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, c2 = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; cs1.length; i++) &#123;<br>            <span class="hljs-keyword">if</span>(cs1[i] != cs2[i]) &#123;<br>                <span class="hljs-keyword">if</span>(++cnt &gt; <span class="hljs-number">2</span> || (cnt == <span class="hljs-number">2</span> &amp;&amp; (cs1[i] != c2 || cs2[i] != c1))) &#123;<br>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>                &#125;<br>                c1 = cs1[i];<br>                c2 = cs2[i];<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> cnt != <span class="hljs-number">1</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Encouragement"><a href="#Encouragement" class="headerlink" title="Encouragement"></a>Encouragement</h2><p>ç›®å‰å°±è¯»äºæ–°åŠ å¡å›½ç«‹å¤§å­¦ï¼Œè½¬ç èœé¸¡ä¸€æšã€‚</p><p>å†³å¿ƒé€šè¿‡æ—¥æ›´ä¸€ç¯‡é¢˜è§£æ¿€åŠ±è‡ªå·±åšæŒåˆ·é¢˜ï¼ŒåšæŒå­¦ä¹ ç®—æ³•ã€‚</p><p>è¿™æ˜¯æˆ‘æ­å»º<a href="https://github.com/ltyzzzxxx/Leetcode-Everyday">Leetcode-Everyday</a>ä»“åº“åå‘å¸ƒã®ç¬¬19ç¯‡é¢˜è§£ï¼Œæ¬¢è¿å„ä½starå¹¶æå‡ºIssue~</p><p>ç‚¹å‡»<a href="https://leetcode.cn/u/ltyzzz/">è¿™é‡Œ</a>ï¼Œè¿›å…¥æˆ‘çš„ä¸ªäººLeetcodeä¸»é¡µ~</p>]]></content>
    
    
    <categories>
      
      <category>Leetcodeé¢˜è§£</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LC-Solution 1249. Minimum Remove to Make Valid Parentheses</title>
    <link href="/2022/10/09/LC-Solution-1249-Minimum-Remove-to-Make-Valid-Parentheses/"/>
    <url>/2022/10/09/LC-Solution-1249-Minimum-Remove-to-Make-Valid-Parentheses/</url>
    
    <content type="html"><![CDATA[<h1 id="1249-ç§»é™¤æ— æ•ˆçš„æ‹¬å·"><a href="#1249-ç§»é™¤æ— æ•ˆçš„æ‹¬å·" class="headerlink" title="1249. ç§»é™¤æ— æ•ˆçš„æ‹¬å·"></a><a href="https://leetcode.cn/problems/minimum-remove-to-make-valid-parentheses/">1249. ç§»é™¤æ— æ•ˆçš„æ‹¬å·</a></h1><h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>ç»™ä½ ä¸€ä¸ªç”±Â <code>&#39;(&#39;</code>ã€<code>&#39;)&#39;</code>Â å’Œå°å†™å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²Â <code>s</code>ã€‚</p><p>ä½ éœ€è¦ä»å­—ç¬¦ä¸²ä¸­åˆ é™¤æœ€å°‘æ•°ç›®çš„Â <code>&#39;(&#39;</code>Â æˆ–è€…Â <code>&#39;)&#39;</code>Â ï¼ˆå¯ä»¥åˆ é™¤ä»»æ„ä½ç½®çš„æ‹¬å·)ï¼Œä½¿å¾—å‰©ä¸‹çš„ã€Œæ‹¬å·å­—ç¬¦ä¸²ã€æœ‰æ•ˆã€‚</p><p>è¯·è¿”å›ä»»æ„ä¸€ä¸ªåˆæ³•å­—ç¬¦ä¸²ã€‚</p><p>æœ‰æ•ˆã€Œæ‹¬å·å­—ç¬¦ä¸²ã€åº”å½“ç¬¦åˆä»¥ä¸‹Â <strong>ä»»æ„ä¸€æ¡</strong>Â è¦æ±‚ï¼š</p><ul><li>ç©ºå­—ç¬¦ä¸²æˆ–åªåŒ…å«å°å†™å­—æ¯çš„å­—ç¬¦ä¸²</li><li>å¯ä»¥è¢«å†™ä½œÂ <code>AB</code>ï¼ˆ<code>A</code>Â è¿æ¥Â <code>B</code>ï¼‰çš„å­—ç¬¦ä¸²ï¼Œå…¶ä¸­Â <code>A</code>Â å’ŒÂ <code>B</code>Â éƒ½æ˜¯æœ‰æ•ˆã€Œæ‹¬å·å­—ç¬¦ä¸²ã€</li><li>å¯ä»¥è¢«å†™ä½œÂ <code>(A)</code>Â çš„å­—ç¬¦ä¸²ï¼Œå…¶ä¸­Â <code>A</code>Â æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ã€Œæ‹¬å·å­—ç¬¦ä¸²ã€</li></ul><p><strong>ç¤ºä¾‹1ï¼š</strong></p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">s</span> = <span class="hljs-string">&quot;lee(t(c)o)de)&quot;</span><br>è¾“å‡ºï¼š<span class="hljs-string">&quot;lee(t(c)o)de&quot;</span><br>è§£é‡Šï¼š<span class="hljs-string">&quot;lee(t(co)de)&quot;</span> , <span class="hljs-string">&quot;lee(t(c)ode)&quot;</span> ä¹Ÿæ˜¯ä¸€ä¸ªå¯è¡Œç­”æ¡ˆã€‚<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹2ï¼š</strong></p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs abnf">è¾“å…¥ï¼šs <span class="hljs-operator">=</span> <span class="hljs-string">&quot;a)b(c)d&quot;</span><br>è¾“å‡ºï¼š<span class="hljs-string">&quot;ab(c)d&quot;</span><br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹3ï¼š</strong></p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf">è¾“å…¥ï¼šs <span class="hljs-operator">=</span> <span class="hljs-string">&quot;))((&quot;</span><br>è¾“å‡ºï¼š<span class="hljs-string">&quot;&quot;</span><br>è§£é‡Šï¼šç©ºå­—ç¬¦ä¸²ä¹Ÿæ˜¯æœ‰æ•ˆçš„<br></code></pre></td></tr></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li><code>1 &lt;= s.length &lt;= 105</code></li><li><code>s[i]</code>Â å¯èƒ½æ˜¯Â <code>&#39;(&#39;</code>ã€<code>&#39;)&#39;</code>Â æˆ–è‹±æ–‡å°å†™å­—æ¯</li></ul><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><h3 id="æ–¹æ³•ä¸€ï¼šæ ˆ"><a href="#æ–¹æ³•ä¸€ï¼šæ ˆ" class="headerlink" title="æ–¹æ³•ä¸€ï¼šæ ˆ"></a>æ–¹æ³•ä¸€ï¼šæ ˆ</h3><p>ä¸€çœ‹åˆ°åˆæ³•æ‹¬å·é¢˜ï¼Œç¬¬ä¸€ååº”é¦–å…ˆæƒ³åˆ°ç”¨æ ˆè§£å†³ã€‚</p><p>é¢˜ç›®è¦æ±‚åˆ æ‰å­—ç¬¦ä¸² <code>s</code> ä¸­çš„æ— æ•ˆæ‹¬å·ï¼Œä½¿å¾—å‰©ä½™çš„æ‰€æœ‰æ‹¬å·æ„æˆæœ‰æ•ˆæ‹¬å·ï¼Œè¦æ±‚åˆ é™¤æ¬¡æ•°å°½å¯èƒ½çš„å°‘ã€‚</p><p>ç®€å•ç›´æ¥åœ°ç†è§£é¢˜ç›®ï¼šå¯¹ <code>s</code> åšå‡æ³•ï¼Œåˆ é™¤å·¦å³æ‹¬å·ä¸­æ•°é‡è¾ƒå¤šçš„ä¸€æ–¹ä»¥è¾¾æˆæœ‰æ•ˆæ‹¬å·</p><p>ä½†æ˜¯åº”æ€è€ƒå¦‚ä½•å°½å¯èƒ½åœ°ä¼˜é›…ä¸”ç®€å•åœ°ä»å­—ç¬¦ä¸²ä¸­åˆ é™¤å¯¹åº”çš„å­—ç¬¦</p><p>å¦‚æœç›´æ¥å¯¹å­—ç¬¦ä¸²åŠ¨æ‰‹è„šï¼Œä¸‹æ ‡ä¼šäº§ç”Ÿå˜åŒ–ã€‚</p><p><strong>æ€è·¯è½¬åŒ–ï¼š</strong></p><p>é€‰æ‹©å°†å­—ç¬¦ä¸² <code>s</code> è½¬ä¸ºæ•°ç»„ï¼Œå°†éœ€è¦åˆ é™¤çš„æ‹¬å·ç½®ä¸ºç©ºå³ä»£è¡¨åˆ é™¤ã€‚</p><p>æ ˆç”¨äºå­˜å‚¨ <code>&#39;(&#39;</code> çš„ä¸‹æ ‡ï¼Œä¾¿äºé€šè¿‡ä¸‹æ ‡å¯¹å­—ç¬¦ä¸²æ•°ç»„è¿›è¡Œæ“ä½œã€‚</p><h4 id="Python3"><a href="#Python3" class="headerlink" title="Python3"></a>Python3</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">minRemoveToMakeValid</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:<br>        stack, s = [], <span class="hljs-built_in">list</span>(s)<br>        <span class="hljs-keyword">for</span> i, x <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(s):<br>            <span class="hljs-keyword">if</span> x == <span class="hljs-string">&#x27;(&#x27;</span>:<br>                stack.append(i)<br>            <span class="hljs-keyword">elif</span> x == <span class="hljs-string">&#x27;)&#x27;</span>:<br>                <span class="hljs-keyword">if</span> stack:<br>                    stack.pop()<br>                <span class="hljs-keyword">else</span>:<br>                    <span class="hljs-comment"># æ­¤æ—¶æ²¡æœ‰&#x27;(&#x27;ä¸&#x27;)&#x27;é…å¯¹ï¼Œåˆ é™¤</span><br>                    s[i] = <span class="hljs-string">&#x27;&#x27;</span><br>        <span class="hljs-comment"># æ ˆä¸­å‰©ä½™çš„å‡ä¸º&#x27;(&#x27;</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> stack:<br>            <span class="hljs-comment"># æ­¤æ—¶æ²¡æœ‰&#x27;)&#x27;ä¸&#x27;(&#x27;é…å¯¹ï¼Œåˆ é™¤</span><br>            s[i] = <span class="hljs-string">&#x27;&#x27;</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&#x27;</span>.join(s)<br></code></pre></td></tr></table></figure><h4 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h4><p>Javaæ— æ³•ç›´æ¥å¯¹å­—ç¬¦èµ‹ç©ºå€¼ï¼Œå…ˆå¡«ä¸€ä¸ªå ä½å­—ç¬¦ï¼Œä¹‹ååˆ©ç”¨replaceæ–¹æ³•å°†å…¶æ›¿æ¢ä¸ºç©ºã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">minRemoveToMakeValid</span><span class="hljs-params">(String s)</span> &#123;<br>        <span class="hljs-type">char</span>[] cs = s.toCharArray();<br>        Deque&lt;Integer&gt; stack = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayDeque</span>&lt;&gt;();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; cs.length; i++) &#123;<br>            <span class="hljs-keyword">if</span>(cs[i] == <span class="hljs-string">&#x27;(&#x27;</span>) stack.addLast(i);<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(cs[i] == <span class="hljs-string">&#x27;)&#x27;</span>) &#123;<br>                <span class="hljs-keyword">if</span>(!stack.isEmpty()) stack.pollLast();<br>                <span class="hljs-keyword">else</span> cs[i] = <span class="hljs-string">&#x27;.&#x27;</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i : stack) cs[i] = <span class="hljs-string">&#x27;.&#x27;</span>;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(cs).replace(<span class="hljs-string">&quot;.&quot;</span>, <span class="hljs-string">&quot;&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Encouragement"><a href="#Encouragement" class="headerlink" title="Encouragement"></a>Encouragement</h2><p>ç›®å‰å°±è¯»äºæ–°åŠ å¡å›½ç«‹å¤§å­¦ï¼Œè½¬ç èœé¸¡ä¸€æšã€‚</p><p>å†³å¿ƒé€šè¿‡æ—¥æ›´ä¸€ç¯‡é¢˜è§£æ¿€åŠ±è‡ªå·±åšæŒåˆ·é¢˜ï¼ŒåšæŒå­¦ä¹ ç®—æ³•ã€‚</p><p>è¿™æ˜¯æˆ‘æ­å»º<a href="https://github.com/ltyzzzxxx/Leetcode-Everyday">Leetcode-Everyday</a>ä»“åº“åå‘å¸ƒã®ç¬¬18ç¯‡é¢˜è§£ï¼Œæ¬¢è¿å„ä½starå¹¶æå‡ºIssue~</p><p>ç‚¹å‡»<a href="https://leetcode.cn/u/ltyzzz/">è¿™é‡Œ</a>ï¼Œè¿›å…¥æˆ‘çš„ä¸ªäººLeetcodeä¸»é¡µ~</p>]]></content>
    
    
    <categories>
      
      <category>Leetcodeé¢˜è§£</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LC-Solution 678. Valid Parenthesis String</title>
    <link href="/2022/10/09/LC-Solution-678-Valid-Parenthesis-String/"/>
    <url>/2022/10/09/LC-Solution-678-Valid-Parenthesis-String/</url>
    
    <content type="html"><![CDATA[<h1 id="678-æœ‰æ•ˆçš„æ‹¬å·å­—ç¬¦ä¸²"><a href="#678-æœ‰æ•ˆçš„æ‹¬å·å­—ç¬¦ä¸²" class="headerlink" title="678. æœ‰æ•ˆçš„æ‹¬å·å­—ç¬¦ä¸²"></a><a href="https://leetcode.cn/problems/valid-parenthesis-string/">678. æœ‰æ•ˆçš„æ‹¬å·å­—ç¬¦ä¸²</a></h1><h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>ç»™å®šä¸€ä¸ªåªåŒ…å«ä¸‰ç§å­—ç¬¦çš„å­—ç¬¦ä¸²ï¼š<code>ï¼ˆ</code>Â ï¼Œ<code>ï¼‰</code>Â å’ŒÂ <code>*</code>ï¼Œå†™ä¸€ä¸ªå‡½æ•°æ¥æ£€éªŒè¿™ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ä¸ºæœ‰æ•ˆå­—ç¬¦ä¸²ã€‚æœ‰æ•ˆå­—ç¬¦ä¸²å…·æœ‰å¦‚ä¸‹è§„åˆ™ï¼š</p><ol><li>ä»»ä½•å·¦æ‹¬å·Â <code>(</code>Â å¿…é¡»æœ‰ç›¸åº”çš„å³æ‹¬å·Â <code>)</code>ã€‚</li><li>ä»»ä½•å³æ‹¬å·Â <code>)</code>Â å¿…é¡»æœ‰ç›¸åº”çš„å·¦æ‹¬å·Â <code>(</code>Â ã€‚</li><li>å·¦æ‹¬å·Â <code>(</code>Â å¿…é¡»åœ¨å¯¹åº”çš„å³æ‹¬å·ä¹‹å‰Â <code>)</code>ã€‚</li><li><code>*</code>Â å¯ä»¥è¢«è§†ä¸ºå•ä¸ªå³æ‹¬å·Â <code>)</code>Â ï¼Œæˆ–å•ä¸ªå·¦æ‹¬å·Â <code>(</code>Â ï¼Œæˆ–ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚</li><li>ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ä¹Ÿè¢«è§†ä¸ºæœ‰æ•ˆå­—ç¬¦ä¸²ã€‚</li></ol><p><strong>ç¤ºä¾‹1ï¼š</strong></p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ada">è¾“å…¥: <span class="hljs-string">&quot;()&quot;</span><br>è¾“å‡º: <span class="hljs-literal">True</span><br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹2ï¼š</strong></p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ada">è¾“å…¥: <span class="hljs-string">&quot;(*)&quot;</span><br>è¾“å‡º: <span class="hljs-literal">True</span><br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹3ï¼š</strong></p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ada">è¾“å…¥: <span class="hljs-string">&quot;(*))&quot;</span><br>è¾“å‡º: <span class="hljs-literal">True</span><br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„:</strong></p><ol><li>å­—ç¬¦ä¸²å¤§å°å°†åœ¨ [1ï¼Œ100] èŒƒå›´å†…ã€‚</li></ol><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><h3 id="æ–¹æ³•ä¸€ï¼šåŒæ ˆ"><a href="#æ–¹æ³•ä¸€ï¼šåŒæ ˆ" class="headerlink" title="æ–¹æ³•ä¸€ï¼šåŒæ ˆ"></a>æ–¹æ³•ä¸€ï¼šåŒæ ˆ</h3><p>é‡åˆ°æ‹¬å·é¢˜ï¼Œç¬¬ä¸€ååº”ä¾¿æ˜¯æ ˆã€‚å› ä¸ºæ ˆçš„å…ˆè¿›åå‡ºçš„ç‰¹æ€§ä¸æ‹¬å·ä¹‹é—´åµŒå¥—çš„ç‰¹æ€§ç›¸ä¸€è‡´ã€‚</p><p>æ ˆå†…æ€»æ˜¯å­˜å‚¨å·¦æ‹¬å· <code>&#39;(&#39;</code>ï¼Œé€šè¿‡å³æ‹¬å· <code>&#39;)&#39;</code> ä¸å·¦æ‹¬å· <code>&#39;(&#39;</code> é…å¯¹ï¼Œä½¿å·¦æ‹¬å·å‡ºæ ˆã€‚</p><p>æœ¬é¢˜æ€è·¯ï¼š</p><p><code>&#39;*&#39;</code> å¯ä»¥è¡¨ç¤ºä¸‰ç§å­—ç¬¦ï¼š<code>&#39;&#39;</code> ã€ <code>&#39;(&#39;</code> ã€<code>&#39;)&#39;</code>ï¼Œä¼˜å…ˆå°† <code>&#39;*&#39;</code> å½“ä½œå·¦æ‹¬å·ä½¿ç”¨ã€‚</p><p>å› æ­¤ä½¿ç”¨ä¸¤ä¸ªæ ˆåˆ†åˆ«å­˜å‚¨ <code>&#39;*&#39;</code> ä¸ <code>&#39;(&#39;</code> å¯¹åº”äº <code>s</code> çš„ä¸‹æ ‡ã€‚</p><ul><li><p>å­˜å‚¨ä¸‹æ ‡çš„æ„ä¹‰åœ¨äºï¼šç”±äºæˆ‘ä»¬æ˜¯ä¼˜å…ˆå°† <code>&#39;*&#39;</code> å½“ä½œå·¦æ‹¬å·ä½¿ç”¨ï¼Œå½“å³æ‹¬å· <code>&#39;)&#39;</code> å…¨éƒ¨æ¶ˆè€—å®Œã€‚è¿™æ—¶å€™å¤šä½™çš„ <code>&#39;*&#39;</code> å°†è¦ä½œä¸ºå³æ‹¬å· <code>&#39;)&#39;</code> ä¸å‰©ä½™çš„ <code>&#39;(&#39;</code> è¿›è¡Œé…å¯¹ã€‚å³æ‹¬å·å¿…é¡»åœ¨å·¦æ‹¬å·ä¹‹åã€‚å› æ­¤å­˜å‚¨ä¸‹æ ‡å¯ä»¥å¸®åŠ©æˆ‘ä»¬åˆ¤æ–­ <code>&#39;*&#39;</code> ä¸ <code>&#39;(&#39;</code> çš„å…ˆåé¡ºåºæ˜¯å¦ç¬¦åˆåˆæ³•æ‹¬å·çš„è¦æ±‚ã€‚</p><p><code>&#39;(&#39;</code> ä½¿ç”¨ä¼˜å…ˆçº§ <strong>å¤§äº</strong> <code>&#39;*&#39;</code></p></li></ul><ol><li>éå†å­—ç¬¦ä¸² <code>s</code> ï¼š</li></ol><p>  . è‹¥ <code>s[i] == &#39;(&#39;</code>ï¼Œ å°†å…¶æ·»åŠ åˆ° <code>&#39;(&#39;</code> æ ˆä¸­</p><p>  . è‹¥ <code>s[i] == &#39;*&#39;</code>ï¼Œ å°†å…¶æ·»åŠ åˆ° <code>&#39;*&#39;</code> æ ˆä¸­</p><p>  . è‹¥ <code>s[i] == &#39;*&#39;</code>ï¼š</p><p>  . <code>&#39;(&#39;</code> æ ˆ æˆ– <code>&#39;*&#39;</code> æ ˆä¸ä¸ºç©ºæ—¶ï¼Œä¼˜å…ˆä½¿ç”¨ <code>&#39;(&#39;</code> æ ˆè¿›è¡Œå‡ºæ ˆ</p><p>  . å¦åˆ™ï¼Œæ²¡æœ‰å­—ç¬¦ä¸ <code>&#39;(&#39;</code> è¿›è¡Œé…å¯¹ï¼Œè¿”å› <code>False</code></p><ol start="2"><li>éå† <code>&#39;(&#39;</code> ä¸ <code>&#39;*&#39;</code> æ ˆï¼Œå°† <code>&#39;*&#39;</code> å½“ä½œ <code>&#39;)&#39;</code> ä¸ å‰©ä½™ <code>&#39;(&#39;</code> è¿›è¡ŒåŒ¹é…</li></ol><p>  . è‹¥å¼¹å‡ºçš„ <code>&#39;*&#39;</code> ä¸‹æ ‡ <strong>å°äº</strong> å¼¹å‡ºçš„ <code>&#39;(&#39;</code>ï¼Œ è¿”å›False</p><ol start="3"><li>æœ€ç»ˆåˆ¤æ–­æ˜¯å¦ä»ç„¶æœ‰å‰©ä½™çš„ <code>&#39;(&#39;</code></li></ol><p>  . è‹¥ä»ç„¶æœ‰ï¼Œè¿”å›Falseï¼›å¦åˆ™ï¼Œè¿”å›True</p><h4 id="Python3"><a href="#Python3" class="headerlink" title="Python3"></a>Python3</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">checkValidString</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">bool</span>:<br>        stack1, stack2 = [], []<br>        <span class="hljs-keyword">for</span> i, x <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(s):<br>            <span class="hljs-keyword">if</span> x == <span class="hljs-string">&#x27;(&#x27;</span>:<br>                stack1.append(i)<br>            <span class="hljs-keyword">if</span> x == <span class="hljs-string">&#x27;*&#x27;</span>:<br>                stack2.append(i)<br>            <span class="hljs-keyword">if</span> x == <span class="hljs-string">&#x27;)&#x27;</span>:<br>                <span class="hljs-keyword">if</span> stack1:<br>                    stack1.pop()<br>                <span class="hljs-keyword">elif</span> stack2:<br>                    stack2.pop()<br>                <span class="hljs-keyword">else</span>:<br>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>        <span class="hljs-keyword">while</span> stack1 <span class="hljs-keyword">and</span> stack2:<br>            idx1, idx2 = stack1.pop(), stack2.pop()<br>            <span class="hljs-keyword">if</span> idx1 &gt; idx2:<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">not</span> stack1<br></code></pre></td></tr></table></figure><h4 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">checkValidString</span><span class="hljs-params">(String s)</span> &#123;<br>        Deque&lt;Integer&gt; stack1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayDeque</span>&lt;&gt;();<br>        Deque&lt;Integer&gt; stack2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayDeque</span>&lt;&gt;();<br>        <span class="hljs-type">char</span>[] cs = s.toCharArray();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; cs.length; i++) &#123;<br>            <span class="hljs-keyword">if</span>(cs[i] == <span class="hljs-string">&#x27;(&#x27;</span>) stack1.addLast(i);<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(cs[i] == <span class="hljs-string">&#x27;*&#x27;</span>) stack2.addLast(i);<br>            <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-keyword">if</span>(!stack1.isEmpty()) stack1.pollLast();<br>                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(!stack2.isEmpty()) stack2.pollLast();<br>                <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">while</span>(!stack1.isEmpty() &amp;&amp; !stack2.isEmpty()) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">idx1</span> <span class="hljs-operator">=</span> stack1.pollLast(), idx2 = stack2.pollLast();<br>            <span class="hljs-keyword">if</span>(idx1 &gt; idx2) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> stack1.isEmpty();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Encouragement"><a href="#Encouragement" class="headerlink" title="Encouragement"></a>Encouragement</h2><p>ç›®å‰å°±è¯»äºæ–°åŠ å¡å›½ç«‹å¤§å­¦ï¼Œè½¬ç èœé¸¡ä¸€æšã€‚</p><p>å†³å¿ƒé€šè¿‡æ—¥æ›´ä¸€ç¯‡é¢˜è§£æ¿€åŠ±è‡ªå·±åšæŒåˆ·é¢˜ï¼ŒåšæŒå­¦ä¹ ç®—æ³•ã€‚</p><p>è¿™æ˜¯æˆ‘æ­å»º<a href="https://github.com/ltyzzzxxx/Leetcode-Everyday">Leetcode-Everyday</a>ä»“åº“åå‘å¸ƒã®ç¬¬17ç¯‡é¢˜è§£ï¼Œæ¬¢è¿å„ä½starå¹¶æå‡ºIssue~</p><p>ç‚¹å‡»<a href="https://leetcode.cn/u/ltyzzz/">è¿™é‡Œ</a>ï¼Œè¿›å…¥æˆ‘çš„ä¸ªäººLeetcodeä¸»é¡µ~</p>]]></content>
    
    
    <categories>
      
      <category>Leetcodeé¢˜è§£</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LC-Solution 856. Score of Parentheses</title>
    <link href="/2022/10/09/LC-Solution-856-Score-of-Parentheses/"/>
    <url>/2022/10/09/LC-Solution-856-Score-of-Parentheses/</url>
    
    <content type="html"><![CDATA[<h1 id="856-Score-of-Parentheses"><a href="#856-Score-of-Parentheses" class="headerlink" title="856. Score of Parentheses"></a><a href="https://leetcode.cn/problems/score-of-parentheses/">856. Score of Parentheses</a></h1><h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>ç»™å®šä¸€ä¸ªå¹³è¡¡æ‹¬å·å­—ç¬¦ä¸²Â <code>S</code>ï¼ŒæŒ‰ä¸‹è¿°è§„åˆ™è®¡ç®—è¯¥å­—ç¬¦ä¸²çš„åˆ†æ•°ï¼š</p><ul><li><code>()</code>Â å¾— 1 åˆ†ã€‚</li><li><code>AB</code>Â å¾—Â <code>A + B</code>Â åˆ†ï¼Œå…¶ä¸­ A å’Œ B æ˜¯å¹³è¡¡æ‹¬å·å­—ç¬¦ä¸²ã€‚</li><li><code>(A)</code>Â å¾—Â <code>2 * A</code>Â åˆ†ï¼Œå…¶ä¸­ A æ˜¯å¹³è¡¡æ‹¬å·å­—ç¬¦ä¸²ã€‚</li></ul><p><strong>ç¤ºä¾‹1ï¼š</strong></p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs 1c">è¾“å…¥ï¼š <span class="hljs-string">&quot;()&quot;</span><br>è¾“å‡ºï¼š <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹2ï¼š</strong></p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs 1c">è¾“å…¥ï¼š <span class="hljs-string">&quot;(())&quot;</span><br>è¾“å‡ºï¼š <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹3ï¼š</strong></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs scss">è¾“å…¥ï¼š &quot;()()&quot;<br>è¾“å‡ºï¼š <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹4ï¼š</strong></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs scss">è¾“å…¥ï¼š &quot;(()(()))&quot;<br>è¾“å‡ºï¼š <span class="hljs-number">6</span><br></code></pre></td></tr></table></figure><p><strong>æç¤ºï¼š</strong></p><ol><li><code>S</code>Â æ˜¯å¹³è¡¡æ‹¬å·å­—ç¬¦ä¸²ï¼Œä¸”åªå«æœ‰Â <code>(</code>Â å’ŒÂ <code>)</code>Â ã€‚</li><li><code>2 &lt;= S.length &lt;= 50</code></li></ol><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><h3 id="æ–¹æ³•ä¸€ï¼šæ ¹æ®-è®¡æ•°"><a href="#æ–¹æ³•ä¸€ï¼šæ ¹æ®-è®¡æ•°" class="headerlink" title="æ–¹æ³•ä¸€ï¼šæ ¹æ®()è®¡æ•°"></a>æ–¹æ³•ä¸€ï¼šæ ¹æ®()è®¡æ•°</h3><p>åˆ†æé¢˜æ„å¯çŸ¥ï¼Œå¤–å±‚æ‹¬å·æ‰€ç´¯åŠ çš„åˆ†æ•°éƒ½ä¸æœ€é‡Œæ‹¬å· <code>&#39;()&#39;</code> æœ‰å…³ã€‚</p><ul><li><p>å‡è®¾å½“å‰æ‹¬å·æ·±åº¦ä¸º <code>d</code>ï¼Œæ¯ä¸€ä¸ª <code>&#39;()&#39;</code> çš„å¾—åˆ†ä¸º <code>2 ** d</code> æˆ–è€… <code>1 &lt;&lt; d</code></p></li><li><p>æœ€åçš„æ€»åˆ†æ•°ä¸ <code>&#39;()&#39;</code> çš„æ•°é‡æœ‰å…³ã€‚</p></li></ul><p>ä¸¾ä¾‹è¯´æ˜ï¼š<code>&#39;(()(()))&#39;</code>ï¼Œåˆ©ç”¨ä¹˜æ³•åˆ†é…å¾‹å¯è¡¨ç¤ºä¸º <code>&#39;(()) + ((()))&#39;</code></p><p>å…±æœ‰ä¸¤ä¸ª <code>&#39;()&#39;</code>ï¼Œå…¶åˆ†æ•°ä¸º <code>2 ** 1 + 2 ** 2 = 6</code></p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬åªéœ€è¦æ‰¾åˆ° <code>s</code> ä¸­çš„æ¯ä¸€ä¸ª <code>&#39;()&#39;</code> å³å¯</p><h4 id="Python3"><a href="#Python3" class="headerlink" title="Python3"></a>Python3</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">scoreOfParentheses</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        ans, d = <span class="hljs-number">0</span>, <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> i, v <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(s):<br>            d += <span class="hljs-number">1</span> <span class="hljs-keyword">if</span> v == <span class="hljs-string">&#x27;(&#x27;</span> <span class="hljs-keyword">else</span> -<span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span> v == <span class="hljs-string">&#x27;)&#x27;</span> <span class="hljs-keyword">and</span> s[i - <span class="hljs-number">1</span>] ==<span class="hljs-string">&#x27;(&#x27;</span>:<br>                ans += <span class="hljs-number">1</span> &lt;&lt; d<br>        <span class="hljs-keyword">return</span> ans<br></code></pre></td></tr></table></figure><h4 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">scoreOfParentheses</span><span class="hljs-params">(String s)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, d = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; s.length(); i++) &#123;<br>            d += s.charAt(i) == <span class="hljs-string">&#x27;(&#x27;</span> ? <span class="hljs-number">1</span> : -<span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">if</span>(s.charAt(i) == <span class="hljs-string">&#x27;)&#x27;</span> &amp;&amp; s.charAt(i - <span class="hljs-number">1</span>) == <span class="hljs-string">&#x27;(&#x27;</span>) &#123;<br>                ans += <span class="hljs-number">1</span> &lt;&lt; d;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ–¹æ³•äºŒï¼šæ ˆ"><a href="#æ–¹æ³•äºŒï¼šæ ˆ" class="headerlink" title="æ–¹æ³•äºŒï¼šæ ˆ"></a>æ–¹æ³•äºŒï¼šæ ˆ</h3><p>é‡‡ç”¨æ ˆè®°å½•å­—ç¬¦ä¸² <code>s</code> å¯¹åº”çš„åˆ†æ•°ã€‚åˆå§‹æ ˆé¡¶éƒ¨çš„åˆ†æ•°ä¸º0ã€‚</p><p>éå†å­—ç¬¦ä¸²ï¼š</p><ol><li><p>è‹¥ <code>s[i] == &#39;(&#39;</code>ï¼Œå…ˆå°†åˆ†æ•°0å‹å…¥æ ˆé¡¶å ä½</p></li><li><p>è‹¥ <code>s[i] == &#39;)&#39;</code>ï¼Œæ­¤æ—¶æœ‰ä¸¤ç§æƒ…å†µï¼š</p></li></ol><ul><li><p><code>s[i - 1] == &#39;(&#39;</code>ï¼Œè¿™æ˜¯ä¸€ä¸ª <code>&#39;()&#39;</code>ï¼Œ æ­¤æ—¶æ ˆé¡¶å€¼ <code>v</code> ä¸º0ï¼Œè¯¥åˆ†æ•°ä¸º1</p></li><li><p><code>s[i - 1] != &#39;(&#39;</code>ï¼Œè¿™æ˜¯ä¸€ä¸ªå¤–å±‚æ‹¬å·ï¼Œè¯¥åˆ†æ•°ä¸ºæ ˆé¡¶å€¼ <code>v</code> Ã— 2</p></li></ul><p>  ä¸¤ç§æƒ…å†µç»¼åˆä¸º <code>max(v * 2, 1)</code></p><p>  å°†æ ˆé¡¶å€¼å‡ºæ ˆè®¡ç®—å®Œæˆä¹‹åï¼Œå†å°†è®¡ç®—ç»“æœç´¯åŠ åˆ°å½“å‰çš„æ ˆé¡¶å€¼ã€‚</p><p>æœ€ç»ˆè¿”å›ç»“æœä¸ºæ ˆé¡¶å€¼ã€‚</p><p>è¿™æ˜¯å› ä¸ºä¸€å¼€å§‹è¿˜æœªéå†å­—ç¬¦ä¸² <code>s</code> æ—¶ï¼Œå°±å·²ç»åˆå§‹åŒ–äº†æ ˆé¡¶å€¼ã€‚è€Œä¸”è¯¥å­—ç¬¦ä¸² <code>s</code> ä¸ºå¹³è¡¡æ‹¬å·å­—ç¬¦ä¸²ï¼Œè¯´æ˜ <code>&#39;(&#39; </code>ä¸ <code>&#39;)&#39;</code> æ•°é‡ä¸€è‡´ï¼Œæ‰€ä»¥æœ€åæ ˆä¸­ä¸€ä¸ªå€¼ï¼Œå³ä¸ºæœ€ç»ˆåˆ†æ•°ã€‚</p><h4 id="Python3-1"><a href="#Python3-1" class="headerlink" title="Python3"></a>Python3</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">scoreOfParentheses</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        stack = [<span class="hljs-number">0</span>]<br>        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> s:<br>            <span class="hljs-keyword">if</span> x == <span class="hljs-string">&#x27;(&#x27;</span>:<br>                stack.append(<span class="hljs-number">0</span>)<br>            <span class="hljs-keyword">else</span>:<br>                v = stack.pop()<br>                stack[-<span class="hljs-number">1</span>] += <span class="hljs-built_in">max</span>(v * <span class="hljs-number">2</span>, <span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> stack[<span class="hljs-number">0</span>]<br></code></pre></td></tr></table></figure><h4 id="Java-1"><a href="#Java-1" class="headerlink" title="Java"></a>Java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">scoreOfParentheses</span><span class="hljs-params">(String s)</span> &#123;<br>        Deque&lt;Integer&gt; stack = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayDeque</span>&lt;&gt;();<br>        stack.addLast(<span class="hljs-number">0</span>);<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">char</span> c : s.toCharArray()) &#123;<br>            <span class="hljs-keyword">if</span>(c == <span class="hljs-string">&#x27;(&#x27;</span>) stack.addLast(<span class="hljs-number">0</span>);<br>            <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">v</span> <span class="hljs-operator">=</span> stack.pollLast();<br>                stack.addLast(stack.pollLast() + Math.max(v * <span class="hljs-number">2</span>, <span class="hljs-number">1</span>));<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> stack.pollLast();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Encouragement"><a href="#Encouragement" class="headerlink" title="Encouragement"></a>Encouragement</h2><p>ç›®å‰å°±è¯»äºæ–°åŠ å¡å›½ç«‹å¤§å­¦ï¼Œè½¬ç èœé¸¡ä¸€æšã€‚</p><p>å†³å¿ƒé€šè¿‡æ—¥æ›´ä¸€ç¯‡é¢˜è§£æ¿€åŠ±è‡ªå·±åšæŒåˆ·é¢˜ï¼ŒåšæŒå­¦ä¹ ç®—æ³•ã€‚</p><p>è¿™æ˜¯æˆ‘æ­å»º<a href="https://github.com/ltyzzzxxx/Leetcode-Everyday">Leetcode-Everyday</a>ä»“åº“åå‘å¸ƒã®ç¬¬16ç¯‡é¢˜è§£ï¼Œæ¬¢è¿å„ä½starå¹¶æå‡ºIssue~</p><p>ç‚¹å‡»<a href="https://leetcode.cn/u/ltyzzz/">è¿™é‡Œ</a>ï¼Œè¿›å…¥æˆ‘çš„ä¸ªäººLeetcodeä¸»é¡µ~</p>]]></content>
    
    
    <categories>
      
      <category>Leetcodeé¢˜è§£</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åˆ†å¸ƒå¼é”å­¦ä¹ ç¬”è®°</title>
    <link href="/2022/10/09/%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <url>/2022/10/09/%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="åˆ†å¸ƒå¼é”å­¦ä¹ ç¬”è®°"><a href="#åˆ†å¸ƒå¼é”å­¦ä¹ ç¬”è®°" class="headerlink" title="åˆ†å¸ƒå¼é”å­¦ä¹ ç¬”è®°"></a>åˆ†å¸ƒå¼é”å­¦ä¹ ç¬”è®°</h1><p>åˆ†å¸ƒå¼é”å­¦ä¹ ç¬”è®°æŒç»­æ›´æ–°ä¸­ï¼Œé¢„è®¡10æœˆä¸‹æ—¬æ›´å®Œ~ </p><p>è¯¥ç¬”è®°ä¸­é™¤äº†è§†é¢‘ä¸­æ ¸å¿ƒçš„ç¬”è®°ã€ä»£ç ï¼Œè¿˜é¢å¤–è¡¥å……äº†è§†é¢‘ä¸­è€å¸ˆè®²è§£è¿‡çš„ä½†å®˜æ–¹ç¬”è®°ä¸­æ²¡æœ‰æåˆ°çš„é‡è¦å†…å®¹ã€‚ </p><p>æœ‰é”™è¯¯æˆ–è€…é—æ¼çš„åœ°æ–¹è¯·å¤§å®¶æå‡ºæ¥å‘€ï¼Œæœ‰ä¸æ‡‚çš„åœ°æ–¹ç•™è¨€æˆ‘å°½é‡å›ç­”ï¼ˆæ¯•ç«Ÿæˆ‘ä¹Ÿå¾ˆèœ~</p><h2 id="1-ä¼ ç»Ÿé”-å‡åº“å­˜æ¡ˆä¾‹"><a href="#1-ä¼ ç»Ÿé”-å‡åº“å­˜æ¡ˆä¾‹" class="headerlink" title="1. ä¼ ç»Ÿé” - å‡åº“å­˜æ¡ˆä¾‹"></a>1. ä¼ ç»Ÿé” - å‡åº“å­˜æ¡ˆä¾‹</h2><p><img src="https://lty-image-bed.oss-cn-shenzhen.aliyuncs.com/blog/stock.png"></p><p>å¤šçº¿ç¨‹åŒæ—¶æ“çºµåŒä¸€ä¸ªæœåŠ¡çš„å…±äº«èµ„æºï¼Œå¿…ç„¶ä¼šé€ æˆçº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼šé‡‡ç”¨JVMæä¾›çš„ <code>Reentrantlock</code> æˆ–è€… <code>Synchronized</code> é”</p><h3 id="1-1-åˆå§‹åŒ–å·¥ç¨‹"><a href="#1-1-åˆå§‹åŒ–å·¥ç¨‹" class="headerlink" title="1.1 åˆå§‹åŒ–å·¥ç¨‹"></a>1.1 åˆå§‹åŒ–å·¥ç¨‹</h3><p>è¿™ä¸€éƒ¨åˆ†è·Ÿç€è§†é¢‘å®Œæˆï¼Œä»¥ä¸‹å†…å®¹çœç•¥äº†æœªè¿æ¥æ•°æ®åº“ä¹‹å‰çš„éƒ¨åˆ†ï¼ˆä¸ªäººè®¤ä¸ºä¹‹å‰æœªè¿æ¥æ•°æ®åº“çš„éƒ¨åˆ†ä»…æ¼”ç¤ºäº†å¹¶å‘æµç¨‹ï¼Œä¸å®é™…ä¸šåŠ¡å…³è”æ€§ä¸å¤§ï¼Œä¹Ÿè¾ƒä¸ºå®¹æ˜“ï¼Œå¯è‡ªè¡Œå®ç°ï¼‰ã€‚</p><ol><li><p>åˆ›å»ºSpringBootå·¥ç¨‹ï¼Œé€‰æ‹© <code>JDK8</code> ç‰ˆæœ¬ï¼Œå¼•å…¥ <code>Spring Web</code></p></li><li><p>åœ¨ <code>pom.xml</code>å¼•å…¥å¦‚ä¸‹ä¾èµ–</p> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.4.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.18.24<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>åˆ›å»ºæ•°æ®åº“ <code>distributed_lock</code>ï¼Œåœ¨æ•°æ®åº“å†…åˆ›å»ºè¡¨ <code>db_stock</code>ï¼Œåˆ›å»ºå¦‚ä¸‹å­—æ®µã€‚</p><p> <img src="https://lty-image-bed.oss-cn-shenzhen.aliyuncs.com/blog/20221008221626.png"></p><p> æ–°å»ºä¸€æ¡æ•°æ®è®°å½•</p><p> <img src="https://lty-image-bed.oss-cn-shenzhen.aliyuncs.com/blog/20221008221728.png"></p></li><li><p>ä¿®æ”¹application.propertiesæ–‡ä»¶ï¼Œè§„å®šWebå¯åŠ¨ç«¯å£å·</p> <figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">server.port</span>=<span class="hljs-string">10010</span><br><span class="hljs-attr">spring.datasource.driver-class-name</span>=<span class="hljs-string">com.mysql.jdbc.Driver</span><br><span class="hljs-attr">spring.datasource.url</span>=<span class="hljs-string">jdbc:mysql://127.0.0.1:3306/distributed_lock</span><br><span class="hljs-attr">spring.datasource.username</span>=<span class="hljs-string">root</span><br><span class="hljs-attr">spring.datasource.password</span>=<span class="hljs-string">your password</span><br></code></pre></td></tr></table></figure></li><li><p>åœ¨ç›®å½•ä¸‹åˆ›å»º <code>pojo</code> åŒ…ï¼Œç”¨äºå­˜æ”¾å®ä½“ç±» <code>Stock</code> å¯¹è±¡</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@TableName(&quot;db_stock&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Stock</span> &#123;<br><br><span class="hljs-keyword">private</span> Long id;<br><span class="hljs-keyword">private</span> String productCode;<br><span class="hljs-keyword">private</span> String warehouse;<br><span class="hljs-keyword">private</span> Integer count;<br>&#125;<br></code></pre></td></tr></table></figure><p> åˆ›å»º <code>mapper</code> åŒ…ï¼Œåˆ›å»º <code>StockMapper</code> ç±»</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">StockMapper</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseMapper</span>&lt;Stock&gt; &#123;<br><br>&#125;<br></code></pre></td></tr></table></figure><p> æ›´æ”¹ <code>SpringBoot</code> å¯åŠ¨ç±»ï¼Œæ·»åŠ å¦‚ä¸‹æ³¨è§£</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@MapperScan(&quot;com.ltyzzz.distributedlock.mapper&quot;)</span><br></code></pre></td></tr></table></figure><p> åˆ›å»º <code>service</code> åŒ…ï¼Œåˆ›å»º <code>StockService</code> ç±»</p><p> try-finallyå—ä¹‹åç”¨äºåŠ é”</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StockService</span> &#123;<br><br><span class="hljs-meta">@Autowired</span><br><span class="hljs-keyword">private</span> StockMapper stockMapper;<br><br><span class="hljs-keyword">private</span> <span class="hljs-type">ReentrantLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReentrantLock</span>();<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deduct</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-type">Stock</span> <span class="hljs-variable">stock</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.stockMapper.selectOne(<span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryWrapper</span>&lt;Stock&gt;().eq(<span class="hljs-string">&quot;product_code&quot;</span>, <span class="hljs-string">&quot;1001&quot;</span>));<br>        <span class="hljs-keyword">if</span> (stock != <span class="hljs-literal">null</span> &amp;&amp; stock.getCount() &gt; <span class="hljs-number">0</span>) &#123;<br>            stock.setCount(stock.getCount() - <span class="hljs-number">1</span>);<br>            <span class="hljs-built_in">this</span>.stockMapper.updateById(stock);<br>        &#125;<br>    &#125; <span class="hljs-keyword">finally</span> &#123;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p> åˆ›å»º <code>controller</code> åŒ…ï¼Œåˆ›å»º <code>StockController</code> ç±»</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StockController</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    StockService stockService;<br><br>    <span class="hljs-meta">@GetMapping(&quot;stock/deduct&quot;)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">deduct</span><span class="hljs-params">()</span> &#123;<br>        stockService.deduct();<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;hello stock deduct!&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><h3 id="1-2-JVMæœ¬åœ°é”"><a href="#1-2-JVMæœ¬åœ°é”" class="headerlink" title="1.2 JVMæœ¬åœ°é”"></a>1.2 JVMæœ¬åœ°é”</h3><h4 id="1-2-1-ä½¿ç”¨JMeterè¿›è¡Œå¹¶å‘æµ‹è¯•"><a href="#1-2-1-ä½¿ç”¨JMeterè¿›è¡Œå¹¶å‘æµ‹è¯•" class="headerlink" title="1.2.1 ä½¿ç”¨JMeterè¿›è¡Œå¹¶å‘æµ‹è¯•"></a>1.2.1 ä½¿ç”¨JMeterè¿›è¡Œå¹¶å‘æµ‹è¯•</h4><p>é¦–å…ˆå¯åŠ¨ SpringBoot åº“å­˜é¡¹ç›®</p><p>åˆ©ç”¨ <code>JMeter</code> è¿›è¡Œå‹åŠ›æµ‹è¯•</p><ol><li><p>åˆ›å»º <code>Thread Group</code></p><p> <img src="https://lty-image-bed.oss-cn-shenzhen.aliyuncs.com/blog/thread-group.png"></p></li><li><p>è®¾ç½® <code>Thread Properties</code></p><p> <img src="https://lty-image-bed.oss-cn-shenzhen.aliyuncs.com/blog/thread-proper.png"></p></li><li><p>è®¾ç½® <code>request</code> </p><p> <img src="https://lty-image-bed.oss-cn-shenzhen.aliyuncs.com/blog/reque.png"></p><p> <img src="https://lty-image-bed.oss-cn-shenzhen.aliyuncs.com/blog/20221008224501.png"></p></li><li><p>æ·»åŠ  <code>Aggregate Report</code></p><p> <img src="https://lty-image-bed.oss-cn-shenzhen.aliyuncs.com/blog/20221008224122.png"></p></li><li><p>è¿è¡Œå‹åŠ›æµ‹è¯•ï¼Œæ­£å¸¸æ‰§è¡Œæƒ…å†µæœ€ç»ˆåº“å­˜åº”è¯¥ä¸º0</p></li></ol><p>æœ€ç»ˆæ•°æ®åº“ç»“æœå¦‚ä¸‹</p><p><img src="https://lty-image-bed.oss-cn-shenzhen.aliyuncs.com/blog/data%20stcok.png"></p><p>æ­¤æ—¶äº§ç”Ÿäº†å¹¶å‘æ“ä½œ</p><p>æœ‰ä¸¤ç§æé™æƒ…å†µ</p><ul><li><p>æ‰€æœ‰å¹¶å‘è¯·æ±‚éƒ½å®Œç¾çš„äº¤é”™æ‰§è¡Œï¼Œæ­£ç¡®åœ°å®Œæˆäº†æ•°æ®åº“æ›´æ–°ï¼Œæœ€ç»ˆåº“å­˜ä¸º0</p></li><li><p>æ‰€æœ‰å¹¶å‘è¯·æ±‚åŒä¸€æ—¶é—´å¹¶å‘ï¼ŒåŒæ—¶æ‰§è¡Œäº†æ•°æ®åº“æ›´æ–°æ“ä½œï¼Œå¹¶å‘çº¿ç¨‹æ•°ä¸º100ï¼Œå¾ªç¯æ¬¡æ•°ä¸º50ï¼Œæœ€ç»ˆåº“å­˜ä¸º4950</p></li></ul><h4 id="1-2-2-åŠ å…¥JVMæœ¬åœ°é”è§£å†³å¹¶å‘é—®é¢˜"><a href="#1-2-2-åŠ å…¥JVMæœ¬åœ°é”è§£å†³å¹¶å‘é—®é¢˜" class="headerlink" title="1.2.2 åŠ å…¥JVMæœ¬åœ°é”è§£å†³å¹¶å‘é—®é¢˜"></a>1.2.2 åŠ å…¥JVMæœ¬åœ°é”è§£å†³å¹¶å‘é—®é¢˜</h4><p>ä¿®æ”¹ <code>StockService</code>ã€‚ä½¿ç”¨ <code>ReentrantLock</code> æˆ– <code>Synchronized</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StockService</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> StockMapper stockMapper;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">ReentrantLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReentrantLock</span>();<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deduct</span><span class="hljs-params">()</span> &#123;<br>        lock.lock();<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">Stock</span> <span class="hljs-variable">stock</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.stockMapper.selectOne(<span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryWrapper</span>&lt;Stock&gt;().eq(<span class="hljs-string">&quot;product_code&quot;</span>, <span class="hljs-string">&quot;1001&quot;</span>));<br>            <span class="hljs-keyword">if</span> (stock != <span class="hljs-literal">null</span> &amp;&amp; stock.getCount() &gt; <span class="hljs-number">0</span>) &#123;<br>                stock.setCount(stock.getCount() - <span class="hljs-number">1</span>);<br>                <span class="hljs-built_in">this</span>.stockMapper.updateById(stock);<br>            &#125;<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            lock.unlock();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¯åŠ¨ <code>SpringBoot</code> å·¥ç¨‹ï¼Œç»§ç»­è¿›è¡Œå‹åŠ›æµ‹è¯•ï¼Œæœ€ç»ˆåº“å­˜ä¸º0ã€‚</p><h4 id="1-2-3-JVMæœ¬åœ°é”å¤±æ•ˆçš„æƒ…å†µ"><a href="#1-2-3-JVMæœ¬åœ°é”å¤±æ•ˆçš„æƒ…å†µ" class="headerlink" title="1.2.3 JVMæœ¬åœ°é”å¤±æ•ˆçš„æƒ…å†µ"></a>1.2.3 JVMæœ¬åœ°é”å¤±æ•ˆçš„æƒ…å†µ</h4><p>å…±æœ‰ä¸‰ç§æƒ…å†µ</p><h5 id="å¤šä¾‹æ¨¡å¼"><a href="#å¤šä¾‹æ¨¡å¼" class="headerlink" title="å¤šä¾‹æ¨¡å¼"></a>å¤šä¾‹æ¨¡å¼</h5><p>ä¿®æ”¹ <code>StockService</code>ï¼Œè®¾ç½®å¤šä¾‹æ¨¡å¼</p><p>æ·»åŠ æ³¨è§£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Scope(value = &quot;prototype&quot;, proxyMode = ScopedProxyMode.TARGET_CLASS)</span><br></code></pre></td></tr></table></figure><p>JDKåŠ¨æ€ä»£ç†ä½¿ç”¨ <code>INTERFACES</code>ï¼ŒCGLIBä»£ç†ä½¿ç”¨ <code>TARGET_CLASS</code></p><p>é»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨JDKåŠ¨æ€ä»£ç†ï¼ŒåŸç”ŸSpringé»˜è®¤æ˜¯JDKåŠ¨æ€ä»£ç†</p><p>è€ŒSpringBootåœ¨2.0ç‰ˆæœ¬ä¹‹åé»˜è®¤ä½¿ç”¨CGLIBä»£ç†</p><p>å¯åŠ¨ <code>SpringBoot</code> å·¥ç¨‹ï¼Œç»§ç»­è¿›è¡Œå‹åŠ›æµ‹è¯•ï¼Œæœ€ç»ˆåº“å­˜ä¸ä¸º0ï¼Œè¯´æ˜æœ¬åœ°é”å¤±æ•ˆ</p><h5 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="headerlink" title="äº‹åŠ¡"></a>äº‹åŠ¡</h5><p>åœ¨ <code>service</code> æ–¹æ³•ä¸Šæ·»åŠ äº‹åŠ¡æ³¨è§£ <code>@Transactional</code></p><p>å¯åŠ¨ <code>SpringBoot</code> å·¥ç¨‹ï¼Œç»§ç»­è¿›è¡Œå‹åŠ›æµ‹è¯•ï¼Œæœ€ç»ˆåº“å­˜ä¸ä¸º0ï¼Œè¯´æ˜æœ¬åœ°é”å¤±æ•ˆ</p><p>äº‹åŠ¡é‡‡ç”¨AOPæ€æƒ³å®ç°ï¼š</p><ol><li><p>åœ¨AOPçš„å‰ç½®æ–¹æ³•å†…å¼€å¯äº‹åŠ¡</p></li><li><p>è¿›å…¥serviceæ–¹æ³•ï¼Œè·å–é”</p></li><li><p>è¿›è¡ŒæŸ¥è¯¢åº“å­˜ã€æ›´æ–°åº“å­˜æ“ä½œ</p></li><li><p>é‡Šæ”¾é”</p></li><li><p>åœ¨AOPçš„åç½®æ–¹æ³•å†…æäº¤æˆ–å›æ»šäº‹åŠ¡</p></li></ol><p>åœ¨å¹¶å‘æƒ…å†µä¸‹ï¼Œå¦‚å›¾æ‰€ç¤º</p><img src="https://lty-image-bed.oss-cn-shenzhen.aliyuncs.com/blog/tab.png" title="" alt="" width="236"><p>bç”¨æˆ·åœ¨aç”¨æˆ·è¿˜æœªæäº¤äº‹åŠ¡ä¹‹å‰ï¼Œå°±è·å–åˆ°äº†aç”¨æˆ·é‡Šæ”¾çš„é”ï¼Œè¯»å–åˆ°äº†åº“å­˜ï¼Œä½†è¯¥åº“å­˜ä¸ºæ—§çš„åº“å­˜ï¼ˆå› ä¸ºaç”¨æˆ·è¿˜æœªæäº¤äº‹åŠ¡ï¼‰ï¼Œæ‰€ä»¥bç”¨æˆ·æ˜¯åœ¨æ—§åº“å­˜çš„åŸºç¡€ä¸Šè¿›è¡Œä¿®æ”¹ï¼Œå› æ­¤äº§ç”Ÿäº†å¹¶å‘é—®é¢˜ã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼šè®¾ç½®äº‹åŠ¡éš”ç¦»çº§åˆ«</p><p>å°†æ³¨è§£æ”¹ä¸ºï¼š<code>@Transactional(isolation = Isolation.READ_UNCOMMITTED)</code></p><p>å³æ­¤æ—¶bç”¨æˆ·å¯ä»¥è¯»å–åˆ°aç”¨æˆ·æœªæäº¤çš„æ•°æ®ï¼Œå³è¯¥æ•°æ®ä¸ºæœ€æ–°æ•°æ®ï¼Œå¯ä»¥è§£å†³æ­¤é—®é¢˜ã€‚</p><p>ä½†å®é™…ä¸šåŠ¡ä¸­ä¸èƒ½è¿™æ ·å»ä½¿ç”¨ï¼Œé‡‡ç”¨äº‹åŠ¡å°±æ˜¯ä¸ºäº†ä¿è¯åŸå­æ€§ï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚å‡è®¾bç”¨æˆ·åœ¨è¿™ç§æ–¹å¼ä¸‹è¯»å–åˆ°äº†æœ€æ–°æ•°æ®ï¼Œè™½ç„¶å¯ä»¥è§£å†³è¶…å–é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœaå›æ»šäº†äº‹åŠ¡ï¼Œé‚£ä¹ˆbç”¨æˆ·è¯»å–åˆ°çš„æ•°æ®å°±æ˜¯é”™è¯¯çš„ï¼Œåˆä¼šäº§ç”Ÿæ–°çš„æ··ä¹±ã€‚</p><h5 id="é›†ç¾¤éƒ¨ç½²"><a href="#é›†ç¾¤éƒ¨ç½²" class="headerlink" title="é›†ç¾¤éƒ¨ç½²"></a>é›†ç¾¤éƒ¨ç½²</h5><p>å¤šä¸ªæœåŠ¡å™¨éƒ¨ç½²</p><p>å»æ‰ <code>@Transactional</code> æ³¨è§£ï¼Œä¿è¯åœ¨å•æœºæ¨¡å¼ä¸‹é”ç”Ÿæ•ˆï¼Œæ— å¹¶å‘é—®é¢˜ã€‚</p><p>è¿™éƒ¨åˆ†çœ‹è§†é¢‘åš</p><ol><li><p>è®¾ç½®ä¸¤ä¸ªSpringBootå¯åŠ¨ç±»ï¼Œè®¾ç½®ä¸åŒçš„ç«¯å£å·ï¼Œå¹¶å¯åŠ¨</p></li><li><p>æ›´æ”¹ <code>nginx</code> é…ç½®æ–‡ä»¶</p> <figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">upstream</span> distributedLock &#123;<br>    <span class="hljs-attribute">server</span> localhost:<span class="hljs-number">10086</span>;<br>    <span class="hljs-attribute">server</span> localhost:<span class="hljs-number">10010</span>;<br>&#125;<br><br><span class="hljs-section">server</span> &#123;<br>    <span class="hljs-attribute">listen</span>       <span class="hljs-number">80</span>;<br>    <span class="hljs-attribute">server_name</span>  localhost;<br>    <span class="hljs-section">location</span> / &#123;<br>        <span class="hljs-attribute">proxy_pass</span> http://distributedLock;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>å¯åŠ¨nginx</p></li></ol><p>ä»»åŠ¡ç®¡ç†å™¨ä¸­å‡ºç°ä¸¤ä¸ªnginxå³ä»£è¡¨å¯åŠ¨æˆåŠŸï¼Œä¸€ä¸ªå·¥ä½œè¿›ç¨‹ï¼Œä¸€ä¸ªä¸»è¿›ç¨‹</p><p>ä»¥é»˜è®¤ç«¯å£80è¿›è¡Œè®¿é—®ï¼š<code>localhost:80/stock/deduct</code></p><p>ä¹‹åï¼Œä½¿ç”¨JMeterè¿›è¡Œå‹åŠ›æµ‹è¯•ï¼Œ5000ä¸ªè¯·æ±‚æˆåŠŸå‘å‡ºï¼Œä½†æœ€ç»ˆåº“å­˜ä¸ä¸º0ï¼Œé”å¤±æ•ˆã€‚</p><h3 id="1-3-å•SQLè¯­å¥è§£å†³å¹¶å‘é—®é¢˜"><a href="#1-3-å•SQLè¯­å¥è§£å†³å¹¶å‘é—®é¢˜" class="headerlink" title="1.3 å•SQLè¯­å¥è§£å†³å¹¶å‘é—®é¢˜"></a>1.3 å•SQLè¯­å¥è§£å†³å¹¶å‘é—®é¢˜</h3><h4 id="1-3-1-å®ç°è¿‡ç¨‹"><a href="#1-3-1-å®ç°è¿‡ç¨‹" class="headerlink" title="1.3.1 å®ç°è¿‡ç¨‹"></a>1.3.1 å®ç°è¿‡ç¨‹</h4><p>åŸ <code>Service</code> ä»£ç æµç¨‹</p><ol><li><p>æŸ¥è¯¢åº“å­˜</p></li><li><p>åˆ¤æ–­åº“å­˜æ˜¯å¦å……è¶³</p></li><li><p>æ›´æ–°åº“å­˜åˆ°æ•°æ®åº“</p></li></ol><p>è¯¥æµç¨‹å¯ä»¥ä½¿ç”¨ä¸€ä¸ªSQLè¯­å¥å®ç°</p><p>ä¸º <code>StockMapper</code> æ·»åŠ æ–¹æ³• updateStockï¼Œ</p><p>å‚æ•°ä¸ºå•†å“ç¼–å· <code>productCode</code> ä¸å‡åº“å­˜æ•°é‡<code>count</code>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">StockMapper</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseMapper</span>&lt;Stock&gt; &#123;<br>    <span class="hljs-meta">@Update(&quot;update db_stock set count = count - #&#123;count&#125; where product_code = #&#123;productCode&#125; and count &gt;= #&#123;count&#125;&quot;)</span><br>    <span class="hljs-type">int</span> <span class="hljs-title function_">updateStock</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;productCode&quot;)</span> String productCode, <span class="hljs-meta">@Param(&quot;count&quot;)</span> Integer count)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>SQLè¯­å¥å¦‚ä¸‹ï¼š</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">update</span> db_stock <span class="hljs-keyword">set</span> <span class="hljs-built_in">count</span> = <span class="hljs-built_in">count</span> - #&#123;<span class="hljs-built_in">count</span>&#125; <span class="hljs-keyword">where</span> product_code = #&#123;productCode&#125; <span class="hljs-keyword">and</span> <span class="hljs-built_in">count</span> &gt;= #&#123;<span class="hljs-built_in">count</span>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨MySQLä¸­ï¼Œæ›´æ–°ã€æ–°å¢ã€åˆ é™¤å†™æ“ä½œï¼Œä¼šåŠ æ‚²è§‚é”ï¼Œå…·æœ‰åŸå­æ€§ï¼Œå¯ä»¥è§£å†³å¹¶å‘é—®é¢˜ã€‚</p><p>åœ¨ <code>StockService</code> ä¸­è°ƒç”¨è¯¥Mapperæ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deduct</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-built_in">this</span>.stockMapper.updateStock(<span class="hljs-string">&quot;1001&quot;</span>, <span class="hljs-number">1</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨é›†ç¾¤éƒ¨ç½²æƒ…å†µä¸‹ï¼Œä½¿ç”¨JMeterè¿›è¡Œå‹åŠ›æµ‹è¯•ï¼Œ5000ä¸ªè¯·æ±‚æˆåŠŸå‘å‡ºï¼Œæœ€ç»ˆåº“å­˜ä¸º0ã€‚</p><h4 id="1-3-2-ä¼˜ç¼ºç‚¹"><a href="#1-3-2-ä¼˜ç¼ºç‚¹" class="headerlink" title="1.3.2 ä¼˜ç¼ºç‚¹"></a>1.3.2 ä¼˜ç¼ºç‚¹</h4><p>ä¼˜ç‚¹ï¼š</p><ol><li>å¯ä»¥è§£å†³å¤šä¾‹æ¨¡å¼ã€äº‹åŠ¡ã€é›†ç¾¤éƒ¨ç½²ä¸‹çš„å¹¶å‘é—®é¢˜</li></ol><p>ç¼ºç‚¹ï¼š</p><ol><li><p>é”èŒƒå›´é—®é¢˜</p></li><li><p>åŒä¸€ä¸ªå•†å“æœ‰å¤šæ¡åº“å­˜è®°å½•ï¼ˆå¤šä»“åº“ï¼‰</p><ul><li><p>å¦‚æœä»ç„¶ä½¿ç”¨è¯¥æ–¹æ³•ï¼Œåˆ™ä¼šå¯¹æ‰€æœ‰ä»“åº“åº“å­˜æ•°è¿›è¡Œè‡ªå‡</p></li><li><p>æ­£å¸¸æƒ…å†µåº”çµæ´»ä»å„ä¸ªä»“åº“è¿›è¡Œå‡åº“å­˜å‘è´§</p></li></ul></li><li><p>æ— æ³•è®°å½•åº“å­˜å˜åŒ–å‰åçš„çŠ¶æ€</p><ul><li>åŸå› ï¼šå•æ¡SQLè¯­å¥</li></ul></li></ol><h5 id="é”èŒƒå›´é—®é¢˜"><a href="#é”èŒƒå›´é—®é¢˜" class="headerlink" title="é”èŒƒå›´é—®é¢˜"></a>é”èŒƒå›´é—®é¢˜</h5><p>è¡¨çº§é” VS è¡Œçº§é”</p><ul><li><p>æœªæ·»åŠ ç´¢å¼•ä¹‹å‰ä¸º <code>è¡¨çº§é”</code></p><ul><li><p>åœ¨ç”¨æˆ·aä¸­ï¼Œå…ˆå¼€å¯äº‹åŠ¡ï¼Œå†å»æ›´æ–° <code>productCode = 1001</code> è®°å½•ï¼Œä½†ä¸æäº¤äº‹åŠ¡</p></li><li><p>è¿™å¯¼è‡´ï¼šåœ¨ç”¨æˆ·bä¸­ï¼Œæ›´æ–° <code>productCode = 1002</code> è®°å½•ï¼Œä½†è¿›å…¥äº†é˜»å¡</p></li><li><p>ç”¨æˆ·aæäº¤äº†äº‹åŠ¡ä¹‹åï¼Œç”¨æˆ·bæ‰èƒ½æäº¤æˆåŠŸï¼Œè¯æ˜ä¸ºè¡¨çº§é”</p></li></ul></li><li><p>æ·»åŠ ç´¢å¼•ä¹‹åä¸º <code>è¡Œçº§é”</code></p><ol><li><p>é”çš„æŸ¥è¯¢æˆ–æ›´æ–°æ¡ä»¶å¿…é¡»ä¸ºç´¢å¼•å­—æ®µ</p><p> e.g.ï¼šæ ¹æ® <code>productCode</code> è¿›è¡ŒæŸ¥è¯¢æˆ–æ›´æ–°ï¼Œä¸ºå…¶æ·»åŠ ç´¢å¼•</p><p> <img src="https://lty-image-bed.oss-cn-shenzhen.aliyuncs.com/blog/iShot2022-10-08%2023.44.31.png"></p></li><li><p>å†æ¬¡è¿›è¡Œä¹‹å‰çš„æ“ä½œï¼Œç”¨æˆ·bä¸ä¼šè¿›å…¥é˜»å¡ï¼Œå³å˜ä¸ºäº†è¡Œçº§é”</p></li><li><p>ä½¿ç”¨è¡Œçº§é”çš„æ¡ä»¶ï¼š</p><p> . æŸ¥è¯¢æˆ–è€…æ›´æ–°æ¡ä»¶å¿…é¡»ä¸ºç´¢å¼•å­—æ®µ</p><p> . æŸ¥è¯¢æˆ–è€…æ›´æ–°æ¡ä»¶å¿…é¡»ä¸ºå…·ä½“å€¼</p><p>   . SQLè¯­å¥ä¸­whereæ¡ä»¶æœ‰ç´¢å¼•æ—¶ï¼Œä¸èƒ½ä¸º <code>&#39;like&#39;</code> æˆ–è€… <code>&#39;!=&#39;</code>ï¼Œå¦åˆ™ä¸ºè¡¨çº§é”</p></li></ol></li></ul><h3 id="1-4-æ‚²è§‚é”"><a href="#1-4-æ‚²è§‚é”" class="headerlink" title="1.4 æ‚²è§‚é”"></a>1.4 æ‚²è§‚é”</h3><p>select â€¦ for update</p><h4 id="1-4-1-æƒ…æ™¯å¼•å…¥"><a href="#1-4-1-æƒ…æ™¯å¼•å…¥" class="headerlink" title="1.4.1 æƒ…æ™¯å¼•å…¥"></a>1.4.1 æƒ…æ™¯å¼•å…¥</h4><p>ç”¨æˆ·aä¸bå¹¶å‘æ‰§è¡Œ</p><ol><li><p>ç”¨æˆ·aå¼€å¯äº‹åŠ¡ï¼Œå¹¶ä½¿ç”¨å¦‚ä¸‹SQLè¯­å¥æŸ¥è¯¢åº“å­˜</p> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> db_stock <span class="hljs-keyword">where</span> product_code<span class="hljs-operator">=</span><span class="hljs-string">&#x27;1001&#x27;</span>;<br></code></pre></td></tr></table></figure></li><li><p>ç”¨æˆ·bä½¿ç”¨å¦‚ä¸‹SQLè¯­å¥</p> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">update</span> db_stock <span class="hljs-keyword">set</span> count <span class="hljs-operator">=</span> count <span class="hljs-operator">-</span> <span class="hljs-number">1</span> <span class="hljs-keyword">where</span> id<span class="hljs-operator">=</span><span class="hljs-number">1</span>;<br></code></pre></td></tr></table></figure></li></ol><p>è¿™æ—¶åº“å­˜å·²ç»å‘ç”Ÿå˜åŒ–ï¼Œè€Œç”¨æˆ·aä¸çŸ¥æƒ…ï¼Œä»ä¼šå·²å®ƒæŸ¥å‡ºæ¥çš„åº“å­˜æ•°ä½œä¸ºæ ‡å‡†è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œ</p><p>è§£å†³æ–¹æ¡ˆï¼šç”¨æˆ·aé‡‡ç”¨å¦‚ä¸‹SQLè¯­å¥ï¼Œè¿›è¡ŒåŠ é”æ“ä½œ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> db_stock <span class="hljs-keyword">where</span> product_code<span class="hljs-operator">=</span><span class="hljs-string">&#x27;1001&#x27;</span> <span class="hljs-keyword">for</span> <span class="hljs-keyword">update</span>;<br></code></pre></td></tr></table></figure><p>åŠ é”èŒƒå›´ï¼šæ­¤æ—¶æ»¡è¶³è¡Œçº§é”æ¡ä»¶ï¼Œå› æ­¤è¯¥æ‚²è§‚é”ä¸ºè¡Œçº§é”ï¼Œåªé”å¯¹åº”çš„è®°å½•</p><h4 id="1-4-2-ä»£ç å®ç°"><a href="#1-4-2-ä»£ç å®ç°" class="headerlink" title="1.4.2 ä»£ç å®ç°"></a>1.4.2 ä»£ç å®ç°</h4><ol><li><p>åœ¨StockMapperä¸­æ·»åŠ æŸ¥è¯¢åº“å­˜æ–¹æ³•</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Select(&quot;select * from db_stock where product_code=#&#123;productCode&#125; for update&quot;)</span><br>List&lt;Stock&gt; <span class="hljs-title function_">queryStock</span><span class="hljs-params">(String productCode)</span>;<br></code></pre></td></tr></table></figure></li><li><p>æ›´æ–°StockServiceæ–¹æ³•</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Transactional</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deduct</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// æŸ¥è¯¢åº“å­˜ä¿¡æ¯å¹¶é”å®š</span><br>    List&lt;Stock&gt; stocks = <span class="hljs-built_in">this</span>.stockMapper.queryStock(<span class="hljs-string">&quot;1001&quot;</span>);<br>    <span class="hljs-comment">// å–ç¬¬ä¸€ä¸ªåº“å­˜</span><br>    <span class="hljs-type">Stock</span> <span class="hljs-variable">stock</span> <span class="hljs-operator">=</span> stocks.get(<span class="hljs-number">0</span>);<br>    <span class="hljs-comment">// åˆ¤æ–­åº“å­˜æ˜¯å¦å……è¶³</span><br>    <span class="hljs-keyword">if</span> (stock != <span class="hljs-literal">null</span> &amp;&amp; stock.getCount() &gt; <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-comment">// æ‰£å‡åº“å­˜</span><br>        stock.setCount(stock.getCount() - <span class="hljs-number">1</span>);<br>        <span class="hljs-built_in">this</span>.stockMapper.updateById(stock);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨å‹åŠ›æµ‹è¯•å·¥å…·è¿›è¡Œæµ‹è¯•ï¼Œåº“å­˜æ•°é‡å‡ä¸º0ï¼Œè§£å†³äº†å¹¶å‘é—®é¢˜</p></li></ol><h4 id="1-4-3-ä¼˜ç¼ºç‚¹"><a href="#1-4-3-ä¼˜ç¼ºç‚¹" class="headerlink" title="1.4.3 ä¼˜ç¼ºç‚¹"></a>1.4.3 ä¼˜ç¼ºç‚¹</h4><p>ä¼˜ç‚¹ï¼šæ›´åŠ çµæ´»</p><ol><li><p>è§£å†³åŒä¸€ä¸ªå•†å“æœ‰å¤šæ¡åº“å­˜è®°å½•çš„é—®é¢˜</p><p> å¯ä»¥å…ˆæ ¹æ®å•†å“ç¼–å·æŸ¥è¯¢åº“å­˜è®°å½•ï¼ŒæŸ¥è¯¢åˆ°ä¹‹åå†æ ¹æ®ç°æœ‰æŠ€æœ¯åˆ†æã€‚</p></li><li><p>è§£å†³æ— æ³•è®°å½•åº“å­˜å˜åŒ–å‰åçŠ¶æ€çš„é—®é¢˜</p></li></ol><p>ç¼ºç‚¹ï¼š</p><ol><li><p>æ€§èƒ½é—®é¢˜ï¼šæ•ˆç‡æ¯”JVMæœ¬åœ°é”ç¨é«˜ä¸€äº›ï¼Œä½†æ¯”å•SQLè¯­å¥ä½</p></li><li><p>æ­»é”é—®é¢˜ï¼šå¯¹å¤šæ¡æ•°æ®åŠ é”æ—¶ï¼ŒåŠ é”é¡ºåºå¿…é¡»ä¸€è‡´</p><p> e.g.ï¼šç”¨æˆ·aä¸bæ‰§è¡Œå¦‚ä¸‹é¡ºåºæ“ä½œ</p><ol><li><p>ç”¨æˆ·aå¯¹ <code>id=1</code> å•†å“åŠ é” </p></li><li><p>ç”¨æˆ·bå¯¹ <code>id=2</code> å•†å“åŠ é”</p></li><li><p>ç”¨æˆ·aæƒ³å¯¹ <code>id=2</code> å•†å“åŠ é”ï¼Œä½†é™·å…¥é˜»å¡</p></li><li><p>ç”¨æˆ·bæƒ³å¯¹ <code>id=1</code> å•†å“åŠ é”ï¼ŒæŠ¥é”™ Deadlock</p></li></ol></li><li><p>åº“å­˜æ“ä½œéœ€è¦ç»Ÿä¸€</p></li></ol><h3 id="1-5-ä¹è§‚é”"><a href="#1-5-ä¹è§‚é”" class="headerlink" title="1.5 ä¹è§‚é”"></a>1.5 ä¹è§‚é”</h3><p>å€ŸåŠ©æ—¶é—´æˆ³ã€versionç‰ˆæœ¬å·å®ç°ï¼Œåˆ©ç”¨ <code>CAS</code> æœºåˆ¶</p><p>CASï¼šCompare and Swap æ¯”è¾ƒå¹¶äº¤æ¢</p><p>å…³äºCASï¼Œå¯ä»¥çœ‹çœ‹è¿™ç¯‡åšå®¢ï¼š<a href="https://www.cnblogs.com/myopensource/p/8177074.html">æ¼«ç”»ï¼šä»€ä¹ˆæ˜¯CASæœºåˆ¶</a></p><ul><li><p>å¦‚æœå˜é‡ <code>X</code> ç­‰äºæ—§å€¼ <code>A</code>ï¼Œåˆ™æ›´æ–°å°† <code>X</code> æ›´æ–°ä¸º <code>B</code> </p></li><li><p>è‹¥ä¸ç­‰äºï¼Œåˆ™æ”¾å¼ƒæ›´æ–°</p></li></ul><h4 id="1-5-1-å®ç°æ€è·¯"><a href="#1-5-1-å®ç°æ€è·¯" class="headerlink" title="1.5.1 å®ç°æ€è·¯"></a>1.5.1 å®ç°æ€è·¯</h4><ol><li><p>åœ¨ <code>db_stock</code> è¡¨ä¸­æ·»åŠ  <code>version</code> å­—æ®µ</p><p> ç±»å‹ä¸ºintï¼Œé•¿åº¦11ï¼ŒNot Null</p></li><li><p>æŸ¥è¯¢å¯¹åº”çš„å•†å“åº“å­˜ä»¥åŠ <code>version</code> å·</p> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> db_stock <span class="hljs-keyword">where</span> product_code<span class="hljs-operator">=</span><span class="hljs-string">&#x27;1001&#x27;</span>;<br></code></pre></td></tr></table></figure></li><li><p>æ‰§è¡Œæ›´æ–°åº“å­˜æ“ä½œæ—¶ï¼Œwhereæ¡ä»¶ä¸­éœ€è¦ç¡®è®¤å½“å‰ <code>version</code> æ˜¯å¦ç­‰äºä¹‹å‰æŸ¥å‡ºæ¥çš„</p><p> . è‹¥ç­‰äºï¼Œåˆ™æ›´æ–°åº“å­˜æ“ä½œæˆåŠŸ</p><p> . å¦åˆ™ï¼Œåˆ™è¯´æ˜å­˜åœ¨å¹¶å‘æ“ä½œï¼Œè¯¥æ¡åº“å­˜æ•°æ®å·²è¢«ä¿®æ”¹ã€‚ç»§ç»­æŸ¥è¯¢é‡è¯•</p> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">UPDATE</span> db_stock <span class="hljs-keyword">SET</span> count<span class="hljs-operator">=</span><span class="hljs-number">4999</span>, version<span class="hljs-operator">=</span>version<span class="hljs-operator">+</span><span class="hljs-number">1</span> <span class="hljs-keyword">WHERE</span> id<span class="hljs-operator">=</span><span class="hljs-number">1</span> <span class="hljs-keyword">AND</span> version<span class="hljs-operator">=</span><span class="hljs-number">0</span>;<br></code></pre></td></tr></table></figure></li></ol><h4 id="1-5-2-ä»£ç å®ç°"><a href="#1-5-2-ä»£ç å®ç°" class="headerlink" title="1.5.2 ä»£ç å®ç°"></a>1.5.2 ä»£ç å®ç°</h4><p>åœ¨ Stock å®ä½“ç±»ä¸­æ·»åŠ  <code>version</code> å±æ€§ï¼Œç±»å‹ä¸ºInteger</p><p>ä¿®æ”¹ StcokService ä¸­çš„deduct()æ–¹æ³•</p><h5 id="ç¬¬ä¸€ç‰ˆä»£ç "><a href="#ç¬¬ä¸€ç‰ˆä»£ç " class="headerlink" title="ç¬¬ä¸€ç‰ˆä»£ç "></a>ç¬¬ä¸€ç‰ˆä»£ç </h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Transactional</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deduct</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// æŸ¥è¯¢åº“å­˜ä¿¡æ¯å¹¶é”å®š</span><br>    List&lt;Stock&gt; stocks = <span class="hljs-built_in">this</span>.stockMapper.selectList(<span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryWrapper</span>&lt;Stock&gt;().eq(<span class="hljs-string">&quot;product_code&quot;</span>, <span class="hljs-string">&quot;1001&quot;</span>));<br>    <span class="hljs-comment">// å–ç¬¬ä¸€ä¸ªåº“å­˜</span><br>    <span class="hljs-type">Stock</span> <span class="hljs-variable">stock</span> <span class="hljs-operator">=</span> stocks.get(<span class="hljs-number">0</span>);<br>    <span class="hljs-comment">// åˆ¤æ–­åº“å­˜æ˜¯å¦å……è¶³</span><br>    <span class="hljs-keyword">if</span> (stock != <span class="hljs-literal">null</span> &amp;&amp; stock.getCount() &gt; <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-comment">// æ‰£å‡åº“å­˜</span><br>        stock.setCount(stock.getCount() - <span class="hljs-number">1</span>);<br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">version</span> <span class="hljs-operator">=</span> stock.getVersion();<br>        stock.setVersion(version + <span class="hljs-number">1</span>);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">update</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.stockMapper.update(stock, <span class="hljs-keyword">new</span> <span class="hljs-title class_">UpdateWrapper</span>&lt;Stock&gt;().eq(<span class="hljs-string">&quot;id&quot;</span>, stock.getId()).eq(<span class="hljs-string">&quot;version&quot;</span>, version));<br>        <span class="hljs-keyword">if</span> (update == <span class="hljs-number">0</span>) &#123;<br>            deduct();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>é‡‡ç”¨JMeterå‹åŠ›æµ‹è¯•å·¥å…·æµ‹è¯•æ—¶ï¼ŒæŠ¥é”™</p><p>é”™è¯¯åˆ†æï¼š</p><ol><li><p>stack over flowï¼šæ ˆæº¢å‡º</p><p> <img src="https://lty-image-bed.oss-cn-shenzhen.aliyuncs.com/blog/stackoverflow.png"></p><p> è¿™æ˜¯ç”±äºé«˜å¹¶å‘çš„æƒ…å†µä¸‹ï¼Œæ›´æ–°å¤±è´¥ç‡å¾ˆé«˜ï¼Œå°±ä¼šä¸æ–­åœ°é€’å½’è°ƒç”¨deductæ–¹æ³•ï¼Œå¯¼è‡´æ ˆæº¢å‡ºã€‚</p><p> è§£å†³æ–¹æ¡ˆï¼šè°ƒç”¨çº¿ç¨‹ç±»ä¸­çš„sleepæ–¹æ³•ï¼Œæš‚æ—¶ç¡çœ ï¼Œé¿å¼€å¹¶å‘é«˜å³°</p></li><li><p>è¿æ¥è¶…æ—¶é”™è¯¯</p><p> <img src="https://lty-image-bed.oss-cn-shenzhen.aliyuncs.com/blog/timeout.png"></p><p> è¿™æ˜¯ç”±äºå¼€å¯äº†äº‹åŠ¡æ³¨è§£ï¼Œä¸ºæ‰‹åŠ¨äº‹åŠ¡ã€‚</p><p> å½“æ‰§è¡Œåˆ°æ›´æ–°æ“ä½œæ—¶ï¼Œä¼šå¯¹æ•°æ®è¿›è¡ŒåŠ é”ã€‚è€Œå½“å‰è¯·æ±‚æ— æ³•æ›´æ–°ï¼Œå°±ä¼šä¸€ç›´è°ƒç”¨deductæ–¹æ³•ï¼Œå¹¶ä¸€ç›´æŒæœ‰é”ã€‚å…¶ä»–è¯·æ±‚è¿›å…¥ä»£ç ï¼Œä¼šè¿›å…¥é˜»å¡çŠ¶æ€ï¼Œç›´è‡³è¿æ¥è¶…æ—¶ã€‚</p><p> è€Œå…³é—­äº†äº‹åŠ¡æ³¨è§£ï¼Œä¸ºè‡ªåŠ¨äº‹åŠ¡ã€‚è‹¥æ›´æ–°æ“ä½œæ‰§è¡Œå¤±è´¥ï¼Œä¼šæ”¾å¼ƒé”ã€‚</p></li></ol><h5 id="æœ€ç»ˆä»£ç "><a href="#æœ€ç»ˆä»£ç " class="headerlink" title="æœ€ç»ˆä»£ç "></a>æœ€ç»ˆä»£ç </h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deduct</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// æŸ¥è¯¢åº“å­˜ä¿¡æ¯å¹¶é”å®š</span><br>    List&lt;Stock&gt; stocks = <span class="hljs-built_in">this</span>.stockMapper.selectList(<span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryWrapper</span>&lt;Stock&gt;().eq(<span class="hljs-string">&quot;product_code&quot;</span>, <span class="hljs-string">&quot;1001&quot;</span>));<br>    <span class="hljs-comment">// å–ç¬¬ä¸€ä¸ªåº“å­˜</span><br>    <span class="hljs-type">Stock</span> <span class="hljs-variable">stock</span> <span class="hljs-operator">=</span> stocks.get(<span class="hljs-number">0</span>);<br>    <span class="hljs-comment">// åˆ¤æ–­åº“å­˜æ˜¯å¦å……è¶³</span><br>    <span class="hljs-keyword">if</span> (stock != <span class="hljs-literal">null</span> &amp;&amp; stock.getCount() &gt; <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-comment">// æ‰£å‡åº“å­˜</span><br>        stock.setCount(stock.getCount() - <span class="hljs-number">1</span>);<br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">version</span> <span class="hljs-operator">=</span> stock.getVersion();<br>        stock.setVersion(version + <span class="hljs-number">1</span>);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">update</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.stockMapper.update(stock, <span class="hljs-keyword">new</span> <span class="hljs-title class_">UpdateWrapper</span>&lt;Stock&gt;().eq(<span class="hljs-string">&quot;id&quot;</span>, stock.getId()).eq(<span class="hljs-string">&quot;version&quot;</span>, version));<br>        <span class="hljs-keyword">if</span> (update == <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                Thread.sleep(<span class="hljs-number">20</span>);<br>            &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>            &#125;<br>            deduct();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>é€šè¿‡JMeteræµ‹è¯•ï¼Œæœ€ç»ˆåº“å­˜å‡ä¸º0</p><h4 id="1-5-3-ä¼˜ç¼ºç‚¹"><a href="#1-5-3-ä¼˜ç¼ºç‚¹" class="headerlink" title="1.5.3 ä¼˜ç¼ºç‚¹"></a>1.5.3 ä¼˜ç¼ºç‚¹</h4><p>æ¨èé˜…è¯»ï¼š<a href="https://www.cnblogs.com/qjjazry/p/6581568.html">Javaå¹¶å‘é—®é¢˜â€“ä¹è§‚é”ä¸æ‚²è§‚é”ä»¥åŠä¹è§‚é”çš„ä¸€ç§å®ç°æ–¹å¼-CAS</a></p><p>ä¼˜ç‚¹ï¼š</p><ol><li>ä¹è§‚é”åœ¨ç«äº‰ä¸æ¿€çƒˆæ—¶ï¼Œè¾ƒæ‚²è§‚é”æ›´å…·æœ‰ä¼˜åŠ¿ï¼Œå› ä¸ºæ‚²è§‚é”ä¼šé”ä½ä»£ç å—ï¼Œå¹¶ä¸”åŠ é”ã€é‡Šæ”¾é”ã€çº¿ç¨‹ä¸Šä¸‹æ–‡å‡å ç”¨é¢å¤–èµ„æºã€‚</li></ol><p>ç¼ºç‚¹ï¼š</p><ol><li><p>åœ¨é«˜å¹¶å‘æƒ…å†µä¸‹ï¼Œä¹è§‚é”çš„æ€§èƒ½ä¸å¦‚æ‚²è§‚é”ï¼Œå› ä¸ºé‡è¯•æ¬¡æ•°è¿‡å¤šã€‚</p></li><li><p>ä¹è§‚é”å­˜åœ¨ABAé—®é¢˜</p><p> . åœ¨æŸ¥è¯¢ä¸æ›´æ–°çš„ä¸­é—´ï¼Œ<code>X</code> å€¼è¢«å¤šæ¬¡æ›´æ”¹ï¼Œä½†æœ€ç»ˆåˆå›åˆ°äº†æŸ¥è¯¢æ—¶çš„å€¼</p></li><li><p>è¯»å†™åˆ†ç¦»æƒ…å†µä¸‹ï¼Œä¹è§‚é”ä¸å¯é </p><p> ä»æ•°æ®åº“ä¸ä¸»æ•°æ®åº“è¿›è¡Œç½‘ç»œä¼ è¾“ï¼Œå…·æœ‰è¾ƒå¤§æ—¶å»¶ï¼Œå¯èƒ½ä¸»æ•°æ®åº“å†…æ˜¯æ–°æ•°æ®ï¼Œè€Œä»æ•°æ®åº“å†…æ˜¯æ—§æ•°æ®ï¼Œä¹è§‚é”ä¸‹ä¼šé€ æˆä»æ•°æ®åº“ä¸æ–­åœ°é‡è¯•ï¼Œ</p></li></ol><h3 id="1-6-MySQLé”æ€»ç»“"><a href="#1-6-MySQLé”æ€»ç»“" class="headerlink" title="1.6 MySQLé”æ€»ç»“"></a>1.6 MySQLé”æ€»ç»“</h3><p>æ€§èƒ½ï¼šå•SQLè¯­å¥ &gt; æ‚²è§‚é” &gt; JVMé” &gt; ä¹è§‚é”</p><ul><li><p>è¿½æ±‚æè‡´æ€§èƒ½ã€ä¸šåŠ¡åœºæ™¯ç®€å•ã€æ— éœ€è®°å½•æ•°æ®æ›´æ–°å‰åå˜åŒ–çš„æƒ…å†µä¸‹ -&gt; å•SQLè¯­å¥</p></li><li><p>å¹¶å‘é‡ä½ã€è¯»å¤šäºå†™ã€ç«äº‰ä¸æ¿€çƒˆçš„æƒ…å†µä¸‹ -&gt; ä¹è§‚é”</p></li><li><p>å¹¶å‘é‡é«˜ã€å†²çªæ¿€çƒˆ -&gt; æ‚²è§‚é”</p></li><li><p>ä¸æ¨èJVMé”</p></li></ul><h3 id="1-7-Redisé”"><a href="#1-7-Redisé”" class="headerlink" title="1.7 Redisé”"></a>1.7 Redisé”</h3><h4 id="1-7-1-å¹¶å‘é—®é¢˜å¼•å…¥"><a href="#1-7-1-å¹¶å‘é—®é¢˜å¼•å…¥" class="headerlink" title="1.7.1 å¹¶å‘é—®é¢˜å¼•å…¥"></a>1.7.1 å¹¶å‘é—®é¢˜å¼•å…¥</h4><ol><li><p>åœ¨Mavenå·¥ç¨‹pom.xmlæ–‡ä»¶ä¸­åŠ å…¥ä¾èµ–</p> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>åœ¨application.propertiesæ–‡ä»¶ä¸­é…ç½®redis</p> <figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">spring.redis.host</span>=<span class="hljs-string">localhost</span><br><span class="hljs-attr">spring.redis.password</span>=<span class="hljs-string">123456</span><br></code></pre></td></tr></table></figure></li><li><p>æ›´æ”¹ StockServiceç±»ä¸­çš„deductæ–¹æ³•</p><p> é‡‡ç”¨StringRedisTemplateæ›´åŠ æ–¹ä¾¿</p><p> è€ŒRedisTemplateéœ€è¦æ‰‹åŠ¨è®¾ç½®åºåˆ—åŒ–å™¨</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Autowired</span><br><span class="hljs-keyword">private</span> StringRedisTemplate redisTemplate;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deduct</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// æŸ¥è¯¢åº“å­˜ä¿¡æ¯</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">stock</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.redisTemplate.opsForValue().get(<span class="hljs-string">&quot;stock&quot;</span>);<br>    <span class="hljs-comment">// åˆ¤æ–­åº“å­˜æ˜¯å¦å……è¶³</span><br>    <span class="hljs-keyword">if</span> (stock != <span class="hljs-literal">null</span> &amp;&amp; stock.length() != <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">st</span> <span class="hljs-operator">=</span> Integer.valueOf(stock);<br>        <span class="hljs-keyword">if</span> (st &gt; <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-comment">// æ‰£å‡åº“å­˜</span><br>            <span class="hljs-built_in">this</span>.redisTemplate.opsForValue().set(<span class="hljs-string">&quot;stock&quot;</span>, String.valueOf(--st));<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>åœ¨redis-cliå‘½ä»¤çª—å£ä¸­ï¼Œè®¾ç½®åº“å­˜ï¼š<code>set stock 5000</code></p></li></ol><p>å¯åŠ¨SpringBootä¸å‹åŠ›æµ‹è¯•å·¥å…·JMeterï¼Œæœ€ç»ˆåº“å­˜ä¸ä¸º0ï¼Œå‡ºç°å¹¶å‘é—®é¢˜ã€‚</p><h4 id="1-7-2-è§£å†³æ–¹æ¡ˆ"><a href="#1-7-2-è§£å†³æ–¹æ¡ˆ" class="headerlink" title="1.7.2 è§£å†³æ–¹æ¡ˆ"></a>1.7.2 è§£å†³æ–¹æ¡ˆ</h4><ol><li><p>JVMæœ¬åœ°é”æœºåˆ¶ï¼ˆè¾ƒç®€å•ä¸åšæ¼”ç¤ºï¼‰</p></li><li><p>Redisä¹è§‚é”ï¼š<code>watch</code> <code>multi</code> <code>exec</code></p><ol><li><p>watchï¼šç›‘æ§ä¸€ä¸ªæˆ–å¤šä¸ªkeyçš„å€¼ï¼Œå¦‚æœexecæ‰§è¡Œä¹‹å‰ï¼Œå¦‚æœkeyçš„å€¼å‘ç”Ÿå˜åŒ–ï¼Œåˆ™å–æ¶ˆäº‹åŠ¡æ‰§è¡Œã€‚</p></li><li><p>multiï¼šå¼€å¯äº‹åŠ¡</p></li><li><p>execï¼šæ‰§è¡Œäº‹åŠ¡</p></li></ol></li></ol><h4 id="1-7-3-ä»£ç å®ç°"><a href="#1-7-3-ä»£ç å®ç°" class="headerlink" title="1.7.3 ä»£ç å®ç°"></a>1.7.3 ä»£ç å®ç°</h4><p>ä¿®æ”¹StockServiceä¸­çš„deductæ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deduct</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-built_in">this</span>.redisTemplate.execute(<span class="hljs-keyword">new</span> <span class="hljs-title class_">SessionCallback</span>&lt;Object&gt;() &#123;<br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">execute</span><span class="hljs-params">(RedisOperations operations)</span> <span class="hljs-keyword">throws</span> DataAccessException &#123;<br>            operations.watch(<span class="hljs-string">&quot;stock&quot;</span>);<br>            <span class="hljs-comment">// æŸ¥è¯¢åº“å­˜ä¿¡æ¯</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">stock</span> <span class="hljs-operator">=</span> operations.opsForValue().get(<span class="hljs-string">&quot;stock&quot;</span>).toString();<br>            <span class="hljs-comment">// åˆ¤æ–­åº“å­˜æ˜¯å¦å……è¶³</span><br>            <span class="hljs-keyword">if</span> (stock != <span class="hljs-literal">null</span> &amp;&amp; stock.length() != <span class="hljs-number">0</span>) &#123;<br>                <span class="hljs-type">Integer</span> <span class="hljs-variable">st</span> <span class="hljs-operator">=</span> Integer.valueOf(stock);<br>                <span class="hljs-keyword">if</span> (st &gt; <span class="hljs-number">0</span>) &#123;<br>                    <span class="hljs-comment">// multi</span><br>                    operations.multi();<br>                    <span class="hljs-comment">// æ‰£å‡åº“å­˜</span><br>                    operations.opsForValue().set(<span class="hljs-string">&quot;stock&quot;</span>, String.valueOf(--st));<br>                    <span class="hljs-comment">// exec æ‰§è¡Œäº‹åŠ¡</span><br>                    <span class="hljs-type">List</span> <span class="hljs-variable">exec</span> <span class="hljs-operator">=</span> operations.exec();<br>                    <span class="hljs-comment">// å¦‚æœäº‹åŠ¡æ‰§è¡Œç»“æœä¸ºç©ºï¼Œä»£è¡¨æ“ä½œå¤±è´¥ï¼Œé‡è¯•</span><br>                    <span class="hljs-keyword">if</span> (exec == <span class="hljs-literal">null</span> || exec.size() == <span class="hljs-number">0</span>) &#123;<br>                        <span class="hljs-keyword">try</span> &#123;<br>                            Thread.sleep(<span class="hljs-number">40</span>);<br>                        &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>                        &#125;<br>                        deduct();<br>                    &#125;<br>                    <span class="hljs-keyword">return</span> exec;<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>    &#125;);<br>&#125;<br></code></pre></td></tr></table></figure><p>é‡‡ç”¨JMeterè¿›è¡Œå¹¶å‘æµ‹è¯•åï¼Œåº“å­˜å‡ä¸º0ï¼Œè§£å†³äº†å¹¶å‘é—®é¢˜</p><p>ä½†æ˜¯ååé‡æ€§èƒ½è¾ƒä½ï¼Œç”šè‡³å¯èƒ½ç”±äºç”µè„‘æ€§èƒ½é—®é¢˜ï¼Œå‡ºç°è¿æ¥ä¸å¤Ÿç”¨çš„æƒ…å†µã€‚</p><h2 id="2-Redisåˆ†å¸ƒå¼é”"><a href="#2-Redisåˆ†å¸ƒå¼é”" class="headerlink" title="2. Redisåˆ†å¸ƒå¼é”"></a>2. Redisåˆ†å¸ƒå¼é”</h2><h3 id="2-1-å®ç°æ€è·¯"><a href="#2-1-å®ç°æ€è·¯" class="headerlink" title="2.1 å®ç°æ€è·¯"></a>2.1 å®ç°æ€è·¯</h3><p>å€ŸåŠ©äºredisä¸­çš„å‘½ä»¤ <code>setnx(key, value)</code></p><p>è®¾ç½® <code>key</code> ä¸ºlock</p><ul><li>è‹¥ <code>lock</code> å­˜åœ¨ï¼Œåˆ™è¯´æ˜æœ‰å…¶ä»–è¯·æ±‚å·²ç»è·å–åˆ°é”ï¼Œåˆ™å½“å‰è¯·æ±‚é‡å¤é‡è¯•</li><li>è‹¥ <code>lock</code> ä¸å­˜åœ¨ï¼Œåˆ™è¯´æ˜å½“å‰é”æœªè¢«è·å–ï¼Œå½“å‰è¯·æ±‚è·å–é”æˆåŠŸï¼Œç»§ç»­æ‰§è¡Œä¸šåŠ¡æ“ä½œ</li><li>è®¾ç½® <code>lock</code> ä¹‹åï¼Œåªæœ‰ä¸€ä¸ªè¯·æ±‚å¯ä»¥è·å–åˆ°é”å¹¶æ‰§è¡ŒæˆåŠŸï¼Œå…¶ä»–è¯·æ±‚åªèƒ½ç­‰å¾…</li></ul><p><img src="https://lty-image-bed.oss-cn-shenzhen.aliyuncs.com/blog/1606626611922.png"></p><h3 id="2-2-åŸºæœ¬ä»£ç å®ç°"><a href="#2-2-åŸºæœ¬ä»£ç å®ç°" class="headerlink" title="2.2 åŸºæœ¬ä»£ç å®ç°"></a>2.2 åŸºæœ¬ä»£ç å®ç°</h3><h4 id="2-2-1-é€’å½’ç‰ˆæœ¬"><a href="#2-2-1-é€’å½’ç‰ˆæœ¬" class="headerlink" title="2.2.1 é€’å½’ç‰ˆæœ¬"></a>2.2.1 é€’å½’ç‰ˆæœ¬</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deduct</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// åŠ é”setnx</span><br>    <span class="hljs-type">Boolean</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.redisTemplate.opsForValue().setIfAbsent(<span class="hljs-string">&quot;lock&quot;</span>, <span class="hljs-string">&quot;123&quot;</span>);<br>    <span class="hljs-comment">// é€’å½’è°ƒç”¨</span><br>    <span class="hljs-keyword">if</span> (!lock) &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            Thread.sleep(<span class="hljs-number">50</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>        &#125;<br>        deduct();<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">// æŸ¥è¯¢åº“å­˜ä¿¡æ¯</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">stock</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue().get(<span class="hljs-string">&quot;stock&quot;</span>).toString();<br>            <span class="hljs-comment">// åˆ¤æ–­åº“å­˜æ˜¯å¦å……è¶³</span><br>            <span class="hljs-keyword">if</span> (stock != <span class="hljs-literal">null</span> &amp;&amp; stock.length() != <span class="hljs-number">0</span>) &#123;<br>                <span class="hljs-type">Integer</span> <span class="hljs-variable">st</span> <span class="hljs-operator">=</span> Integer.valueOf(stock);<br>                <span class="hljs-keyword">if</span> (st &gt; <span class="hljs-number">0</span>) &#123;<br>                    <span class="hljs-comment">// æ‰£å‡åº“å­˜</span><br>                    redisTemplate.opsForValue().set(<span class="hljs-string">&quot;stock&quot;</span>, String.valueOf(--st));<br>                &#125;<br>            &#125;<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-comment">// è§£é”</span><br>            <span class="hljs-built_in">this</span>.redisTemplate.delete(<span class="hljs-string">&quot;lock&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="2-2-2-å¾ªç¯ç‰ˆæœ¬"><a href="#2-2-2-å¾ªç¯ç‰ˆæœ¬" class="headerlink" title="2.2.2 å¾ªç¯ç‰ˆæœ¬"></a>2.2.2 å¾ªç¯ç‰ˆæœ¬</h4><p>æ³¨æ„ï¼šå³ä½¿ä¸é‡‡ç”¨é€’å½’ç‰ˆæœ¬ï¼Œåœ¨é‡è¯•è·å–é”çš„è¿‡ç¨‹ä¸­ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨çº¿ç¨‹ç¡çœ ï¼Œè¿™æ ·å¯ä»¥å‡å°é”çš„ç«äº‰å‹åŠ›ï¼Œæå‡æ€§èƒ½</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deduct</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// åŠ é”setnx</span><br>    <span class="hljs-keyword">while</span> (!<span class="hljs-built_in">this</span>.redisTemplate.opsForValue().setIfAbsent(<span class="hljs-string">&quot;lock&quot;</span>, <span class="hljs-string">&quot;123&quot;</span>)) &#123;<br>        <span class="hljs-comment">// å¾ªç¯é‡è¯•</span><br>        <span class="hljs-keyword">try</span> &#123;<br>            Thread.sleep(<span class="hljs-number">50</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-comment">// æŸ¥è¯¢åº“å­˜ä¿¡æ¯</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">stock</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue().get(<span class="hljs-string">&quot;stock&quot;</span>).toString();<br>        <span class="hljs-comment">// åˆ¤æ–­åº“å­˜æ˜¯å¦å……è¶³</span><br>        <span class="hljs-keyword">if</span> (stock != <span class="hljs-literal">null</span> &amp;&amp; stock.length() != <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-type">Integer</span> <span class="hljs-variable">st</span> <span class="hljs-operator">=</span> Integer.valueOf(stock);<br>            <span class="hljs-keyword">if</span> (st &gt; <span class="hljs-number">0</span>) &#123;<br>                <span class="hljs-comment">// æ‰£å‡åº“å­˜</span><br>                redisTemplate.opsForValue().set(<span class="hljs-string">&quot;stock&quot;</span>, String.valueOf(--st));<br>            &#125;<br>        &#125;<br>    &#125; <span class="hljs-keyword">finally</span> &#123;<br>        <span class="hljs-comment">// è§£é”</span><br>        <span class="hljs-built_in">this</span>.redisTemplate.delete(<span class="hljs-string">&quot;lock&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-3-é—®é¢˜è§£å†³"><a href="#2-3-é—®é¢˜è§£å†³" class="headerlink" title="2.3 é—®é¢˜è§£å†³"></a>2.3 é—®é¢˜è§£å†³</h3><h4 id="2-3-1-æ­»é”ä¸åŸå­æ€§"><a href="#2-3-1-æ­»é”ä¸åŸå­æ€§" class="headerlink" title="2.3.1 æ­»é”ä¸åŸå­æ€§"></a>2.3.1 æ­»é”ä¸åŸå­æ€§</h4><p>åœ¨æŸä¸€è¯·æ±‚è·å–åˆ°locké”ä¹‹åï¼Œå½“å‰æœåŠ¡å™¨çªç„¶å®•æœºï¼Œé€ æˆè¯¥é”æ— æ³•å¾—åˆ°é‡Šæ”¾ï¼Œæ­¤æ—¶å…¶ä»–è¯·æ±‚ä»ç„¶å¤„äºä¸æ–­åœ°é€’å½’æˆ–å¾ªç¯é‡è¯•è·å–é”ï¼Œé€ æˆæ­»å¾ªç¯ã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼šè·å–åˆ°lockä¹‹åï¼Œä¸ºlockè®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œ<code>expire</code> æŒ‡ä»¤</p><p>ä½†æ˜¯ï¼šå¯èƒ½åœ¨ è·å–lock ä¸ ä¸ºlockè®¾ç½®è¿‡æœŸæ—¶é—´ ä¹‹é—´ï¼ŒæœåŠ¡å™¨å‘ç”Ÿå®•æœºã€‚</p><p>å› æ­¤ï¼Œéœ€è¦ç¡®ä¿ä¸¤ä¸ªæ“ä½œçš„åŸå­æ€§ï¼šé‡‡ç”¨å¦‚ä¸‹æŒ‡ä»¤ï¼Œå°†å¤šä¸ªæ“ä½œå¤åˆåˆ°ä¸€ä¸ªæŒ‡ä»¤ä¸­</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">set</span> lock <span class="hljs-number">123</span> ex <span class="hljs-number">20</span> nx<br></code></pre></td></tr></table></figure><p>ä¿®æ”¹åŠ é”éƒ¨åˆ†çš„ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">while</span> (!<span class="hljs-built_in">this</span>.redisTemplate.opsForValue().setIfAbsent(<span class="hljs-string">&quot;lock&quot;</span>, <span class="hljs-string">&quot;123&quot;</span>, <span class="hljs-number">3</span>, TimeUnit.SECONDS)) &#123;<br>    <span class="hljs-comment">// å¾ªç¯é‡è¯•</span><br>    <span class="hljs-keyword">try</span> &#123;<br>        Thread.sleep(<span class="hljs-number">50</span>);<br>    &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="2-3-2-é˜²è¯¯åˆ "><a href="#2-3-2-é˜²è¯¯åˆ " class="headerlink" title="2.3.2 é˜²è¯¯åˆ "></a>2.3.2 é˜²è¯¯åˆ </h4><p>å‡è®¾å¤„ç†è¯·æ±‚çš„æ—¶é•¿å¤§äºé”çš„æœ‰æ•ˆæ—¶é—´ï¼Œå½“æŸä¸€è¯·æ±‚è¿˜æœªæ‰§è¡Œå®Œå½“å‰æ“ä½œæ—¶ï¼ŒRedisé”ä¾¿ä¼šè‡ªåŠ¨é‡Šæ”¾æ‰ï¼ˆåˆ é™¤lockï¼‰ï¼Œç­‰åˆ°è¯¥è¯·æ±‚æ‰§è¡Œå®Œå½“å‰æ“ä½œåï¼Œè¿˜ä¼šæ‰‹åŠ¨åœ°å°†Redisé”é‡Šæ”¾æ‰ã€‚æ­¤æ—¶ï¼Œå¯èƒ½åˆ«çš„è¯·æ±‚å·²ç»è·å–åˆ°äº†é”ï¼Œé‚£ä¹ˆè¯¥é”å¾ˆæœ‰å¯èƒ½è¢«è¯¥è¯·æ±‚è¯¯åˆ æ‰ã€‚</p><p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p><p>ä¸ºäº†é˜²æ­¢å‡ºç°è¿™ä¸€æƒ…å†µï¼Œéœ€è¦ä¸ºå½“å‰é”è®¾ç½®å”¯ä¸€æ ‡è¯†UUIDï¼Œä½œä¸ºé”çš„å€¼ã€‚</p><p>åœ¨åˆ é™¤é”ä¹‹å‰ï¼Œå…ˆåˆ¤æ–­å½“å‰é”æ˜¯å¦å±äºè‡ªå·±ï¼Œç„¶åå†è¿›è¡Œåˆ é™¤ã€‚</p><p>ä¿®æ”¹ StockService çš„ deductæ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deduct</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">uuid</span> <span class="hljs-operator">=</span> UUID.randomUUID().toString();<br>    <span class="hljs-comment">// åŠ é”setnx</span><br>    <span class="hljs-keyword">while</span> (!<span class="hljs-built_in">this</span>.redisTemplate.opsForValue().setIfAbsent(<span class="hljs-string">&quot;lock&quot;</span>, uuid, <span class="hljs-number">3</span>, TimeUnit.SECONDS)) &#123;<br>        <span class="hljs-comment">// å¾ªç¯é‡è¯•</span><br>        <span class="hljs-keyword">try</span> &#123;<br>            Thread.sleep(<span class="hljs-number">50</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-comment">// æŸ¥è¯¢åº“å­˜ä¿¡æ¯</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">stock</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue().get(<span class="hljs-string">&quot;stock&quot;</span>).toString();<br>        <span class="hljs-comment">// åˆ¤æ–­åº“å­˜æ˜¯å¦å……è¶³</span><br>        <span class="hljs-keyword">if</span> (stock != <span class="hljs-literal">null</span> &amp;&amp; stock.length() != <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-type">Integer</span> <span class="hljs-variable">st</span> <span class="hljs-operator">=</span> Integer.valueOf(stock);<br>            <span class="hljs-keyword">if</span> (st &gt; <span class="hljs-number">0</span>) &#123;<br>                <span class="hljs-comment">// æ‰£å‡åº“å­˜</span><br>                redisTemplate.opsForValue().set(<span class="hljs-string">&quot;stock&quot;</span>, String.valueOf(--st));<br>            &#125;<br>        &#125;<br>    &#125; <span class="hljs-keyword">finally</span> &#123;<br>        <span class="hljs-comment">// å…ˆåˆ¤æ–­ï¼Œå†è§£é”</span><br>        <span class="hljs-keyword">if</span> (StringUtils.equals(<span class="hljs-built_in">this</span>.redisTemplate.opsForValue().get(<span class="hljs-string">&quot;lock&quot;</span>), uuid)) &#123;<br>            <span class="hljs-built_in">this</span>.redisTemplate.delete(<span class="hljs-string">&quot;lock&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ¤æ–­ä¸åˆ é™¤æ“ä½œéœ€è¦ä¿è¯åŸå­æ€§ï¼Œå¦åˆ™è¿˜ä¼šå‡ºç°å¹¶å‘é—®é¢˜</p><ul><li>åˆšåˆ¤æ–­å®Œè¯¥é”æ˜¯è‡ªå·±çš„ï¼Œè¿˜æ²¡è¿›è¡Œåˆ é™¤ï¼Œé”å°±åˆ°æœŸè‡ªåŠ¨é‡Šæ”¾ä¸”è¢«å…¶ä»–è¯·æ±‚è·å–ï¼Œæ­¤æ—¶ä¼šé€ æˆè¯¯åˆ æ“ä½œ</li></ul><p>å€ŸåŠ© <code>lua</code> è„šæœ¬å®ç°åŸå­æ€§æ“ä½œï¼š<a href="https://www.runoob.com/lua/lua-tutorial.html">Lua æ•™ç¨‹ | èœé¸Ÿæ•™ç¨‹</a></p><p>redis-cliæ”¯æŒluaè„šæœ¬ï¼Œå¯ä»¥ä¸€æ¬¡æ€§ç»™rediså‘é€å¤šä¸ªæŒ‡ä»¤ã€‚</p><ul><li>redisä¸ºå•çº¿ç¨‹ï¼Œæ‰§è¡ŒæŒ‡ä»¤éµå®ˆ <code>one-by-one</code> è§„åˆ™</li></ul><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs inform7">EVAL script numkeys <span class="hljs-comment">[key <span class="hljs-comment">[key ...]</span>]</span> <span class="hljs-comment">[arg <span class="hljs-comment">[arg ...]</span>]</span><br></code></pre></td></tr></table></figure><p>åˆ é™¤LUAè„šæœ¬ï¼š</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">if</span> redis.call(<span class="hljs-string">&#x27;get&#x27;</span>, KEYS[<span class="hljs-number">1</span>]) == ARGV[<span class="hljs-number">1</span>] <span class="hljs-keyword">then</span> <span class="hljs-keyword">return</span> redis.call(<span class="hljs-string">&#x27;del&#x27;</span>, KEYS[<span class="hljs-number">1</span>]) <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-number">0</span> <span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p>æ›´æ”¹ä»£ç ä¸­finallyéƒ¨åˆ†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// å…ˆåˆ¤æ–­ï¼Œå†è§£é”</span><br><span class="hljs-type">String</span> <span class="hljs-variable">script</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;if redis.call(&#x27;get&#x27;, KEYS[1]) == ARGV[1] &quot;</span> +<br>        <span class="hljs-string">&quot;then return redis.call(&#x27;del&#x27;, KEYS[1]) &quot;</span> +<br>        <span class="hljs-string">&quot;else return 0 &quot;</span> +<br>        <span class="hljs-string">&quot;end&quot;</span>;<br><span class="hljs-built_in">this</span>.redisTemplate.execute(<span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultRedisScript</span>&lt;&gt;(script, Boolean.class), Arrays.asList(<span class="hljs-string">&quot;lock&quot;</span>), uuid);<br></code></pre></td></tr></table></figure><h4 id="2-3-3-å¯é‡å…¥æ€§"><a href="#2-3-3-å¯é‡å…¥æ€§" class="headerlink" title="2.3.3 å¯é‡å…¥æ€§"></a>2.3.3 å¯é‡å…¥æ€§</h4><p>ä¹‹å‰çš„åŠ é”æŒ‡ä»¤é‡‡ç”¨çš„æ˜¯Redisä¸­çš„ <code>setnx</code> æŒ‡ä»¤ï¼Œå³é”çš„åå­—å›ºå®šä¸ºlockï¼ˆé”®å€¼å›ºå®šï¼‰ï¼Œä¸€æ—¦åŠ é”æˆåŠŸï¼ˆé”®è®¾ç½®æˆåŠŸï¼‰ï¼Œè¯¥çº¿ç¨‹ä¾¿æ— æ³•ç»§ç»­åŠ é”ã€‚å¦‚ä¸‹å³ä¸ºå…·ä½“æƒ…æ™¯ä»£ç ï¼š</p><p>æŸçº¿ç¨‹æ‰§è¡Œaæ–¹æ³•ï¼Œè·å–åˆ°é”ä¹‹åï¼Œå…¶åˆéœ€è¦ç»§ç»­æ‰§è¡Œbæ–¹æ³•ï¼Œéœ€è¦ç»§ç»­è·å–é”ã€‚ä½†æ­¤æ—¶é”å·²ç»è¢«è‡ªå·±å æœ‰ï¼Œç›¸å½“äºè‡ªå·±å’Œè‡ªå·±äº§ç”Ÿäº†æ­»é”ï¼Œè¿™æ˜¯ä¸å¯é‡å…¥é”å¸¦æ¥çš„é—®é¢˜ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">a</span><span class="hljs-params">()</span> &#123;<br>    b();<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">b</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// pass</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>è§£å†³æ–¹æ¡ˆï¼šå¯é‡å…¥é”</strong></p><p>å¯é‡å…¥é”å¯ï¼šå½“æŸä¸€çº¿ç¨‹è·å¾—é”ä¹‹åï¼Œéœ€è¦å†æ¬¡æ‰§è¡ŒåŠ é”æ–¹æ³•æ—¶ï¼ˆé”å¯¹è±¡ä¸ºåŒä¸€ä¸ªï¼‰ï¼Œå°†åŠ é”æ¬¡æ•°åŠ 1å³å¯ã€‚æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œé‡Šæ”¾é”æ—¶å¯¹åŠ é”æ¬¡æ•°å‡1ã€‚å½“åŠ é”æ¬¡æ•°ç­‰äº0æ—¶ï¼Œè¯´æ˜è¯¥é”å·²ç»è¢«å®Œå…¨é‡Šæ”¾ã€‚</p><p>å½“å¯é‡å…¥é”éœ€è¦åœ¨åˆ†å¸ƒå¼ç¯å¢ƒå®ç°æ—¶ï¼Œéœ€è¦ç»Ÿè®¡åŠ é”æ¬¡æ•°ã€‚</p><p><strong>å®ç°æ–¹æ¡ˆï¼šRedis Hash + luaè„šæœ¬</strong></p><p>åŠ é” -&gt; åˆ¤æ–­é”æ˜¯å¦å­˜åœ¨ï¼š<code>exists</code></p><ul><li><p>è‹¥ä¸å­˜åœ¨ï¼Œåˆ™ç›´æ¥åˆ›å»ºé”å¹¶è·å–ï¼š<code>hset key field value</code></p></li><li><p>è‹¥å­˜åœ¨ï¼Œåˆ™åˆ¤æ–­å½“å‰é”æ˜¯å¦å±äºè‡ªå·±ï¼š<code>hexists</code></p><ul><li><p>è‹¥å±äºï¼Œåˆ™é‡å…¥ï¼š<code>hincrby key field increment</code></p></li><li><p>è‹¥ä¸å±äºï¼Œé€’å½’æˆ–å¾ªç¯è‡ªæ—‹é‡è¯•</p></li></ul></li></ul><p><strong>åŠ é”è„šæœ¬</strong></p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">if</span> redis.call(<span class="hljs-string">&#x27;exists&#x27;</span>, KEYS[<span class="hljs-number">1</span>]) == <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> redis.call(<span class="hljs-string">&#x27;hexists&#x27;</span>, KEYS[<span class="hljs-number">1</span>], ARGV[<span class="hljs-number">1</span>]) == <span class="hljs-number">1</span> <br><span class="hljs-keyword">then</span><br>    redis.call(<span class="hljs-string">&#x27;hincrby&#x27;</span>, KEYS[<span class="hljs-number">1</span>], ARGV[<span class="hljs-number">1</span>], <span class="hljs-number">1</span>)<br>    redis.call(<span class="hljs-string">&#x27;expire&#x27;</span>, KEYS[<span class="hljs-number">1</span>], ARGV[<span class="hljs-number">2</span>])<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br><span class="hljs-keyword">else</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p>è§£é” -&gt; åˆ¤æ–­é”æ˜¯å¦å±äºè‡ªå·±ï¼š<code>hexists</code></p><ul><li><p>è‹¥ä¸å±äºï¼Œè¯´æ˜æ­£åœ¨æ¶æ„é‡Šæ”¾é”ï¼Œè¿”å› <code>nil</code></p></li><li><p>è‹¥å±äºï¼Œå¯¹åŠ é”æ¬¡æ•°å‡1ï¼Œå¹¶åˆ¤æ–­å½“å‰åŠ é”æ¬¡æ•°æ˜¯å¦ä¸º0</p><ul><li><p>è‹¥ä¸º0ï¼Œåˆ™è¿”å›1ï¼Œä»£è¡¨å®Œå…¨è§£é”æˆåŠŸ</p></li><li><p>è‹¥ä¸ä¸º0ï¼Œåˆ™è¿”å›0</p></li></ul></li></ul><p><strong>è§£é”è„šæœ¬</strong></p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">if</span> redis.call(<span class="hljs-string">&#x27;hexists&#x27;</span>, KEYS[<span class="hljs-number">1</span>], ARGV[<span class="hljs-number">1</span>]) == <span class="hljs-number">0</span><br><span class="hljs-keyword">then</span> <br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br><span class="hljs-keyword">elseif</span> redis.call(<span class="hljs-string">&#x27;hincrby&#x27;</span>, KEYS[<span class="hljs-number">1</span>], ARGV[<span class="hljs-number">1</span>], <span class="hljs-number">-1</span>) == <span class="hljs-number">0</span><br><span class="hljs-keyword">then</span> <br>    <span class="hljs-keyword">return</span> redis.call(<span class="hljs-string">&#x27;del&#x27;</span>, KEYS[<span class="hljs-number">1</span>])<br><span class="hljs-keyword">else</span> <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p><strong>ä»£ç å®ç°</strong></p><ol><li><p>åˆ›å»ºåˆ†å¸ƒå¼é”çš„å·¥å‚ç±»æ–¹æ³•ã€‚é€šè¿‡ä¸€ä¸ªå·¥å‚ç±»æ–¹æ³•ï¼Œå¯ä»¥è·å¾—ä¸åŒçš„åˆ†å¸ƒå¼é”ï¼ˆåŸºäºRedisã€åŸºäºZookeeperã€åŸºäºMySQLï¼‰</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DistributedLockClient</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> StringRedisTemplate redisTemplate;<br><br>    <span class="hljs-keyword">private</span> String uuid;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DistributedLockClient</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-built_in">this</span>.uuid = UUID.randomUUID().toString();<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> DistributedRedisLock <span class="hljs-title function_">getRedisLock</span><span class="hljs-params">(String lockName)</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DistributedRedisLock</span>(redisTemplate, lockName, uuid);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>åˆ›å»ºåˆ†å¸ƒå¼Redisé”çš„å®ç°ç±»ï¼Œå…¶å®ç°äº†Lockæ¥å£ã€‚é€šè¿‡ä¹‹å‰ç¼–å†™å¥½çš„åŠ é”ã€è§£é”è„šæœ¬ï¼Œå®ç°äº†å¯é‡å…¥é”ã€‚</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DistributedRedisLock</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Lock</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> StringRedisTemplate redisTemplate;<br><br>    <span class="hljs-keyword">public</span> String lockName;<br><br>    <span class="hljs-keyword">private</span> String uuid;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-variable">expire</span> <span class="hljs-operator">=</span> <span class="hljs-number">30</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DistributedRedisLock</span><span class="hljs-params">(StringRedisTemplate redisTemplate, String lockName, String uuid)</span> &#123;<br>        <span class="hljs-built_in">this</span>.redisTemplate = redisTemplate;<br>        <span class="hljs-built_in">this</span>.lockName = lockName;<br>        <span class="hljs-built_in">this</span>.uuid = uuid;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">lock</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-built_in">this</span>.tryLock();<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">lockInterruptibly</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br><br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">tryLock</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.tryLock(-<span class="hljs-number">1L</span>, TimeUnit.SECONDS);<br>        &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">tryLock</span><span class="hljs-params">(<span class="hljs-type">long</span> time, TimeUnit unit)</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br>        <span class="hljs-built_in">this</span>.expire = time != -<span class="hljs-number">1</span> ? unit.toSeconds(time) : expire;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">script</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;if redis.call(&#x27;exists&#x27;, KEYS[1]) == 0 or redis.call(&#x27;hexists&#x27;, KEYS[1], ARGV[1]) == 1 \n&quot;</span> +<br>                        <span class="hljs-string">&quot;then\n&quot;</span> +<br>                        <span class="hljs-string">&quot;    redis.call(&#x27;hincrby&#x27;, KEYS[1], ARGV[1], 1)\n&quot;</span> +<br>                        <span class="hljs-string">&quot;    redis.call(&#x27;expire&#x27;, KEYS[1], ARGV[2])\n&quot;</span> +<br>                        <span class="hljs-string">&quot;    return 1\n&quot;</span> +<br>                        <span class="hljs-string">&quot;else\n&quot;</span> +<br>                        <span class="hljs-string">&quot;    return 0\n&quot;</span> +<br>                        <span class="hljs-string">&quot;end&quot;</span>;<br>        <span class="hljs-keyword">while</span> (!<span class="hljs-built_in">this</span>.redisTemplate.execute(<span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultRedisScript</span>&lt;&gt;(script, Boolean.class), Arrays.asList(lockName), getId(), String.valueOf(expire))) &#123;<br>            Thread.sleep(<span class="hljs-number">50</span>);<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">unlock</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">script</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;if redis.call(&#x27;hexists&#x27;, KEYS[1], ARGV[1]) == 0\n&quot;</span> +<br>                        <span class="hljs-string">&quot;then \n&quot;</span> +<br>                        <span class="hljs-string">&quot;    return nil\n&quot;</span> +<br>                        <span class="hljs-string">&quot;elseif redis.call(&#x27;hincrby&#x27;, KEYS[1], ARGV[1], -1) == 0\n&quot;</span> +<br>                        <span class="hljs-string">&quot;then \n&quot;</span> +<br>                        <span class="hljs-string">&quot;    return redis.call(&#x27;del&#x27;, KEYS[1])\n&quot;</span> +<br>                        <span class="hljs-string">&quot;else \n&quot;</span> +<br>                        <span class="hljs-string">&quot;    return 0\n&quot;</span> +<br>                        <span class="hljs-string">&quot;end&quot;</span>;<br>        <span class="hljs-type">Long</span> <span class="hljs-variable">flag</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.redisTemplate.execute(<span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultRedisScript</span>&lt;&gt;(script, Long.class), Arrays.asList(lockName), getId());<br>        <span class="hljs-keyword">if</span> (flag == <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalMonitorStateException</span>(<span class="hljs-string">&quot;this lock does not belong to you&quot;</span>);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Condition <span class="hljs-title function_">newCondition</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br><br>    String <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> uuid + <span class="hljs-string">&quot;:&quot;</span> + Thread.currentThread().getId();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹StockServiceä¸­çš„deductæ–¹æ³•</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deduct</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">DistributedRedisLock</span> <span class="hljs-variable">redisLock</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.distributedLockClient.getRedisLock(<span class="hljs-string">&quot;lock&quot;</span>);<br>    redisLock.lock();<br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-comment">// æŸ¥è¯¢åº“å­˜ä¿¡æ¯</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">stock</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue().get(<span class="hljs-string">&quot;stock&quot;</span>).toString();<br>        <span class="hljs-comment">// åˆ¤æ–­åº“å­˜æ˜¯å¦å……è¶³</span><br>        <span class="hljs-keyword">if</span> (stock != <span class="hljs-literal">null</span> &amp;&amp; stock.length() != <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-type">Integer</span> <span class="hljs-variable">st</span> <span class="hljs-operator">=</span> Integer.valueOf(stock);<br>            <span class="hljs-keyword">if</span> (st &gt; <span class="hljs-number">0</span>) &#123;<br>                <span class="hljs-comment">// æ‰£å‡åº“å­˜</span><br>                redisTemplate.opsForValue().set(<span class="hljs-string">&quot;stock&quot;</span>, String.valueOf(--st));<br>            &#125;<br>        &#125;<br>        <span class="hljs-built_in">this</span>.test();<br>    &#125; <span class="hljs-keyword">finally</span> &#123;<br>        redisLock.unlock();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><p>éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼šå¦‚ä½•å»æ ‡è¯†æ¯ä¸€ä¸ªæœåŠ¡ä¸­çš„æ¯ä¸€ä¸ªçº¿ç¨‹çš„é”çš„uuidï¼Ÿ</p><p>è¿™é‡Œçš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼šé€šè¿‡æœåŠ¡ç”Ÿæˆçš„uuidä¸æ¯ä¸ªçº¿ç¨‹çš„çº¿ç¨‹idæ‹¼æ¥å¾—åˆ°å”¯ä¸€æ ‡è¯†uuid</p><ol><li><p>æ¯ä¸€ä¸ªæœåŠ¡æ˜¯é€šè¿‡DistributedLockClientè¿™ä¸€å·¥å‚ç±»è·å¾—é”ï¼Œç”±äºè¯¥ç±»äº¤ç»™Springå®¹å™¨ç®¡ç†ï¼Œæ˜¯å•ä¾‹å¯¹è±¡ã€‚å³æ¯ä¸€ä¸ªæœåŠ¡åªæœ‰ä¸€ä¸ªå”¯ä¸€çš„DistributedLockClientå¯¹è±¡ã€‚</p><p> å› æ­¤å¯ä»¥åœ¨è¯¥ç±»æ„é€ æ–¹æ³•ä¸Šç”Ÿæˆä¸€ä¸ªuuidï¼Œä½œä¸ºå½“å‰æœåŠ¡çš„å”¯ä¸€æ ‡è¯†</p></li><li><p>æ¯ä¸€ä¸ªçº¿ç¨‹ä¹Ÿä¼šæœ‰ä¸€ä¸ªå”¯ä¸€çš„id</p></li><li><p>å°†ä¸¤è€…æ‹¼æ¥èµ·æ¥ï¼ˆgetIdæ–¹æ³•ï¼‰ï¼Œå³å¯å”¯ä¸€æ ‡è¯†æ¯ä¸€ä¸ªæœåŠ¡çš„æ¯ä¸€ä¸ªçº¿ç¨‹ã€‚è‹¥éœ€è¦è¿›è¡Œé‡å…¥æ“ä½œï¼ŒåŒä¸€çº¿ç¨‹é‡å¤è·å–é”ï¼Œå¯é€šè¿‡æ­¤å”¯ä¸€æ ‡è¯†è¿›è¡Œåˆ¤æ–­ã€‚</p></li></ol><p>åä¹‹ï¼Œå¦‚æœæ¯æ¬¡é€šè¿‡DistributedLockClientè·å–Redisåˆ†å¸ƒå¼é”ï¼Œå‡é‡æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„uuidï¼Œé‚£ä¹ˆä¾¿æ°¸è¿œæ— æ³•å®ç°å¯é‡å…¥é”ã€‚</p><ul><li>å› ä¸ºåœ¨åŒä¸€çº¿ç¨‹è¿›è¡Œå¯é‡å…¥æ“ä½œè·å–é”æ—¶ï¼Œä¼šå‡ºç°å†…å±‚é”ä¸å¤–å±‚é”uuidä¸åŒ¹é…çš„é”™è¯¯æƒ…å†µï¼Œä¸ç†è®ºäº‹å®ç›¸çŸ›ç›¾ã€‚</li></ul><h4 id="2-3-4-è‡ªåŠ¨ç»­æœŸ"><a href="#2-3-4-è‡ªåŠ¨ç»­æœŸ" class="headerlink" title="2.3.4 è‡ªåŠ¨ç»­æœŸ"></a>2.3.4 è‡ªåŠ¨ç»­æœŸ</h4><p>å‡è®¾å¤„ç†è¯·æ±‚çš„æ—¶é•¿å¤§äºé”çš„æœ‰æ•ˆæ—¶é—´ï¼Œä¼šå‡ºç°è¯·æ±‚è¿˜æœªå¤„ç†å®Œï¼Œé”å°±è¢«é‡Šæ”¾äº†ï¼Œæ­¤æ—¶å¯èƒ½å¼•èµ·å¹¶å‘é—®é¢˜ã€‚</p><p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p><ul><li><p>é‡‡ç”¨Timerå®šæ—¶ä»»åŠ¡ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´ä¸ºé”ç»­æœŸ</p></li><li><p>é…åˆluaè„šæœ¬æ‰§è¡Œæœ€åçš„ç»­æœŸæ“ä½œ</p><p>  å…ˆåˆ¤æ–­é”æ˜¯å¦å­˜åœ¨ã€‚è‹¥å­˜åœ¨åˆ™é‡ç½®è¿‡æœŸæ—¶é—´</p>  <figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">if</span>(redis.call(<span class="hljs-string">&#x27;hexists&#x27;</span>, KEYS[<span class="hljs-number">1</span>], ARGV[<span class="hljs-number">1</span>]) == <span class="hljs-number">1</span>) <br><span class="hljs-keyword">then</span> <br>    redis.call(<span class="hljs-string">&#x27;expire&#x27;</span>, KEYS[<span class="hljs-number">1</span>], ARGV[<span class="hljs-number">2</span>])<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br><span class="hljs-keyword">else</span> <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure></li></ul><p><strong>ä»£ç å®ç°</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">renewExpire</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">script</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;if(redis.call(&#x27;hexists&#x27;, KEYS[1], ARGV[1]) == 1) \n&quot;</span> +<br>                    <span class="hljs-string">&quot;then \n&quot;</span> +<br>                    <span class="hljs-string">&quot;    redis.call(&#x27;expire&#x27;, KEYS[1], ARGV[2])\n&quot;</span> +<br>                    <span class="hljs-string">&quot;    return 1\n&quot;</span> +<br>                    <span class="hljs-string">&quot;else \n&quot;</span> +<br>                    <span class="hljs-string">&quot;    return 0\n&quot;</span> +<br>                    <span class="hljs-string">&quot;end&quot;</span>;<br>    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Timer</span>().schedule(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TimerTask</span>() &#123;<br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>            <span class="hljs-keyword">if</span> (redisTemplate.execute(<span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultRedisScript</span>&lt;&gt;(script, Boolean.class), Arrays.asList(lockName), uuid, String.valueOf(expire))) &#123;<br>                renewExpire();<br>            &#125;<br>        &#125;<br>    &#125;, <span class="hljs-built_in">this</span>.expire * <span class="hljs-number">1000</span> / <span class="hljs-number">3</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>å…¶ä¸­éœ€è¦æ³¨æ„çš„ç‚¹æ˜¯ï¼š</p><ul><li><p>ä¹‹å‰æ˜¯é€šè¿‡ <code>getId()</code> æ–¹æ³•ï¼Œå°†å½“å‰æœåŠ¡çš„uuidä¸å½“å‰çº¿ç¨‹çš„idæ‹¼æ¥åˆ°ä¸€èµ·ï¼Œç»„æˆå”¯ä¸€æ ‡è¯†ã€‚</p><p>  è€Œç°åœ¨çš„é—®é¢˜ä¸ºï¼šTimerå®šæ—¶ä»»åŠ¡æ˜¯å­çº¿ç¨‹ï¼Œå®ƒçš„æœ¬æ„æ˜¯ç›‘æµ‹ä¸»çº¿ç¨‹çš„é”çš„è¿‡æœŸæ—¶é—´å¹¶ä¸ºå…¶ç»­æœŸï¼Œä½†æ˜¯åœ¨å…¶å†…éƒ¨è°ƒç”¨getIdæ–¹æ³•ï¼Œå¾—åˆ°çš„é”å”¯ä¸€æ ‡è¯†æ˜¯æ‹¼æ¥çš„Timerå®šæ—¶ä»»åŠ¡å­çº¿ç¨‹çš„idã€‚</p></li><li><p>å› æ­¤ï¼Œéœ€è¦å¯¹ä»£ç è¿›è¡Œè¿›ä¸€æ­¥ä¿®æ”¹ä¸ä¼˜åŒ–ï¼Œåˆ å»getIdæ–¹æ³•ï¼Œä¿®æ”¹DistributedRedisLockçš„æ„é€ æ–¹æ³•ï¼Œåœ¨åˆ›å»ºè¯¥ç±»æ—¶ä¾¿ç”Ÿæˆå”¯ä¸€çš„uuidã€‚</p>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-title function_">DistributedRedisLock</span><span class="hljs-params">(StringRedisTemplate redisTemplate, String lockName, String uuid)</span> &#123;<br>    <span class="hljs-built_in">this</span>.redisTemplate = redisTemplate;<br>    <span class="hljs-built_in">this</span>.lockName = lockName;<br>    <span class="hljs-built_in">this</span>.uuid = uuid + <span class="hljs-string">&quot;:&quot;</span> + Thread.currentThread().getId();<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="2-4-RedLockçº¢é”ç®—æ³•"><a href="#2-4-RedLockçº¢é”ç®—æ³•" class="headerlink" title="2.4 RedLockçº¢é”ç®—æ³•"></a>2.4 RedLockçº¢é”ç®—æ³•</h3><p>æˆ‘ç»“åˆè€å¸ˆçš„è®²è§£ï¼Œå•ç‹¬å†™äº†ä¸€ç¯‡<a href="">å›¾æ–‡è¯¦è§£RedLockï¼ˆç»“åˆå®˜æ–¹æ–‡æ¡£ï¼‰</a></p><p>å…¶ä¸­ä¸€äº›å†…å®¹å‚ç…§äº†å®˜æ–¹æ–‡æ¡£ä»¥åŠå…¶ä»–å¤§ä½¬çš„åšå®¢</p><p>è¿™ä¸€éƒ¨åˆ†å‡ä¸ºç†è®ºå†…å®¹ï¼Œæ²¡æœ‰å®é™…ä»£ç </p><h3 id="2-5-Redisson"><a href="#2-5-Redisson" class="headerlink" title="2.5 Redisson"></a>2.5 Redisson</h3><h4 id="2-5-1-ç¯å¢ƒæ­å»º"><a href="#2-5-1-ç¯å¢ƒæ­å»º" class="headerlink" title="2.5.1 ç¯å¢ƒæ­å»º"></a>2.5.1 ç¯å¢ƒæ­å»º</h4><p>å‚è€ƒ <a href="https://github.com/redisson/redisson/wiki">Redissonæ–‡æ¡£</a></p><ol><li><p>å¼•å…¥ä¾èµ–</p> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>  <br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.redisson<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>  <br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>redisson<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>  <br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.17.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>  <br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>ç”±äºRedissonä¸èƒ½ä½¿ç”¨ymlè¿›è¡Œé…ç½®ï¼Œå› æ­¤éœ€è¦ç¼–å†™é¢å¤–çš„é…ç½®ç±»</p><p> æ–°å»º <code>config</code> åŒ…ï¼Œåˆ›å»º <code>RedissonConfig</code> ç±»</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedissonConfig</span> &#123;<br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> RedissonClient <span class="hljs-title function_">redissonClient</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">Config</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Config</span>();<br>        config.useSingleServer().setAddress(<span class="hljs-string">&quot;redis://127.0.0.1:6379&quot;</span>).setPassword(<span class="hljs-string">&quot;123456&quot;</span>).setDatabase(<span class="hljs-number">0</span>);<br>        <span class="hljs-keyword">return</span> Redisson.create(config);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹ <code>StockService</code> ä¸­çš„ <code>deduct</code> æ–¹æ³•</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Autowired</span>  <br><span class="hljs-keyword">private</span> RedissonClient redissonClient;  <br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deduct</span><span class="hljs-params">()</span> &#123;  <br>    <span class="hljs-type">RLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.redissonClient.getLock(<span class="hljs-string">&quot;lock&quot;</span>);  <br>    lock.lock();  <br>    <span class="hljs-comment">// æŸ¥è¯¢åº“å­˜ä¿¡æ¯  </span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">stock</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue().get(<span class="hljs-string">&quot;stock&quot;</span>).toString();  <br>    <span class="hljs-comment">// åˆ¤æ–­åº“å­˜æ˜¯å¦å……è¶³  </span><br>    <span class="hljs-keyword">try</span> &#123;  <br>        <span class="hljs-keyword">if</span> (stock != <span class="hljs-literal">null</span> &amp;&amp; stock.length() != <span class="hljs-number">0</span>) &#123;  <br>            <span class="hljs-type">Integer</span> <span class="hljs-variable">st</span> <span class="hljs-operator">=</span> Integer.valueOf(stock);  <br>            <span class="hljs-keyword">if</span> (st &gt; <span class="hljs-number">0</span>) &#123;  <br>                <span class="hljs-comment">// æ‰£å‡åº“å­˜  </span><br>                redisTemplate.opsForValue().set(<span class="hljs-string">&quot;stock&quot;</span>, String.valueOf(--st));  <br>            &#125;  <br>        &#125;  <br>    &#125; <span class="hljs-keyword">finally</span> &#123;  <br>        lock.unlock();  <br>    &#125;  <br>&#125;<br></code></pre></td></tr></table></figure><p> ä¹Ÿå¯ä»¥è®¾ç½®lockçš„è¿‡æœŸæ—¶é—´ï¼Œåˆ°æ—¶é—´æ—¶è‡ªåŠ¨é‡Šæ”¾é”</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">lock.lock(<span class="hljs-number">10</span>, TimeUnit.SECONDS);<br></code></pre></td></tr></table></figure></li></ol><p>å¸¸ç”¨çš„Redissoné…ç½®</p><p><img src="https://lty-image-bed.oss-cn-shenzhen.aliyuncs.com/blog/iShot2022-10-12%2017.07.13.png"></p><h4 id="2-5-2-å¯é‡å…¥é”"><a href="#2-5-2-å¯é‡å…¥é”" class="headerlink" title="2.5.2 å¯é‡å…¥é”"></a>2.5.2 å¯é‡å…¥é”</h4><h5 id="åº•å±‚åŸç†"><a href="#åº•å±‚åŸç†" class="headerlink" title="åº•å±‚åŸç†"></a>åº•å±‚åŸç†</h5><p>RLockæ¥å£çš„lockæ–¹æ³•æ˜¯é€šè¿‡ç»§æ‰¿JUCåŒ…ä¸‹çš„Lockæ¥å£è·å¾—ï¼Œæœ€ç»ˆRedissonLocké—´æ¥å®ç°äº†RLockæ¥å£ä»¥åŠå…¶ä¸­çš„ä¸­æ³•ã€‚</p><p>ç»§æ‰¿å…³ç³»å¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="https://lty-image-bed.oss-cn-shenzhen.aliyuncs.com/blog/rlock.png"></p><p>RedissonLockä¸­å…·ä½“lockæ–¹æ³•å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span>  <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">lock</span><span class="hljs-params">()</span> &#123;  <br>    <span class="hljs-keyword">try</span> &#123;  <br>        lock(-<span class="hljs-number">1</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">false</span>);  <br>    &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;  <br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>();  <br>    &#125;  <br>&#125;<br></code></pre></td></tr></table></figure><p>æ ¹æ®é¡ºåºï¼Œä¸€æ­¥æ­¥è¿›å…¥æ–¹æ³•æŸ¥çœ‹ï¼š</p><p>lock -&gt; tryAcquire -&gt; tryAcquireAsync -&gt; tryLockInnerAsync</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;T&gt; RFuture&lt;T&gt; <span class="hljs-title function_">tryLockInnerAsync</span><span class="hljs-params">(<span class="hljs-type">long</span> waitTime, <span class="hljs-type">long</span> leaseTime, TimeUnit unit, <span class="hljs-type">long</span> threadId, RedisStrictCommand&lt;T&gt; command)</span> &#123;  <br>    <span class="hljs-keyword">return</span> evalWriteAsync(getRawName(), LongCodec.INSTANCE, command,  <br>            <span class="hljs-string">&quot;if (redis.call(&#x27;exists&#x27;, KEYS[1]) == 0) then &quot;</span> +  <br>                    <span class="hljs-string">&quot;redis.call(&#x27;hincrby&#x27;, KEYS[1], ARGV[2], 1); &quot;</span> +  <br>                    <span class="hljs-string">&quot;redis.call(&#x27;pexpire&#x27;, KEYS[1], ARGV[1]); &quot;</span> +  <br>                    <span class="hljs-string">&quot;return nil; &quot;</span> +  <br>                    <span class="hljs-string">&quot;end; &quot;</span> +  <br>                    <span class="hljs-string">&quot;if (redis.call(&#x27;hexists&#x27;, KEYS[1], ARGV[2]) == 1) then &quot;</span> +  <br>                    <span class="hljs-string">&quot;redis.call(&#x27;hincrby&#x27;, KEYS[1], ARGV[2], 1); &quot;</span> +  <br>                    <span class="hljs-string">&quot;redis.call(&#x27;pexpire&#x27;, KEYS[1], ARGV[1]); &quot;</span> +  <br>                    <span class="hljs-string">&quot;return nil; &quot;</span> +  <br>                    <span class="hljs-string">&quot;end; &quot;</span> +  <br>                    <span class="hljs-string">&quot;return redis.call(&#x27;pttl&#x27;, KEYS[1]);&quot;</span>,  <br>            Collections.singletonList(getRawName()), unit.toMillis(leaseTime), getLockName(threadId));  <br>&#125;<br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°Redissonä¸­çš„åŠ é”æ–¹æ³•ä¹Ÿæ˜¯é‡‡ç”¨luaè„šæœ¬</p><p>Redissoné”çš„è‡ªåŠ¨å®šæ—¶ç»­æœŸæ˜¯é€šè¿‡ï¼š<code>scheduleExpirationRenewal</code> æ–¹æ³•å®ç°</p><p>å…¶æ–¹æ³•å†…éƒ¨é€šè¿‡ <code>renewExpiration</code> é‡ç½®è¿‡æœŸæ—¶é—´ï¼Œé‡‡ç”¨TimerTaskå®Œæˆå®šæ—¶ä»»åŠ¡</p><p>è§£é”æ–¹æ³•unlockä¹Ÿæ˜¯é‡‡ç”¨luaè„šæœ¬</p><p><strong>Redissonè‡ªåŠ¨ç»­æœŸã€å¯é‡å…¥ä¸é˜²æ­»é”</strong></p><p>å®ç°æ–¹æ¡ˆä¸ä¹‹å‰æ‰‹åŠ¨å®ç°çš„Redisåˆ†å¸ƒå¼é”ç±»ä¼¼</p><ol><li><p>å¦‚æœå½“å‰ä»£ç è¿è¡Œæ—¶é—´è¿‡é•¿ï¼Œè¶…å‡ºäº†é”çš„è¿‡æœŸæ—¶é—´ï¼Œä½†æ˜¯ç¨‹åºä»åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ‰€ä»¥éœ€è¦ä¸ºé”ç»­æœŸ</p><p>-&gt; Redissonå†…éƒ¨æä¾›äº†ä¸€ä¸ªç›‘æ§é”çš„çœ‹é—¨ç‹—ï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰ï¼Œå®ƒçš„ä½œç”¨æ˜¯åœ¨Redissonå®ä¾‹è¢«å…³é—­å‰ï¼Œä¸æ–­åœ°å»¶é•¿é”çš„æœ‰æ•ˆæœŸã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œçœ‹é—¨ç‹—æ¯éš”30ç§’æ£€æŸ¥ä¸€æ¬¡ã€‚</p></li><li><p>å¦‚æœè´Ÿè´£å‚¨å­˜åˆ†å¸ƒå¼é”çš„RedissonèŠ‚ç‚¹å®•æœºåï¼Œè€Œè¿™ä¸ªé”æ°å¥½å¤„äºé”ä½çŠ¶æ€ï¼Œè¿™æ—¶å€™ä¼šå‡ºç°æ­»é”ã€‚</p><p>-&gt; Redissoné€šè¿‡ä¸ºé”è®¾ç½®è¶…æ—¶æ—¶é—´ï¼ˆæœ‰æ•ˆæœŸï¼‰ï¼Œè‹¥æœ‰æ•ˆæœŸå†…æ²¡æœ‰å®šæ—¶ä»»åŠ¡ä¸ºå…¶ç»­æœŸï¼Œåˆ™å…¶è¶…è¿‡è¯¥æ—¶é—´å°±ä¼šè‡ªåŠ¨è§£å¼€ã€‚</p></li></ol><h5 id="æµ‹è¯•ä»£ç "><a href="#æµ‹è¯•ä»£ç " class="headerlink" title="æµ‹è¯•ä»£ç "></a>æµ‹è¯•ä»£ç </h5><p>æµ‹è¯•è‡ªåŠ¨ç»­æœŸä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deduct</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">RLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.redissonClient.getLock(<span class="hljs-string">&quot;lock&quot;</span>);<br>    lock.lock();<br>    <span class="hljs-comment">// æŸ¥è¯¢åº“å­˜ä¿¡æ¯</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">stock</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue().get(<span class="hljs-string">&quot;stock&quot;</span>).toString();<br>    <span class="hljs-comment">// åˆ¤æ–­åº“å­˜æ˜¯å¦å……è¶³</span><br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-keyword">if</span> (stock != <span class="hljs-literal">null</span> &amp;&amp; stock.length() != <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-type">Integer</span> <span class="hljs-variable">st</span> <span class="hljs-operator">=</span> Integer.valueOf(stock);<br>            <span class="hljs-keyword">if</span> (st &gt; <span class="hljs-number">0</span>) &#123;<br>                <span class="hljs-comment">// æ‰£å‡åº“å­˜</span><br>                redisTemplate.opsForValue().set(<span class="hljs-string">&quot;stock&quot;</span>, String.valueOf(--st));<br>            &#125;<br>        &#125;<br>        TimeUnit.SECONDS.sleep(<span class="hljs-number">1000</span>);<br>    &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>    &#125; <span class="hljs-keyword">finally</span> &#123;<br>        lock.unlock();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•å¯é‡å…¥ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deduct</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">RLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.redissonClient.getLock(<span class="hljs-string">&quot;lock&quot;</span>);<br>    lock.lock();<br>    <span class="hljs-comment">// æŸ¥è¯¢åº“å­˜ä¿¡æ¯</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">stock</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue().get(<span class="hljs-string">&quot;stock&quot;</span>).toString();<br>    <span class="hljs-comment">// åˆ¤æ–­åº“å­˜æ˜¯å¦å……è¶³</span><br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-keyword">if</span> (stock != <span class="hljs-literal">null</span> &amp;&amp; stock.length() != <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-type">Integer</span> <span class="hljs-variable">st</span> <span class="hljs-operator">=</span> Integer.valueOf(stock);<br>            <span class="hljs-keyword">if</span> (st &gt; <span class="hljs-number">0</span>) &#123;<br>                <span class="hljs-comment">// æ‰£å‡åº“å­˜</span><br>                redisTemplate.opsForValue().set(<span class="hljs-string">&quot;stock&quot;</span>, String.valueOf(--st));<br>            &#125;<br>        &#125;<br>    &#125; <span class="hljs-keyword">finally</span> &#123;<br>        lock.unlock();<br>    &#125;<br>    <span class="hljs-built_in">this</span>.test();<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">RLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.redissonClient.getLock(<span class="hljs-string">&quot;lock&quot;</span>);<br>    lock.lock();<br>    System.out.println(<span class="hljs-string">&quot;æµ‹è¯•å¯é‡å…¥é”...&quot;</span>);<br>    lock.unlock();<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="2-5-3-å…¬å¹³é”"><a href="#2-5-3-å…¬å¹³é”" class="headerlink" title="2.5.3 å…¬å¹³é”"></a>2.5.3 å…¬å¹³é”</h4><p>å…¬å¹³çš„ä½“ç°ï¼šå…¬å¹³é”ä¿è¯å½“å¤šä¸ªRedissonå®¢æˆ·ç«¯çº¿ç¨‹åŒæ—¶è¯·æ±‚åŠ é”æ—¶ï¼Œä¼˜å…ˆåˆ†é…ç»™å…ˆå‘å‡ºè¯·æ±‚çš„çº¿ç¨‹ã€‚</p><p>æ‰€æœ‰çš„è¯·æ±‚çº¿ç¨‹ä¼šåœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­æ’é˜Ÿã€‚å¦‚æœæŸçº¿ç¨‹å®•æœºåï¼ŒRedissonç­‰å¾…5ç§’åç»§ç»­ä¸‹ä¸€ä¸ªçº¿ç¨‹ã€‚</p><p>ä¸¾ä¸ªğŸŒ°ï¼šè‹¥å‰é¢æœ‰5ä¸ªçº¿ç¨‹å®•æœºï¼Œé‚£ä¹ˆå»¶è¿Ÿå°†ä¼šæ˜¯25ç§’ã€‚</p><p>é¡ºä¾¿æä¸€ç‚¹ï¼šä¸ªäººè®¤ä¸ºæ­¤å¤„Redissonå®˜æ–¹çš„<a href="https://github.com/redisson/redisson/wiki/8.-distributed-locks-and-synchronizers">ä¸­æ–‡æ–‡æ¡£</a>æè¿°ç•¥æœ‰ä¸å¦¥ï¼Œä¸æ˜¯<del>å‰é¢5ä¸ªçº¿ç¨‹å¤„äºç­‰å¾…çŠ¶æ€</del>ï¼Œè€Œæ˜¯å¤„äºå®•æœºçŠ¶æ€</p><blockquote><p>  æ‰€æœ‰è¯·æ±‚çº¿ç¨‹ä¼šåœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­æ’é˜Ÿï¼Œå½“æŸä¸ªçº¿ç¨‹å‡ºç°å®•æœºæ—¶ï¼ŒRedissonä¼šç­‰å¾…5ç§’åç»§ç»­ä¸‹ä¸€ä¸ªçº¿ç¨‹ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœå‰é¢æœ‰5ä¸ªçº¿ç¨‹éƒ½å¤„äºç­‰å¾…çŠ¶æ€ï¼Œé‚£ä¹ˆåé¢çš„çº¿ç¨‹ä¼šç­‰å¾…è‡³å°‘25ç§’ã€‚</p></blockquote><p>å¯¹ç…§è‹±æ–‡ç‰ˆæœ¬ï¼š</p><blockquote><p>  All waiting threads are queued and if some thread has died then Redisson waits its return for 5 seconds. For example, if 5 threads are died for some reason then delay will be 25 seconds.</p></blockquote><h5 id="æµ‹è¯•ä»£ç -1"><a href="#æµ‹è¯•ä»£ç -1" class="headerlink" title="æµ‹è¯•ä»£ç "></a>æµ‹è¯•ä»£ç </h5><ol><li><p>åœ¨StockControlleræ·»åŠ æ–°çš„æµ‹è¯•æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@GetMapping(&quot;test/fair/lock/&#123;id&#125;&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testFairLock</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;id&quot;)</span> Long id)</span> &#123;<br>    <span class="hljs-built_in">this</span>.stockService.testFairLock(id);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;hello test fair lock&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>åœ¨StockServiceæ·»åŠ æ–°çš„æµ‹è¯•æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testFairLock</span><span class="hljs-params">(Long id)</span> &#123;<br>    <span class="hljs-type">RLock</span> <span class="hljs-variable">fairLock</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.redissonClient.getFairLock(<span class="hljs-string">&quot;fairLock&quot;</span>);<br>    fairLock.lock();<br>    System.out.println(<span class="hljs-string">&quot;æµ‹è¯•å…¬å¹³é”==================&quot;</span> + id);<br>    <span class="hljs-keyword">try</span> &#123;<br>        TimeUnit.SECONDS.sleep(<span class="hljs-number">10</span>);<br>    &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>    &#125; <span class="hljs-keyword">finally</span> &#123;<br>        fairLock.unlock();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><p>å¯åŠ¨SpringBootï¼Œä¾æ¬¡åœ¨æµè§ˆå™¨è¯·æ±‚ <code>test/fair/lock/&#123;id&#125;</code> 5æ¬¡</p><p>å¯ä»¥çœ‹åˆ°æœ€ç»ˆçš„è¾“å‡ºé¡ºåºå’Œè¯·æ±‚é¡ºåºä¸€è‡´ï¼Œè¯´æ˜å®ç°äº†å…¬å¹³é”</p><p><img src="https://lty-image-bed.oss-cn-shenzhen.aliyuncs.com/blog/image-20221014004141382.png" alt="image-20221014004141382"></p><p>å¦‚æœå¼€å¯äº†ä¸¤ä¸ªSpringBootå¹¶é‡‡ç”¨nginxè¿›è¡Œè´Ÿè½½å‡è¡¡ï¼Œä¼šå‡ºç°ä¸€ä¸ªè¯·æ±‚è¢«å‘é€å¤šæ¬¡çš„æƒ…å†µã€‚</p><p>è¿™æ˜¯å› ä¸ºnginxæœ‰çº é”™æœºåˆ¶ï¼Œå½“å‘é€ä¸€ä¸ªè¯·æ±‚é•¿æ—¶é—´æœªå¾—åˆ°å“åº”æ—¶ï¼Œnginxä¼šå†æ¬¡å‘é€ã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼šé…ç½®nginx.confæ–‡ä»¶ï¼Œå°†è¶…æ—¶æ—¶é—´å»¶é•¿ã€‚é‡æ–°é…ç½®ä¹‹åè®°å¾—é‡æ–°å¯åŠ¨nginxã€‚</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">server</span> &#123;<br>    <span class="hljs-attribute">listen</span>       <span class="hljs-number">80</span>;<br>    <span class="hljs-attribute">server_name</span>  localhost;<br>    <span class="hljs-attribute">proxy_connect_timeout</span> <span class="hljs-number">12000</span><br>    proxy_send_timeout <span class="hljs-number">12000</span><br>    proxy_read_timeout <span class="hljs-number">12000</span><br>    location / &#123;<br>        <span class="hljs-attribute">proxy_pass</span> http://distributedLock;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>åˆ†å¸ƒå¼</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>é”</tag>
      
      <tag>SpringBoot</tag>
      
      <tag>MySQL</tag>
      
      <tag>Redis</tag>
      
      <tag>åˆ†å¸ƒå¼</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LC-Solution 870. Advantage Shuffle</title>
    <link href="/2022/10/08/LC-Solution-870-Advantage-Shuffle/"/>
    <url>/2022/10/08/LC-Solution-870-Advantage-Shuffle/</url>
    
    <content type="html"><![CDATA[<h1 id="870-Advantage-Shuffle"><a href="#870-Advantage-Shuffle" class="headerlink" title="870. Advantage Shuffle"></a><a href="https://leetcode.cn/problems/advantage-shuffle/">870. Advantage Shuffle</a></h1><h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>ç»™å®šä¸¤ä¸ªå¤§å°ç›¸ç­‰çš„æ•°ç»„Â <code>nums1</code>Â å’ŒÂ <code>nums2</code>ï¼Œ<code>nums1</code>Â ç›¸å¯¹äº <code>nums</code>Â çš„ä¼˜åŠ¿å¯ä»¥ç”¨æ»¡è¶³Â <code>nums1[i]</code> &gt; <code>nums2[i]</code>Â çš„ç´¢å¼• <code>i</code>Â çš„æ•°ç›®æ¥æè¿°ã€‚</p><p>è¿”å› <code>nums1</code>Â çš„ä»»æ„æ’åˆ—ï¼Œä½¿å…¶ç›¸å¯¹äº <code>nums2</code>Â çš„ä¼˜åŠ¿æœ€å¤§åŒ–ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">è¾“å…¥ï¼šnums1 = <span class="hljs-string">[2,7,11,15]</span>, nums2 = <span class="hljs-string">[1,10,4,11]</span><br>è¾“å‡ºï¼š<span class="hljs-string">[2,11,7,15]</span><br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">è¾“å…¥ï¼šnums1 = <span class="hljs-string">[12,24,8,32]</span>, nums2 = <span class="hljs-string">[13,25,32,11]</span><br>è¾“å‡ºï¼š<span class="hljs-string">[24,32,8,12]</span><br></code></pre></td></tr></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li><p>1 &lt;&#x3D; nums1.length &lt;&#x3D; 105</p></li><li><p>nums2.length &#x3D;&#x3D; nums1.length</p></li><li><p>0 &lt;&#x3D; nums1[i], nums2[i] &lt;&#x3D; 109</p></li></ul><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><h3 id="æ–¹æ³•ä¸€ï¼šç”°å¿Œèµ›é©¬-gt-è´ªå¿ƒ-åŒæŒ‡é’ˆ"><a href="#æ–¹æ³•ä¸€ï¼šç”°å¿Œèµ›é©¬-gt-è´ªå¿ƒ-åŒæŒ‡é’ˆ" class="headerlink" title="æ–¹æ³•ä¸€ï¼šç”°å¿Œèµ›é©¬ -&gt; è´ªå¿ƒ + åŒæŒ‡é’ˆ"></a>æ–¹æ³•ä¸€ï¼šç”°å¿Œèµ›é©¬ -&gt; è´ªå¿ƒ + åŒæŒ‡é’ˆ</h3><p>è¯¥æ–¹æ¡ˆé‡‡ç”¨çš„æ˜¯ <a href="%5B%E5%8A%9B%E6%89%A3%5D(https://leetcode.cn/problems/advantage-shuffle/solution/tian-ji-sai-ma-by-endlesscheng-yxm6/)">çµç¥</a> çš„é¢˜è§£ï¼Œä¸‹é¢æˆ‘è¯´ä¸€ä¸‹æˆ‘çš„ç†è§£</p><p>é¢˜ç›®è¦æ±‚ä½¿ <code>nums1</code> æ•°ç»„ <strong>â€œæˆ˜èƒœâ€</strong> <code>nums2</code> æ•°ç»„çš„æ¬¡æ•°æœ€å¤§åŒ–</p><p>é€šè¿‡æ­¤å¾ˆå®¹æ˜“æƒ³åˆ°è´ªå¿ƒæ€è·¯ï¼Œå¯¹ <code>nums1</code> ä¸ <code>nums2</code> åˆ†åˆ«è¿›è¡Œæ’åºï¼Œ</p><p>ç„¶åå¯¹æ¯” <code>nums1</code> å½“å‰æœ€å°å€¼ ä¸ <code>nums2</code> å½“å‰æœ€å°å€¼</p><ul><li><p>è‹¥ <code>nums1</code> çš„å½“å‰æœ€å°å€¼å¤§äº <code>nums2</code> çš„å½“å‰æœ€å°å€¼ï¼Œåˆ™ <code>nums1</code> è·èƒœ</p></li><li><p>å¦åˆ™ï¼Œè¯´æ˜ <code>nums1</code> çš„å½“å‰æœ€å°å€¼æ— æ³•æˆ˜èƒœ <code>nums2</code> çš„æ‰€æœ‰å€¼ï¼Œæ‰€ä»¥è®© <code>nums1</code> çš„å½“å‰æœ€å°å€¼ä¸ <code>nums2</code> çš„å½“å‰æœ€å¤§å€¼ä½œæˆ˜ï¼ˆå³å½“â€œç‚®ç°â€ï¼‰ï¼Œè¿™æ ·å¯ä»¥æŠµæ¶ˆæ‰ <code>nums2</code> çš„æœ€å¤§å€¼ã€‚</p></li></ul><p>è¿™å°±æ˜¯å…¸å‹çš„ <code>ç”°å¿Œèµ›é©¬</code> æ€è·¯ï¼Œç”¨ä¸‹ç­‰é©¬å»æˆ˜èƒœä¸Šç­‰é©¬ï¼</p><ul><li><code>nums1</code> çš„ä¸‹ç­‰é©¬æ— æ³•æˆ˜èƒœ <code>nums2</code> çš„ä¸‹ç­‰é©¬æ—¶ï¼Œå°±è®©å…¶å½“ç‚®ç°å»å¯¹æˆ˜ <code>nums2</code> çš„ä¸Šç­‰é©¬</li></ul><p>æ¯ä¸€ä¸ª â€œä½œæˆ˜å›åˆâ€ ç»“æŸä¹‹åï¼Œéœ€è¦å°†æœ¬å›åˆç”¨è¿‡çš„å…ƒç´ æ‘’å¼ƒæ‰ã€‚</p><p>è€Œ <code>nums2</code> çš„æœ€å°å€¼ï¼ˆå³æ•°ç»„å°¾å…ƒç´ ï¼‰æˆ–æœ€å¤§å€¼ï¼ˆå³æ•°ç»„é¦–å…ƒç´ ï¼‰å‡å¯èƒ½è¢«ä½¿ç”¨ï¼Œæ‰€ä»¥æœ¬é¢˜é‡‡ç”¨ <code>é¦–å°¾åŒæŒ‡é’ˆ</code> æ€è·¯ï¼Œé€æ¸ç¼©å°é—®é¢˜è§„æ¨¡ï¼Œæœ€ç»ˆå¾—åˆ°å…¨éƒ¨å¯¹åº”å…³ç³»ã€‚</p><p>ä½†åœ¨ä»£ç å…·ä½“å®ç°è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå¯¹ä¸¤ä¸ªæ•°ç»„å‡è¿›è¡Œæ’åºï¼Œåˆ™ä¸¢å¤±äº†åŸæœ¬çš„ â€ä½œæˆ˜â€œ é¡ºåºï¼Œæ‰€ä»¥åªå¯¹ <code>nums1</code> è¿›è¡Œæ’åºã€‚ç”¨é¢å¤–çš„ä¸‹æ ‡æ•°ç»„ <code>ids</code>ï¼Œæ ¹æ® <code>nums2</code> çš„å…ƒç´ å¤§å°ï¼Œå¯¹å…¶ä¸‹æ ‡è¿›è¡Œæ’åºã€‚<code>ids[0]</code> å¯¹åº” <code>nums2</code> ç¬¬ä¸€å°å€¼ä¸‹æ ‡ï¼Œ<code>ids[1]</code> å¯¹åº” <code>nums2</code> ç¬¬äºŒå°å€¼ä¸‹æ ‡â€¦</p><p>é€šè¿‡ <code>ids</code> æ•°ç»„ï¼Œå°±å¯ä»¥çŸ¥é“å½“å‰ <code>nums2</code> ä¸‹æ ‡æ‰€è¦å¯¹åº”çš„ <code>nums1</code> å…ƒç´ ã€‚</p><p>æ„Ÿè§‰è¿™é“é¢˜ç›´æ¥çœ‹ä»£ç æ›´å®¹æ˜“ç†è§£ã€‚</p><h4 id="Python3"><a href="#Python3" class="headerlink" title="Python3"></a>Python3</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">advantageCount</span>(<span class="hljs-params">self, nums1: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], nums2: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:<br>        n = <span class="hljs-built_in">len</span>(nums1)<br>        ans = [<span class="hljs-number">0</span>] * n<br>        nums1.sort()<br>        ids = <span class="hljs-built_in">sorted</span>(<span class="hljs-built_in">range</span>(n), key=<span class="hljs-keyword">lambda</span> i: nums2[i])<br>        left, right = <span class="hljs-number">0</span>, n - <span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> nums1:<br>            <span class="hljs-keyword">if</span> x &gt; nums2[ids[left]]:<br>                ans[ids[left]] = x  <br>                left += <span class="hljs-number">1</span><br>            <span class="hljs-keyword">else</span>:<br>                ans[ids[right]] = x  <br>                right -= <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> ans<br></code></pre></td></tr></table></figure><h4 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h4><p>æ³¨æ„ï¼šJavaé‡‡ç”¨æ¯”è¾ƒå™¨æ’åºæ—¶ï¼Œåªèƒ½ä½¿ç”¨åŒ…è£…ç±»Integer</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span>[] advantageCount(<span class="hljs-type">int</span>[] nums1, <span class="hljs-type">int</span>[] nums2) &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">len</span> <span class="hljs-operator">=</span> nums2.length;<br>        Integer[] ids = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>[len];<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; len; i++) ids[i] = i;<br>        Arrays.sort(nums1);<br>        Arrays.sort(ids, (a, b) -&gt; nums2[a] - nums2[b]);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">p</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, q = len - <span class="hljs-number">1</span>;<br>        <span class="hljs-type">int</span>[] ans = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[len];<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> x : nums1) &#123;<br>            <span class="hljs-keyword">if</span>(x &gt; nums2[ids[p]]) ans[ids[p++]] = x;<br>            <span class="hljs-keyword">else</span> ans[ids[q--]] = x;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Encouragement"><a href="#Encouragement" class="headerlink" title="Encouragement"></a>Encouragement</h2><p>ç›®å‰å°±è¯»äºæ–°åŠ å¡å›½ç«‹å¤§å­¦ï¼Œè½¬ç èœé¸¡ä¸€æšã€‚</p><p>å†³å¿ƒé€šè¿‡æ—¥æ›´ä¸€ç¯‡é¢˜è§£æ¿€åŠ±è‡ªå·±åšæŒåˆ·é¢˜ï¼ŒåšæŒå­¦ä¹ ç®—æ³•ã€‚</p><p>è¿™æ˜¯æˆ‘æ­å»º<a href="https://github.com/ltyzzzxxx/Leetcode-Everyday">Leetcode-Everyday</a>ä»“åº“åå‘å¸ƒã®ç¬¬15ç¯‡é¢˜è§£ï¼Œæ¬¢è¿å„ä½starå¹¶æå‡ºIssue~</p><p>ç‚¹å‡»<a href="https://leetcode.cn/u/ltyzzz/">è¿™é‡Œ</a>ï¼Œè¿›å…¥æˆ‘çš„ä¸ªäººLeetcodeä¸»é¡µ~</p>]]></content>
    
    
    <categories>
      
      <category>Leetcodeé¢˜è§£</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LC-Solution 1800. Maximum Ascending Subarray Sum</title>
    <link href="/2022/10/07/LC-Solution-1800-Maximum-Ascending-Subarray-Sum/"/>
    <url>/2022/10/07/LC-Solution-1800-Maximum-Ascending-Subarray-Sum/</url>
    
    <content type="html"><![CDATA[<p><a href="https://leetcode.cn/problems/maximum-ascending-subarray-sum/">1800. æœ€å¤§å‡åºå­æ•°ç»„å’Œ</a></p><h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>ç»™ä½ ä¸€ä¸ªæ­£æ•´æ•°ç»„æˆçš„æ•°ç»„ <code>nums</code> ï¼Œè¿”å› <code>nums</code> ä¸­ä¸€ä¸ª <strong>å‡åº</strong> å­æ•°ç»„çš„æœ€å¤§å¯èƒ½å…ƒç´ å’Œã€‚</p><p>å­æ•°ç»„æ˜¯æ•°ç»„ä¸­çš„ä¸€ä¸ªè¿ç»­æ•°å­—åºåˆ—ã€‚</p><p>å·²çŸ¥å­æ•°ç»„ <code>[numsl, numsl+1, ..., numsr-1, numsr]</code> ï¼Œè‹¥å¯¹æ‰€æœ‰ <code>i</code>ï¼ˆ<code>l &lt;= i &lt; r</code>ï¼‰ï¼Œ<code>numsi</code> &lt; <code>numsi+1</code> éƒ½æˆç«‹ï¼Œåˆ™ç§°è¿™ä¸€å­æ•°ç»„ä¸º <strong>å‡åº</strong> å­æ•°ç»„ã€‚æ³¨æ„ï¼Œå¤§å°ä¸º 1 çš„å­æ•°ç»„ä¹Ÿè§†ä½œ <strong>å‡åº</strong> å­æ•°ç»„ã€‚</p><p><strong>ç¤ºä¾‹1ï¼š</strong></p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šnums = <span class="hljs-comment">[10,20,30,5,10,50]</span><br>è¾“å‡ºï¼š65<br>è§£é‡Šï¼š<span class="hljs-comment">[5,10,50]</span> æ˜¯å…ƒç´ å’Œæœ€å¤§çš„å‡åºå­æ•°ç»„ï¼Œæœ€å¤§å…ƒç´ å’Œä¸º 65 ã€‚<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹2ï¼š</strong></p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">è¾“å…¥ï¼šnums = <span class="hljs-string">[10,20,30,40,50]</span><br>è¾“å‡ºï¼š<span class="hljs-number">150</span><br>è§£é‡Šï¼š<span class="hljs-string">[10,20,30,40,50]</span> æ˜¯å…ƒç´ å’Œæœ€å¤§çš„å‡åºå­æ•°ç»„ï¼Œæœ€å¤§å…ƒç´ å’Œä¸º <span class="hljs-number">150</span> ã€‚<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹3ï¼š</strong></p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šnums = <span class="hljs-comment">[12,17,15,13,10,11,12]</span><br>è¾“å‡ºï¼š33<br>è§£é‡Šï¼š<span class="hljs-comment">[10,11,12]</span> æ˜¯å…ƒç´ å’Œæœ€å¤§çš„å‡åºå­æ•°ç»„ï¼Œæœ€å¤§å…ƒç´ å’Œä¸º 33 ã€‚ <br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹4ï¼š</strong></p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dns">è¾“å…¥ï¼šnums = [<span class="hljs-number">100,10,1</span>]<br>è¾“å‡ºï¼š<span class="hljs-number">100</span><br></code></pre></td></tr></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li><code>1 &lt;= nums.length &lt;= 100</code></li><li><code>1 &lt;= nums[i] &lt;= 100</code></li></ul><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><h3 id="æ–¹æ³•ä¸€ï¼šç®€å•æ¨¡æ‹Ÿ"><a href="#æ–¹æ³•ä¸€ï¼šç®€å•æ¨¡æ‹Ÿ" class="headerlink" title="æ–¹æ³•ä¸€ï¼šç®€å•æ¨¡æ‹Ÿ"></a>æ–¹æ³•ä¸€ï¼šç®€å•æ¨¡æ‹Ÿ</h3><p>éå†æ•°ç»„ï¼Œæ¯”è¾ƒç›¸é‚»å…ƒç´ ä¹‹é—´æ˜¯å¦æ»¡è¶³å‡åºæ¡ä»¶ã€‚</p><p>ç”¨ <code>s</code> è®°å½•å½“å‰å‡åºå­æ•°ç»„çš„å’Œï¼Œç”¨ <code>ans</code> è®°å½•æœ€ç»ˆæœ€å¤§çš„å’Œã€‚</p><ul><li><p>è‹¥å½“å‰å…ƒç´ å¤§äºå‰ä¸€ä¸ªå…ƒç´ ï¼ˆ <code>nums[i] &gt; nums[i - 1</code>] ï¼‰ï¼Œå°†å½“å‰å…ƒç´  <code>nums[i]</code> ç´¯åŠ åˆ° <code>s</code> ä¸­ï¼Œå¹¶æ›´æ–° <code>ans = max(ans, s)</code></p></li><li><p>å¦åˆ™ï¼Œå°† <code>s</code> é‡ç½®ä¸ºå½“å‰å…ƒç´ ï¼Œå³ <code>s = nums[i]</code></p></li></ul><h4 id="Python3"><a href="#Python3" class="headerlink" title="Python3"></a>Python3</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">maxAscendingSum</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:<br>        ans = s = nums[<span class="hljs-number">0</span>]<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-built_in">len</span>(nums)):<br>            <span class="hljs-keyword">if</span> nums[i] &gt; nums[i - <span class="hljs-number">1</span>]:<br>                s += nums[i]<br>                ans = <span class="hljs-built_in">max</span>(ans, s)<br>            <span class="hljs-keyword">else</span>:<br>                s = nums[i]<br>        <span class="hljs-keyword">return</span> ans      <br></code></pre></td></tr></table></figure><h4 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">maxAscendingSum</span><span class="hljs-params">(<span class="hljs-type">int</span>[] nums)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> nums[<span class="hljs-number">0</span>], sum = nums[<span class="hljs-number">0</span>];<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; nums.length; i++) &#123;<br>            <span class="hljs-keyword">if</span>(nums[i] &gt; nums[i - <span class="hljs-number">1</span>]) &#123;<br>                sum += nums[i];<br>                ans = Math.max(ans, sum);<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                sum = nums[i];<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Encouragement"><a href="#Encouragement" class="headerlink" title="Encouragement"></a>Encouragement</h2><p>ç›®å‰å°±è¯»äºæ–°åŠ å¡å›½ç«‹å¤§å­¦ï¼Œè½¬ç èœé¸¡ä¸€æšã€‚</p><p>å†³å¿ƒé€šè¿‡æ—¥æ›´ä¸€ç¯‡é¢˜è§£æ¿€åŠ±è‡ªå·±åšæŒåˆ·é¢˜ï¼ŒåšæŒå­¦ä¹ ç®—æ³•ã€‚</p><p>è¿™æ˜¯æˆ‘æ­å»º<a href="https://github.com/ltyzzzxxx/Leetcode-Everyday">Leetcode-Everyday</a>ä»“åº“åå‘å¸ƒã®ç¬¬14ç¯‡é¢˜è§£ï¼Œæ¬¢è¿å„ä½starå¹¶æå‡ºIssue~</p><p>ç‚¹å‡»<a href="https://leetcode.cn/u/ltyzzz/">è¿™é‡Œ</a>ï¼Œè¿›å…¥æˆ‘çš„ä¸ªäººLeetcodeä¸»é¡µ~</p>]]></content>
    
    
    <categories>
      
      <category>Leetcodeé¢˜è§£</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hexoä»0åˆ°1æ­å»ºåšå®¢ç³»åˆ—03ï¼šæ–‡ç« ä¸è¯„è®ºæ¨¡å—</title>
    <link href="/2022/10/05/Hexo%E4%BB%8E0%E5%88%B01%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%B3%BB%E5%88%9703%EF%BC%9A%E6%96%87%E7%AB%A0%E4%B8%8E%E8%AF%84%E8%AE%BA%E6%A8%A1%E5%9D%97/"/>
    <url>/2022/10/05/Hexo%E4%BB%8E0%E5%88%B01%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%B3%BB%E5%88%9703%EF%BC%9A%E6%96%87%E7%AB%A0%E4%B8%8E%E8%AF%84%E8%AE%BA%E6%A8%A1%E5%9D%97/</url>
    
    <content type="html"><![CDATA[<h1 id="Hexoä»0åˆ°1æ­å»ºåšå®¢ç³»åˆ—03ï¼šæ–‡ç« ä¸è¯„è®ºæ¨¡å—"><a href="#Hexoä»0åˆ°1æ­å»ºåšå®¢ç³»åˆ—03ï¼šæ–‡ç« ä¸è¯„è®ºæ¨¡å—" class="headerlink" title="Hexoä»0åˆ°1æ­å»ºåšå®¢ç³»åˆ—03ï¼šæ–‡ç« ä¸è¯„è®ºæ¨¡å—"></a>Hexoä»0åˆ°1æ­å»ºåšå®¢ç³»åˆ—03ï¼šæ–‡ç« ä¸è¯„è®ºæ¨¡å—</h1><h2 id="1-æ–‡ç« çš„ç¼–è¾‘ä¸å‘å¸ƒ"><a href="#1-æ–‡ç« çš„ç¼–è¾‘ä¸å‘å¸ƒ" class="headerlink" title="1. æ–‡ç« çš„ç¼–è¾‘ä¸å‘å¸ƒ"></a>1. æ–‡ç« çš„ç¼–è¾‘ä¸å‘å¸ƒ</h2><p>åœ¨è¿™ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬ä¸»è¦å­¦ä¹ å¦‚ä½•ç¼–è¾‘æ–‡ç« ï¼Œå¹¶å°†å…¶å‘å¸ƒåœ¨Hexoåšå®¢ä¸Šã€‚</p><p>è¿™ä¸€éƒ¨åˆ†æˆ‘ä»¬ä»ç„¶åœ¨Hexoåšå®¢æ ¹ç›®å½•ä¸Šæ“ä½œã€‚</p><ol><li>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œåˆ›å»ºä¸€ç¯‡æ–°çš„æ–‡ç« ã€‚å¼•å·å†…ä¸ºåšå®¢çš„æ ‡é¢˜</li></ol>  <figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs actionscript">hexo <span class="hljs-keyword">new</span> <span class="hljs-string">&quot;&quot;</span><br>e.g.: hexo <span class="hljs-keyword">new</span> <span class="hljs-string">&quot;æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢&quot;</span><br></code></pre></td></tr></table></figure><p>  å¦‚å›¾æ‰€ç¤ºï¼Œè¯¥åšå®¢å·²ç»è¢«åˆ›å»ºåˆ° <code>source/_posts</code> ç›®å½•ä¸‹å•¦</p><p>  <img src="https://lty-image-bed.oss-cn-shenzhen.aliyuncs.com/blog/first-blog.png"></p><ol start="2"><li>ç¼–è¾‘è¯¥é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼ˆå¯ä»¥é‡‡ç”¨ <a href="https://github.com/marktext/marktext">MarkText</a> è¿›è¡Œç¼–è¾‘ï¼Œè¿™ä¸ªæ˜¯å…è´¹çš„ï¼‰</li></ol>  <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-meta">---</span><br><span class="hljs-attr">title:</span> <span class="hljs-string">æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢</span><br><span class="hljs-attr">date:</span> <span class="hljs-number">2022-10-05 16:00:30</span><br><span class="hljs-attr">tags:</span><br><span class="hljs-meta">---</span><br></code></pre></td></tr></table></figure><p>  å…¶ä¸­åŒ…å«äº†åšå®¢çš„ <code>title</code>ã€<code>date</code>ã€<code>tags</code>ä¿¡æ¯</p><ol start="3"><li>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç¼–è¾‘åšå®¢çš„ <code>tags</code> ä¸ <code>categories</code>ï¼Œä»ç„¶éœ€è¦æ³¨æ„ <code>yaml</code> æ ¼å¼</li></ol>  <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-meta">---</span><br><span class="hljs-attr">title:</span> <span class="hljs-string">æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢</span><br><span class="hljs-attr">date:</span> <span class="hljs-number">2022-10-05 16:00:30</span><br><span class="hljs-attr">tags:</span> [<span class="hljs-string">å­¦ä¹ æ„Ÿæ‚Ÿ</span>, <span class="hljs-string">çŸ¥è¯†åˆ†äº«</span>, <span class="hljs-string">Java</span>]<br><span class="hljs-attr">categories:</span> [<span class="hljs-string">JavaåŸºç¡€</span>]<br><span class="hljs-meta">---</span><br></code></pre></td></tr></table></figure><ol start="4"><li>åœ¨ä¸‹é¢æ¥ç€ç¼–è¾‘åšå®¢å†…å®¹ï¼ˆå¯ä»¥é‡‡ç”¨ <a href="https://github.com/marktext/marktext">MarkText</a> è¿›è¡Œç¼–è¾‘ï¼Œè¿™ä¸ªæ˜¯å…è´¹çš„ï¼‰</li></ol><p>  ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>  <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-meta">---</span><br><span class="hljs-attr">title:</span> <span class="hljs-string">æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢</span><br><span class="hljs-attr">date:</span> <span class="hljs-number">2022-10-05 16:00:30</span><br><span class="hljs-attr">tags:</span> [<span class="hljs-string">å­¦ä¹ æ„Ÿæ‚Ÿ</span>, <span class="hljs-string">çŸ¥è¯†åˆ†äº«</span>, <span class="hljs-string">Java</span>]<br><span class="hljs-attr">categories:</span> [<span class="hljs-string">JavaåŸºç¡€</span>]<br><span class="hljs-meta">---</span><br><span class="hljs-meta"></span><br><span class="hljs-comment"># æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢</span><br><br><span class="hljs-comment">## 1. JavaåŸºç¡€</span><br><br><span class="hljs-string">Javaæ˜¯ä¸€é—¨åç«¯è¯­è¨€ï¼Œæˆ‘çˆ±Javaã€‚</span><br><br><span class="hljs-comment">## 2. Javaå®æˆ˜</span><br><br><span class="hljs-string">ç¬¬ä¸€è¡Œä»£ç </span><br><br><span class="hljs-string">```java</span><br><span class="hljs-string">System.out.println(&quot;Hello</span> <span class="hljs-string">World!&quot;);</span><br></code></pre></td></tr></table></figure><ol start="5"><li><code>Ctrl + S</code> ä¿å­˜ï¼Œç„¶åå°†åšå®¢è¿è¡Œåˆ°æœ¬åœ°æœåŠ¡å™¨ã€‚</li></ol>  <figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta">hexo <span class="hljs-keyword">server</span><br></code></pre></td></tr></table></figure><p>è¿™æ ·ä¸€æ¥å°±å¯ä»¥å®Œæˆåšå®¢çš„ç¼–è¾‘ä¸å‘å¸ƒå•¦ï¼Œçœ‹çœ‹æˆå“å§~</p><p>ä¸‹é¢é‚£ä¸€ç¯‡æ˜¯ <code>Hexo</code> åˆå§‹åŒ–çš„æ–‡ç« </p><p><img src="https://lty-image-bed.oss-cn-shenzhen.aliyuncs.com/blog/blog-content1.png" alt="https//cdnjsdelivrnet/gh/ltyzzzxxx/ltyzzzImageBed/blogimg/blogcontentpng"></p><p>è¿›å…¥ <code>åˆ†ç±»</code>ã€<code>æ ‡ç­¾</code> é¡µå¯ä»¥çœ‹åˆ°ç›¸åº”çš„å†…å®¹</p><h2 id="2-å¼•å…¥è¯„è®ºæ¨¡å—"><a href="#2-å¼•å…¥è¯„è®ºæ¨¡å—" class="headerlink" title="2. å¼•å…¥è¯„è®ºæ¨¡å—"></a>2. å¼•å…¥è¯„è®ºæ¨¡å—</h2><p>å¼•å…¥è¯„è®ºå¬èµ·æ¥éå¸¸é«˜å¤§ä¸Šã€‚å¦‚æœè‡ªå·±æ‰‹åŠ¨æ­å»ºä¸€ä¸ªè¯„è®ºç³»ç»Ÿï¼Œå°†æ˜¯éœ€è¦ä¸€å®šæŠ€æœ¯çš„å·¥ä½œï¼Œè€Œåœ¨<code>Hexo-Fluid</code> ä¸­ï¼Œè¿™ä»…ä»…åªæ˜¯ä¸€ä¸ªç®€å•çš„é…ç½®</p><ol><li>æ‰“å¼€ä¹‹å‰ç²˜è´´å¥½çš„ <code>_config.fluid.yml</code> æ–‡ä»¶ï¼Œæ‰¾åˆ°ä»¥ä¸‹å†…å®¹ã€‚</li></ol>  <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">post:</span><br>  <span class="hljs-attr">comments:</span><br>    <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">type:</span> <span class="hljs-string">disqus</span><br></code></pre></td></tr></table></figure><p>  è¿™é‡Œæˆ‘æ¨èä½¿ç”¨å¦å¤–ä¸€ä¸ªè¯„è®ºæ’ä»¶ <code>Valine</code>ï¼Œæ‰€ä»¥å°†typeè¿›è¡Œç›¸åº”çš„æ›´æ”¹ã€‚</p>  <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">post:</span><br>  <span class="hljs-attr">comments:</span><br>    <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">type:</span> <span class="hljs-string">valine</span><br></code></pre></td></tr></table></figure><p>  å…¶ä»–è¯„è®ºæ’ä»¶å®˜æ–¹æ–‡æ¡£æœ‰è¯¦ç»†çš„å†™ï¼Œå¦‚æœæƒ³å°è¯•å…¶ä»–çš„ï¼Œè¯·ç‚¹å‡»[è¿™é‡Œ](<a href="https://hexo.fluid-dev.com/docs/guide/#%E8%AF%84%E8%AE%BA">é…ç½®æŒ‡å— | Hexo Fluid ç”¨æˆ·æ‰‹å†Œ</a>)æŸ¥æ‰¾~</p><ol start="2"><li><p>è¿›å…¥ <a href="https://valine.js.org/quickstart.html">Valine</a> ä¸»é¡µï¼Œæ³¨å†Œä¸€ä¸ª <code>LeanCloud</code> è´¦å·ï¼Œç„¶åå®Œæˆç›¸åº”çš„å®åè®¤è¯ã€‚è¿™ä¸€éƒ¨åˆ†å°±æ¯”è¾ƒç®€å•å•¦ï¼Œä¸å†èµ˜è¿°ã€‚</p></li><li><p>è¿›å…¥ <code>LeanCloud</code> ä¸ªäººä¸»é¡µæ§åˆ¶å°ï¼Œå·¦ä¸Šè§’åˆ›å»ºåº”ç”¨ã€‚</p></li></ol><p>  æˆ‘å·²ç»åˆ›å»ºè¿‡å•¦ï¼Œå°±ä¸å†åˆ›å»ºäº†ã€‚</p><p>  <img src="https://lty-image-bed.oss-cn-shenzhen.aliyuncs.com/blog/leadcloud-page.png"></p><ol start="4"><li>ç‚¹å‡»è¿›å…¥åˆ›å»ºå¥½çš„åº”ç”¨ï¼Œç‚¹å‡»å·¦ä¾§èœå• è®¾ç½® - åº”ç”¨å‡­è¯ï¼Œå°±å¯ä»¥çœ‹åˆ°ç›¸åº”çš„é…ç½®ä¿¡æ¯å•¦</li></ol><p>  <img src="https://lty-image-bed.oss-cn-shenzhen.aliyuncs.com/blog/leancloud-key.png"></p><ol start="5"><li>å°† <code>AppID</code> ä¸ <code>AppKey</code> å¤åˆ¶å¹¶ç²˜è´´åˆ° <code>_config.fluid.yml</code> æ–‡ä»¶ä¸­å¦‚ä¸‹ç›¸åº”çš„ä½ç½®</li></ol>  <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">valine:</span><br>  <span class="hljs-attr">appId:</span> <span class="hljs-string">xxxxx</span><br>  <span class="hljs-attr">appKey:</span> <span class="hljs-string">xxxxx</span><br></code></pre></td></tr></table></figure><ol start="6"><li>ä¿å­˜é…ç½®æ–‡ä»¶ï¼Œå†æ¬¡è¿è¡Œåšå®¢åˆ°æœ¬åœ°æœåŠ¡å™¨</li></ol>  <figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta">hexo <span class="hljs-keyword">server</span><br></code></pre></td></tr></table></figure><p>æ‰“å¼€ä¹‹å‰å‘å¸ƒçš„åšå®¢é¡µï¼Œæ‹‰åˆ°æœ€åº•éƒ¨ï¼Œå³å¯çœ‹åˆ°è¯„è®ºç•Œé¢å•¦~</p><p><img src="https://lty-image-bed.oss-cn-shenzhen.aliyuncs.com/blog/comment.png"></p><p>ç”±äº <code>Valine</code> æ˜¯ä¸€ä¸ªæ— åç«¯è¯„è®ºç³»ç»Ÿï¼Œæƒ³è¦ç®¡ç†è¯„è®ºçš„è¯ï¼Œå¾—å» <code>LeanCloud</code> åå°æ•°æ®å­˜å‚¨è¿›è¡Œç®¡ç†ç›¸å…³è¯„è®ºæ•°æ®ã€‚</p><h2 id="3-åè®°"><a href="#3-åè®°" class="headerlink" title="3. åè®°"></a>3. åè®°</h2><p>å¦‚æœå¤§å®¶è§‰å¾—æˆ‘çš„å†…å®¹å†™çš„è¿˜ä¸é”™ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºç•™è¨€æ”¯æŒä¸€ä¸‹å‘€~</p><p>æ¬¢è¿å¤§å®¶æ¥é€›ä¸€é€›æˆ‘çš„<a href="https://ltyzzzxxx.github.io/">ä¸ªäººåšå®¢</a>~</p><p>æ­¤å¤–ï¼Œä»2022.10.1å¼€å§‹ï¼Œä¸ºæ¿€åŠ±è‡ªå·±æŒç»­åˆ·é¢˜ï¼Œæˆ‘å¼€å§‹æŒç»­æ—¥æ›´Leetcodeé¢˜è§£å•¦~</p><p>æ‰€æœ‰é¢˜è§£å‡å·²æ”¾åˆ°<a href="https://github.com/ltyzzzxxx/Leetcode-Everyday">Githubä»“åº“</a>ä¸­ï¼Œæ¬¢è¿å¤§å®¶Starå¹¶æå‡ºIssue~</p>]]></content>
    
    
    <categories>
      
      <category>Hexoæ­å»ºåšå®¢</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hexo</tag>
      
      <tag>Fluid</tag>
      
      <tag>åšå®¢</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hexoä»0åˆ°1æ­å»ºåšå®¢ç³»åˆ—02ï¼šå¼•å…¥Fluid</title>
    <link href="/2022/10/05/Hexo%E4%BB%8E0%E5%88%B01%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%B3%BB%E5%88%9702%EF%BC%9A%E5%BC%95%E5%85%A5Fluid/"/>
    <url>/2022/10/05/Hexo%E4%BB%8E0%E5%88%B01%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%B3%BB%E5%88%9702%EF%BC%9A%E5%BC%95%E5%85%A5Fluid/</url>
    
    <content type="html"><![CDATA[<h1 id="Hexoä»0åˆ°1æ­å»ºåšå®¢ç³»åˆ—02ï¼šå¼•å…¥Fluid"><a href="#Hexoä»0åˆ°1æ­å»ºåšå®¢ç³»åˆ—02ï¼šå¼•å…¥Fluid" class="headerlink" title="Hexoä»0åˆ°1æ­å»ºåšå®¢ç³»åˆ—02ï¼šå¼•å…¥Fluid"></a>Hexoä»0åˆ°1æ­å»ºåšå®¢ç³»åˆ—02ï¼šå¼•å…¥Fluid</h1><h2 id="1-Fluidç®€ä»‹"><a href="#1-Fluidç®€ä»‹" class="headerlink" title="1. Fluidç®€ä»‹"></a>1. Fluidç®€ä»‹</h2><blockquote><p>Fluid [å®˜ç½‘](<a href="https://hexo.fluid-dev.com/docs/start/">å¼€å§‹ä½¿ç”¨ | Hexo Fluid ç”¨æˆ·æ‰‹å†Œ</a>)</p><p>Fluid æ˜¯åŸºäº Hexo çš„ä¸€æ¬¾ Material Design é£æ ¼çš„ä¸»é¢˜ï¼Œç”±Â Fluid-devÂ è´Ÿè´£å¼€å‘ä¸ç»´æŠ¤ã€‚</p><p>ä¸»é¢˜ GitHub:Â <a href="https://github.com/fluid-dev/hexo-theme-fluid">https://github.com/fluid-dev/hexo-theme-fluid</a></p><p>é¢„è§ˆç½‘ç«™ï¼š<a href="https://hexo.fluid-dev.com/">Fluidâ€™s blog</a> <a href="https://zkqiang.cn/">zkqiangâ€™s blog</a></p></blockquote><p>Fluidå…¶å®å°±æ˜¯åŸºäºHexoç°æœ‰åŠŸèƒ½ï¼Œè¿›è¡Œäº†æ›´è¿›ä¸€æ­¥çš„é…ç½®ã€ç¾åŒ–ï¼Œå¼•å…¥äº†å¾ˆå¤šæ–°çš„åŠŸèƒ½ï¼Œä½¿æˆ‘ä»¬çš„åšå®¢å˜å¾—æ›´åŠ ç¾è§‚ã€ç®€æ´ä¸é«˜æ•ˆã€‚</p><p>åœ¨è¿›è¡ŒFluidå®æˆ˜ä¹‹å‰ï¼Œå¿…é¡»å¾—å…ˆæ­å»ºå¥½HexoåŸºç¡€åšå®¢ã€‚</p><h2 id="2-Fluidç®€å•å®æˆ˜"><a href="#2-Fluidç®€å•å®æˆ˜" class="headerlink" title="2. Fluidç®€å•å®æˆ˜"></a>2. Fluidç®€å•å®æˆ˜</h2><ol><li>è¿›å…¥ä¹‹å‰æ­å»ºå¥½çš„ <code>Hexo</code> åšå®¢ç›®å½•ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå®‰è£… <code>fluid</code> ä¸»é¢˜</li></ol>  <figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">npm install <span class="hljs-comment">--save hexo-theme-fluid</span><br></code></pre></td></tr></table></figure><p>  <img src="https://lty-image-bed.oss-cn-shenzhen.aliyuncs.com/blog/fluid-install.png"></p><ol start="2"><li>åœ¨åšå®¢ç›®å½•ä¸‹åˆ›å»º <code>_config.fluid.yml</code>ï¼Œå°† <code>fluid</code> ä¸»é¢˜è‡ªå·±çš„ <code>_config.yml</code> ç²˜è´´è¿›å»ã€‚</li></ol><p>  è¿™ä¸€æ­¥å¾ˆé‡è¦ï¼Œä¸€å®šè¦è¿›å…¥<a href="https://github.com/fluid-dev/hexo-theme-fluid/blob/master/_config.yml%E8%BF%99%E4%B8%80%E7%BD%91%E9%A1%B5%EF%BC%8C">https://github.com/fluid-dev/hexo-theme-fluid/blob/master/_config.ymlè¿™ä¸€ç½‘é¡µï¼Œ</a> å°†å¯¹åº”çš„æ–‡ä»¶ç²˜è´´åˆ°ä¹‹å‰åˆ›å»ºå¥½çš„ç©ºçš„<code>_config.fluid.yml</code>æ–‡ä»¶ä¸­ã€‚è¿™ä¸ªæ–‡ä»¶å¾ˆé•¿ï¼Œæ‰€ä»¥æ²¡åŠæ³•è´´åœ¨è¿™é‡Œï¼Œè§è°…~</p><ol start="3"><li>æ‰“å¼€åˆ›å»ºå¥½çš„ <code>Hexo</code> åšå®¢ç›®å½•ä¸‹çš„ <code>_config.yml</code> ï¼Œå°†å¯¹åº”é…ç½®é¡¹ä¿®æ”¹ä¸ºä»¥ä¸‹å†…å®¹</li></ol><p>  ä¸€å®šè¦æ³¨æ„è¿™æ˜¯ <code>yaml</code> æ ¼å¼æ–‡ä»¶ï¼Œå†’å·åä¸€å®šè¦æœ‰ç©ºæ ¼ã€‚</p><p>  çµæ´»ä½¿ç”¨ <code>Ctrl + F</code> æœç´¢å…³é”®å­—</p>  <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">theme:</span> <span class="hljs-string">fluid</span>  <span class="hljs-comment"># æŒ‡å®šä¸»é¢˜</span><br><br><span class="hljs-attr">language:</span> <span class="hljs-string">zh-CN</span>  <span class="hljs-comment"># æŒ‡å®šè¯­è¨€ï¼Œä¼šå½±å“ä¸»é¢˜æ˜¾ç¤ºçš„è¯­è¨€ï¼ŒæŒ‰éœ€ä¿®æ”¹</span><br></code></pre></td></tr></table></figure><p>ä»ç„¶æ˜¯ä½¿ç”¨ <code>hexo server</code> å‘½ä»¤è¿è¡Œåˆ°æœ¬åœ°</p><p>å±•ç¤ºä¸€ä¸‹æˆå“å§~</p><p><img src="file:///Users/lty/Downloads/hexo-fluid-page.png?msec=1664956366776"></p><p>æ˜¯ä¸æ˜¯ç¬é—´æ¯”ä¹‹å‰HexoåŸºç¡€åšå®¢æå‡äº†ä¸€ä¸ªæ¡£æ¬¡ï¼Ÿ</p><p>ä¹‹åæˆ‘ä»¬çš„å¤§éƒ¨åˆ†åŠŸèƒ½å°†åœ¨ <code>_config.fluid.yml</code> æ–‡ä»¶é‡Œå®Œæˆé…ç½®~</p><h2 id="3-åè®°"><a href="#3-åè®°" class="headerlink" title="3. åè®°"></a>3. åè®°</h2><p>å¦‚æœå¤§å®¶è§‰å¾—æˆ‘çš„å†…å®¹å†™çš„è¿˜ä¸é”™ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºç•™è¨€æ”¯æŒä¸€ä¸‹å‘€~</p><p>æ¬¢è¿å¤§å®¶æ¥é€›ä¸€é€›æˆ‘çš„<a href="https://ltyzzzxxx.github.io/">ä¸ªäººåšå®¢</a>~</p><p>æ­¤å¤–ï¼Œä»2022.10.1å¼€å§‹ï¼Œä¸ºæ¿€åŠ±è‡ªå·±æŒç»­åˆ·é¢˜ï¼Œæˆ‘å¼€å§‹æŒç»­æ—¥æ›´Leetcodeé¢˜è§£å•¦~</p><p>æ‰€æœ‰é¢˜è§£å‡å·²æ”¾åˆ°<a href="https://github.com/ltyzzzxxx/Leetcode-Everyday">Githubä»“åº“</a>ä¸­ï¼Œæ¬¢è¿å¤§å®¶Starå¹¶æå‡ºIssue~</p>]]></content>
    
    
    <categories>
      
      <category>Hexoæ­å»ºåšå®¢</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hexo</tag>
      
      <tag>Fluid</tag>
      
      <tag>åšå®¢</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hexoä»0åˆ°1æ­å»ºåšå®¢ç³»åˆ—01ï¼šæµ…å°Hexo.md</title>
    <link href="/2022/10/05/Hexo%E4%BB%8E0%E5%88%B01%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%B3%BB%E5%88%9701%EF%BC%9A%E6%B5%85%E5%B0%9DHexo-md/"/>
    <url>/2022/10/05/Hexo%E4%BB%8E0%E5%88%B01%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%B3%BB%E5%88%9701%EF%BC%9A%E6%B5%85%E5%B0%9DHexo-md/</url>
    
    <content type="html"><![CDATA[<h1 id="Hexoä»0åˆ°1æ­å»ºåšå®¢ç³»åˆ—01ï¼šæµ…å°Hexo"><a href="#Hexoä»0åˆ°1æ­å»ºåšå®¢ç³»åˆ—01ï¼šæµ…å°Hexo" class="headerlink" title="Hexoä»0åˆ°1æ­å»ºåšå®¢ç³»åˆ—01ï¼šæµ…å°Hexo"></a>Hexoä»0åˆ°1æ­å»ºåšå®¢ç³»åˆ—01ï¼šæµ…å°Hexo</h1><h2 id="1-å‰è¨€"><a href="#1-å‰è¨€" class="headerlink" title="1. å‰è¨€"></a>1. å‰è¨€</h2><p>ä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜ï¼Œæˆ‘ä»¬æ€»æ˜¯æƒ³è®°å½•ä¸€äº›è‡ªå·±æ—¥å¸¸å­¦ä¹ çš„ä¸œè¥¿ã€è‡ªå·±å¯¹äºæŠ€æœ¯çš„æ€è€ƒä»¥åŠè‡ªå·±å¹³æ—¶æŠ˜è…¾çš„ä¸€äº›å°é¡¹ç›®ã€‚ä½†æ˜¯è‡ªå·±æ‰‹åŠ¨æ­å»ºä¸€ä¸ªåšå®¢æ˜¯å¾ˆè´¹æ—¶è´¹åŠ›çš„ä¸€ä»¶äº‹æƒ…ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘ä¸€ä¸‹å‡ ç‚¹éš¾é¢˜ï¼š</p><ol><li><p>åˆ¶ä½œä¸€ä¸ªåšå®¢ç½‘ç«™éœ€è¦è¿™äº›æŠ€æœ¯ï¼šåç«¯é‡‡ç”¨ <code>SpringBoot</code> å…¨å®¶æ¡¶ï¼Œå‰ç«¯é‡‡ç”¨ <code>Vue/React</code> ã€‚å¦‚æœè¿½æ±‚å¿«é€Ÿæ­å»ºä¸€ä¸ªåšå®¢ï¼Œå¯ä»¥ä½¿ç”¨å…¨æ ˆ <code>nodejs</code>ï¼ˆ <code>egg.js</code>ã€<code>express</code>ã€<code>koa</code> ç­‰ï¼‰ã€‚å¦‚æœæƒ³è®©åšå®¢åŠŸèƒ½æ›´å¼ºå¤§ï¼Œéœ€è¦å¼•å…¥æ›´å¤šçš„æŠ€æœ¯ã€‚ä½†è¿™äº›æŠ€æœ¯çš„å­¦ä¹ éƒ½å¾ˆè€—æ—¶è´¹åŠ›ï¼Œæå¯èƒ½åŠé€€ã€‚</p></li><li><p>å¦‚æœæƒ³è®©åšå®¢é¡µé¢æ›´å¥½çœ‹ï¼Œéœ€è¦è‡ªå·±è®¾è®¡ <code>UI</code>ã€‚</p></li><li><p>åšå®¢æœ€ç»ˆå±•ç¤ºç»™åˆ«äººï¼Œéœ€è¦éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šæ‰èƒ½è®©å¤§å®¶çœ‹åˆ°ã€‚éœ€è¦ä¹°æœåŠ¡å™¨ã€ä¹°åŸŸåã€åŸŸåå¤‡æ¡ˆã€å­¦ä¹ éƒ¨ç½²çŸ¥è¯†ç­‰ç­‰ã€‚</p></li><li><p>æœåŠ¡å™¨åæœŸéœ€è¦ç»´æŠ¤ï¼Œä¸€å¹´ç»´æŠ¤è´¹ç”¨å¯èƒ½å‡ ç™¾è‡³ä¸Šåƒä¸ç­‰ã€‚</p></li><li><p>æœåŠ¡å™¨è¢«äººæ¶æ„æ”»å‡»ï¼ˆ <code>DDOS</code>ã€ <code>SQLæ³¨å…¥</code> ç­‰ï¼‰ï¼Œéœ€è¦è‡ªå·±æ‰‹åŠ¨è§£å†³æˆ–èŠ±é’±å‡çº§æœåŠ¡å™¨ã€‚</p></li></ol><p>å¦‚æœä½ æƒ³è¦é€šè¿‡åšå®¢é¡¹ç›®ï¼Œä»¥æ­¤å­¦ä¹ å‰åç«¯çš„çŸ¥è¯†ã€æå‡è‡ªå·±çš„ç¼–ç¨‹æ°´å¹³ç”šè‡³æ˜¯å°†å…¶ä½œä¸ºä¸€ä¸ªç®€å†ä¸Šå¯ä»¥æ‹¿å¾—å‡ºæ‰‹çš„é¡¹ç›®ï¼Œæˆ‘å¼ºçƒˆå»ºè®®ä½ å°†ä»¥ä¸Šæ­¥éª¤é€ä¸€å®Œæˆï¼Œç”šè‡³å¯ä»¥å°†ä¸ªäººåšå®¢å»¶ä¼¸ä¸ºç¤¾äº¤åšå®¢è®ºå›ï¼ˆç±»ä¼¼ <code>CSDN</code>ã€<code>æ˜é‡‘</code> ç­‰ï¼‰ï¼Œå¼•å…¥å¾®æœåŠ¡ä¸åˆ†å¸ƒå¼æŠ€æœ¯ã€‚å°†è¿™äº›åšå®Œï¼Œç»å¯¹ä¼šæœ‰æ˜æ˜¾çš„æŠ€æœ¯æå‡ã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœä½ åªæƒ³æœ‰ä¸€ä¸ªè‡ªå·±çš„ç½‘ç«™å»è®°å½•ä¸€äº›æ—¥å¸¸çš„å­¦ä¹ ç­‰å†…å®¹ï¼Œç»§ç»­å¾€ä¸‹çœ‹ï¼Œæˆ‘å°†ä¼šä½¿ç”¨ <code>Hexo</code> ç®€åŒ–ä»¥ä¸Šæµç¨‹ï¼Œä»0åˆ°1å®ç°ä¸€ä¸ªç¾è§‚ç²¾è‡´é«˜æ•ˆçš„åšå®¢ã€‚</p><h2 id="2-Hexoç®€ä»‹"><a href="#2-Hexoç®€ä»‹" class="headerlink" title="2. Hexoç®€ä»‹"></a>2. Hexoç®€ä»‹</h2><p>é¦–å…ˆç®€å•ä»‹ç»ä¸€ä¸‹ <code>Hexo</code></p><blockquote><p>å¼•è‡ª[å®˜æ–¹](<a href="https://hexo.io/zh-cn/docs/index.html">æ–‡æ¡£ | Hexo</a>)</p><p>Hexo æ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ã€‚Hexo ä½¿ç”¨Â <a href="http://daringfireball.net/projects/markdown/">Markdown</a>ï¼ˆæˆ–å…¶ä»–æ¸²æŸ“å¼•æ“ï¼‰è§£ææ–‡ç« ï¼Œåœ¨å‡ ç§’å†…ï¼Œå³å¯åˆ©ç”¨é“ä¸½çš„ä¸»é¢˜ç”Ÿæˆé™æ€ç½‘é¡µã€‚</p></blockquote><p>å…¶å® <code>Hexo</code> å°±æ˜¯å¸®æˆ‘ä»¬å®Œæˆäº†å¤§éƒ¨åˆ†ä¸ä¹¦å†™åšå®¢æ— å…³çš„äº‹æƒ…ï¼Œæˆ‘ä»¬åªéœ€è¦æ ¹æ® <code>Hexo</code> ç°æœ‰çš„æ¡†æ¶ï¼Œåšä¸€äº›ç®€å•çš„é…ç½®ï¼Œå³å¯åšå‡ºä¸€ä¸ªåšå®¢ç½‘ç«™ã€‚ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¸“æ³¨åœ°å†™è‡ªå·±çš„åšå®¢å•¦</p><p>åœ¨æ¥ä¸‹æ¥çš„éƒ¨åˆ†ä¸­ï¼Œä½ åªéœ€è¦æœ‰ä»¥ä¸‹å‡ ç‚¹å‰ç½®çŸ¥è¯†ï¼Œå³å¯å¿«é€Ÿå®Œæˆä¹‹åç³»åˆ—çš„å…¨éƒ¨å†…å®¹ï¼š</p><ol><li><code>Node.js</code>ï¼šä¸»è¦ç”¨äºå®‰è£…<code>Hexo</code>ã€å‘å¸ƒæ–‡ç« ã€éƒ¨ç½²ç­‰æ“ä½œ</li></ol><p>  å®‰è£… <code>Node.js</code> ï¼š</p><ol><li><p><a href="https://nodejs.org/en/download/">å®˜ç½‘</a>å®‰è£…</p></li><li><p>Macå¯é‡‡ç”¨ <code>Homebrew</code> å®‰è£…</p></li><li><p><code>Git</code> åŠ <code>Github</code>ï¼šæœ€åçš„åšå®¢ç½‘ç«™å°†å‘å¸ƒåˆ° <code>Github</code> ä¸­</p></li><li><p><code>Markdown</code>ï¼šè¿™ä¸ªå¾ˆç®€å•ï¼Œåœ¨ <code>CSDN</code> æˆ–è€…ç”¨Typoraå†™è¿‡åšå®¢çš„äººéƒ½çŸ¥é“æ€ä¹ˆç”¨</p></li></ol><p>ä¹‹åå…¨éƒ¨çš„å®æˆ˜éƒ¨åˆ†ï¼Œå‡é‡‡ç”¨ <code>VSCode</code> ç¼–è¾‘å™¨å®Œæˆã€‚å¦‚æœä½ ç†Ÿç»ƒä½¿ç”¨å‘½ä»¤è¡Œæ“ä½œï¼Œä¹Ÿå¯ä»¥ç›´æ¥åœ¨å‘½ä»¤è¡Œä¸Šå®Œæˆå…¨éƒ¨æ“ä½œã€‚</p><h2 id="3-Hexoç®€å•å®æˆ˜"><a href="#3-Hexoç®€å•å®æˆ˜" class="headerlink" title="3. Hexoç®€å•å®æˆ˜"></a>3. Hexoç®€å•å®æˆ˜</h2><ol><li>é¦–å…ˆæ‰“å¼€å‘½ä»¤è¡Œçª—å£ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå®‰è£…Hexoã€‚</li></ol>  <figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs avrasm">$ npm install -g hexo-<span class="hljs-keyword">cli</span><br></code></pre></td></tr></table></figure><p>  <img src="https://lty-image-bed.oss-cn-shenzhen.aliyuncs.com/blog/hexo-install.png"></p><ol start="2"><li>é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„ä½ç½®ï¼ˆä¹‹ååšå®¢å…¨éƒ¨æ–‡ä»¶æ‰€åœ¨çš„åœ°æ–¹ï¼‰ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ã€‚</li></ol><p>  è¿™é‡Œæˆ‘åšå®¢å‘½åä¸ºltyzzz-blog</p>  <figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$</span> hexo init ltyzzz<span class="hljs-literal">-blog</span><br><span class="hljs-variable">$</span> <span class="hljs-built_in">cd</span> ltyzzz<span class="hljs-literal">-blog</span><br><span class="hljs-variable">$</span> npm install<br></code></pre></td></tr></table></figure><ol start="3"><li>é€šè¿‡ <code>VSCode</code> æ‰“å¼€åˆ›å»ºå¥½çš„åšå®¢ç›®å½•</li></ol><p>  <img src="https://lty-image-bed.oss-cn-shenzhen.aliyuncs.com/blog/hexo-file.png" alt="https//cdnjsdelivrnet/gh/ltyzzzxxx/ltyzzzImageBed/blogimg/hexofilepng"></p><p>  ä»‹ç»å…¶ä¸­å‡ ä¸ªé‡è¦çš„æ–‡ä»¶ï¼š</p><ul><li><p>_config.ymlï¼šåšå®¢ç›¸å…³çš„é…ç½®å‡åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ï¼ˆä¹‹åå¼•å…¥Fluidä¸»é¢˜åæœ‰æ‰€å˜åŒ–ï¼‰</p></li><li><p>sourceï¼šç”¨æ¥å­˜æ”¾ç”¨æˆ·èµ„æºçš„ä½ç½®ï¼ˆæˆ‘ä»¬å†™çš„æ–‡ç« å°±å­˜å‚¨åœ¨è¿™é‡Œï¼‰</p></li></ul><ol start="4"><li>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œç”Ÿæˆé™æ€ç½‘é¡µæ–‡ä»¶ <code>public</code></li></ol>  <figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs verilog">$ hexo <span class="hljs-keyword">generate</span><br></code></pre></td></tr></table></figure><ol start="5"><li>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œåœ¨æœ¬åœ°æœåŠ¡å™¨ï¼ˆé»˜è®¤ä¸ºï¼š<code>http://localhost:4000/</code>ï¼‰å¯åŠ¨åšå®¢</li></ol>  <figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta">$ hexo <span class="hljs-keyword">server</span><br></code></pre></td></tr></table></figure><p>æœ€ç»ˆHexoåŸºç¡€åšå®¢é¡µé¢å¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="https://lty-image-bed.oss-cn-shenzhen.aliyuncs.com/blog/hexo-page.png"></p><p>çœ‹åˆ°è¿™é‡Œï¼Œæ˜¯ä¸æ˜¯æ„Ÿè§‰Hexoé¡µé¢ååˆ†çš„ç®€é™‹ç”šè‡³æœ‰ç‚¹ä¸‘ï¼Ÿ</p><p>æ²¡å…³ç³»ï¼Œä¹‹å‰çš„éƒ¨åˆ†åªæ˜¯å¸¦å¤§å®¶ç®€å•å°è¯•ä¸€ä¸‹Hexoï¼Œäº†è§£ä¸€ä¸‹åŸºæœ¬çš„æ¡†æ¶ä¸å‘½ä»¤ä½¿ç”¨ã€‚</p><p>æˆ‘ä»¬çš„é‡å¤´æˆå°†æ”¾åœ¨Fluidä¸»é¢˜ï¼Œé€šè¿‡è¯¥ä¸»é¢˜ç†Ÿæ‚‰Hexoæ ¸å¿ƒåŠŸèƒ½ä»¥åŠFluidæ–°å¢çš„åŠŸèƒ½ã€‚</p><p>æ¥ä¸‹æ¥çš„å†…å®¹åŒ…æ‹¬æœ‰ï¼š</p><ol><li>åšå®¢æ–‡ç« çš„ç¼–è¾‘ä¸å‘å¸ƒ</li><li>è¯„è®ºåŒºåŠŸèƒ½æ¨¡å—å¼•å…¥</li><li>å›¾åºŠçš„æœ€ä½³å®è·µ</li><li>æ–°å¢ç•™è¨€æ¿ç•Œé¢</li><li>å°†åšå®¢éƒ¨ç½²åˆ°Github</li></ol><h2 id="4-åè®°"><a href="#4-åè®°" class="headerlink" title="4. åè®°"></a>4. åè®°</h2><p>å¦‚æœå¤§å®¶è§‰å¾—æˆ‘çš„å†…å®¹å†™çš„è¿˜ä¸é”™ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºç•™è¨€æ”¯æŒä¸€ä¸‹å‘€~</p><p>æ¬¢è¿å¤§å®¶æ¥é€›ä¸€é€›æˆ‘çš„<a href="https://ltyzzzxxx.github.io/">ä¸ªäººåšå®¢</a>~</p><p>æ­¤å¤–ï¼Œä»2022.10.1å¼€å§‹ï¼Œä¸ºæ¿€åŠ±è‡ªå·±æŒç»­åˆ·é¢˜ï¼Œæˆ‘å¼€å§‹æŒç»­æ—¥æ›´Leetcodeé¢˜è§£å•¦~</p><p>æ‰€æœ‰é¢˜è§£å‡å·²æ”¾åˆ°<a href="https://github.com/ltyzzzxxx/Leetcode-Everyday">Githubä»“åº“</a>ä¸­ï¼Œæ¬¢è¿å¤§å®¶Starå¹¶æå‡ºIssue~</p>]]></content>
    
    
    <categories>
      
      <category>Hexoæ­å»ºåšå®¢</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hexo</tag>
      
      <tag>Fluid</tag>
      
      <tag>åšå®¢</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LC-Solution 811. Subdomain Visit Count</title>
    <link href="/2022/10/05/LC-Solution-811-Subdomain-Visit-Count/"/>
    <url>/2022/10/05/LC-Solution-811-Subdomain-Visit-Count/</url>
    
    <content type="html"><![CDATA[<h1 id="811-å­åŸŸåè®¿é—®è®¡æ•°"><a href="#811-å­åŸŸåè®¿é—®è®¡æ•°" class="headerlink" title="811. å­åŸŸåè®¿é—®è®¡æ•°"></a><a href="https://leetcode.cn/problems/subdomain-visit-count/">811. å­åŸŸåè®¿é—®è®¡æ•°</a></h1><h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>ç½‘ç«™åŸŸå <code>&quot;discuss.leetcode.com&quot;</code> ç”±å¤šä¸ªå­åŸŸåç»„æˆã€‚é¡¶çº§åŸŸåä¸º <code>&quot;com&quot;</code> ï¼ŒäºŒçº§åŸŸåä¸º <code>&quot;leetcode.com&quot;</code> ï¼Œæœ€ä½ä¸€çº§ä¸º <code>&quot;discuss.leetcode.com&quot;</code> ã€‚å½“è®¿é—®åŸŸå <code>&quot;discuss.leetcode.com&quot;</code> æ—¶ï¼ŒåŒæ—¶ä¹Ÿä¼šéšå¼è®¿é—®å…¶çˆ¶åŸŸå <code>&quot;leetcode.com&quot;</code> ä»¥åŠ <code>&quot;com&quot;</code> ã€‚</p><p><strong>è®¡æ•°é…å¯¹åŸŸå</strong> æ˜¯éµå¾ª <code>&quot;rep d1.d2.d3&quot;</code> æˆ– <code>&quot;rep d1.d2&quot;</code> æ ¼å¼çš„ä¸€ä¸ªåŸŸåè¡¨ç¤ºï¼Œå…¶ä¸­ <code>rep</code> è¡¨ç¤ºè®¿é—®åŸŸåçš„æ¬¡æ•°ï¼Œ<code>d1.d2.d3</code> ä¸ºåŸŸåæœ¬èº«ã€‚</p><p>ä¾‹å¦‚ï¼Œ<code>&quot;9001 discuss.leetcode.com&quot;</code> å°±æ˜¯ä¸€ä¸ª <strong>è®¡æ•°é…å¯¹åŸŸå</strong> ï¼Œè¡¨ç¤º <code>discuss.leetcode.com</code> è¢«è®¿é—®äº† <code>9001</code> æ¬¡ã€‚<br>ç»™ä½ ä¸€ä¸ª <strong>è®¡æ•°é…å¯¹åŸŸå</strong> ç»„æˆçš„æ•°ç»„ <code>cpdomains</code> ï¼Œè§£æå¾—åˆ°è¾“å…¥ä¸­æ¯ä¸ªå­åŸŸåå¯¹åº”çš„Â <strong>è®¡æ•°é…å¯¹åŸŸå</strong> ï¼Œå¹¶ä»¥æ•°ç»„å½¢å¼è¿”å›ã€‚å¯ä»¥æŒ‰ <strong>ä»»æ„é¡ºåº</strong> è¿”å›ç­”æ¡ˆã€‚</p><p><strong>ç¤ºä¾‹1ï¼š</strong></p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs prolog">è¾“å…¥ï¼šcpdomains = [<span class="hljs-string">&quot;9001 discuss.leetcode.com&quot;</span>]<br>è¾“å‡ºï¼š[<span class="hljs-string">&quot;9001 leetcode.com&quot;</span>,<span class="hljs-string">&quot;9001 discuss.leetcode.com&quot;</span>,<span class="hljs-string">&quot;9001 com&quot;</span>]<br>è§£é‡Šï¼šä¾‹å­ä¸­ä»…åŒ…å«ä¸€ä¸ªç½‘ç«™åŸŸåï¼š<span class="hljs-string">&quot;discuss.leetcode.com&quot;</span>ã€‚<br>æŒ‰ç…§å‰æ–‡æè¿°ï¼Œå­åŸŸå <span class="hljs-string">&quot;leetcode.com&quot;</span> å’Œ <span class="hljs-string">&quot;com&quot;</span> éƒ½ä¼šè¢«è®¿é—®ï¼Œæ‰€ä»¥å®ƒä»¬éƒ½è¢«è®¿é—®äº† <span class="hljs-number">9001</span> æ¬¡ã€‚<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹2ï¼š</strong></p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs prolog">è¾“å…¥ï¼šcpdomains = [<span class="hljs-string">&quot;900 google.mail.com&quot;</span>, <span class="hljs-string">&quot;50 yahoo.com&quot;</span>, <span class="hljs-string">&quot;1 intel.mail.com&quot;</span>, <span class="hljs-string">&quot;5 wiki.org&quot;</span>]<br>è¾“å‡ºï¼š[<span class="hljs-string">&quot;901 mail.com&quot;</span>,<span class="hljs-string">&quot;50 yahoo.com&quot;</span>,<span class="hljs-string">&quot;900 google.mail.com&quot;</span>,<span class="hljs-string">&quot;5 wiki.org&quot;</span>,<span class="hljs-string">&quot;5 org&quot;</span>,<span class="hljs-string">&quot;1 intel.mail.com&quot;</span>,<span class="hljs-string">&quot;951 com&quot;</span>]<br>è§£é‡Šï¼šæŒ‰ç…§å‰æ–‡æè¿°ï¼Œä¼šè®¿é—® <span class="hljs-string">&quot;google.mail.com&quot;</span> <span class="hljs-number">900</span> æ¬¡ï¼Œ<span class="hljs-string">&quot;yahoo.com&quot;</span> <span class="hljs-number">50</span> æ¬¡ï¼Œ<span class="hljs-string">&quot;intel.mail.com&quot;</span> <span class="hljs-number">1</span> æ¬¡ï¼Œ<span class="hljs-string">&quot;wiki.org&quot;</span> <span class="hljs-number">5</span> æ¬¡ã€‚<br>è€Œå¯¹äºçˆ¶åŸŸåï¼Œä¼šè®¿é—® <span class="hljs-string">&quot;mail.com&quot;</span> <span class="hljs-number">900</span> + <span class="hljs-number">1</span> = <span class="hljs-number">901</span> æ¬¡ï¼Œ<span class="hljs-string">&quot;com&quot;</span> <span class="hljs-number">900</span> + <span class="hljs-number">50</span> + <span class="hljs-number">1</span> = <span class="hljs-number">951</span> æ¬¡ï¼Œå’Œ <span class="hljs-string">&quot;org&quot;</span> <span class="hljs-number">5</span> æ¬¡ã€‚<br></code></pre></td></tr></table></figure><p>æç¤ºï¼š</p><ul><li><p><code>1 &lt;= cpdomain.length &lt;= 100</code></p></li><li><p><code>1 &lt;= cpdomain[i].length &lt;= 100</code></p></li><li><p><code>cpdomain[i]</code>Â ä¼šéµå¾ªÂ <code>&quot;repiÂ d1i.d2i.d3i&quot;</code>Â æˆ–Â <code>&quot;repiÂ d1i.d2i&quot;</code>Â æ ¼å¼</p></li><li><p><code>repi</code>Â æ˜¯èŒƒå›´Â <code>[1, 104]</code>Â å†…çš„ä¸€ä¸ªæ•´æ•°</p></li><li><p><code>d1i</code>ã€<code>d2i</code>Â å’ŒÂ <code>d3i</code>Â ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ</p></li></ul><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><h3 id="æ–¹æ³•ä¸€ï¼šå“ˆå¸Œè¡¨"><a href="#æ–¹æ³•ä¸€ï¼šå“ˆå¸Œè¡¨" class="headerlink" title="æ–¹æ³•ä¸€ï¼šå“ˆå¸Œè¡¨"></a>æ–¹æ³•ä¸€ï¼šå“ˆå¸Œè¡¨</h3><p>é€šè¿‡å“ˆå¸Œè¡¨ç»Ÿè®¡ <code>cpdomains</code> ä¸­æ‰€æœ‰çš„å­åŸŸåçš„é¢‘ç‡ã€‚</p><p>ä»¥ <code>google.mail.com</code> ä¸ºä¾‹ï¼Œ<code>google.mail.com</code> ä¸ºä¸‰çº§åŸŸåï¼Œ<code>mail.com</code> ä¸ºäºŒçº§åŸŸåï¼Œ<code>com</code>ä¸ºé¡¶çº§åŸŸåã€‚</p><p>æ€è·¯å¦‚ä¸‹ï¼š</p><ol><li><p>éå† <code>cpdomains</code> åˆ—è¡¨ï¼Œè·å–æ¯ä¸€ä¸ª <code>cpdomain</code> çš„è®¿é—®æ¬¡æ•° <code>cnt</code> ä¸å…¶åŸŸå <code>domain</code></p></li><li><p>å°† <code>domain</code> çš„è®¿é—®æ¬¡æ•°ç´¯åŠ è‡³åŸå“ˆå¸Œè¡¨</p></li><li><p>ç»§ç»­éå† <code>domain</code>çš„å­åŸŸåå­—ç¬¦ä¸²</p></li><li><p>è‹¥ <code>domain[i] == &#39;.&#39;</code>ï¼Œè¯´æ˜å…¶ä¹‹åä¸ºä¸€ä¸ªå®Œæ•´çš„å­åŸŸåï¼Œå°†å…¶è®¿é—®æ¬¡æ•°ç´¯åŠ åˆ°å“ˆå¸Œè¡¨ä¸­ã€‚</p></li><li><p>éå†ç»“æŸä¹‹åï¼Œå°†å“ˆå¸Œè¡¨çš„ <code>K</code> ä¸ <code>V</code> ä»¥åˆ—è¡¨çš„å½¢å¼è¿”å›</p></li></ol><h4 id="Python3"><a href="#Python3" class="headerlink" title="Python3"></a>Python3</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">subdomainVisits</span>(<span class="hljs-params">self, cpdomains: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]:<br>        dic = defaultdict(<span class="hljs-built_in">int</span>)<br>        <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> cpdomains:<br>            ds = d.split()<br>            cnt, domain = <span class="hljs-built_in">int</span>(ds[<span class="hljs-number">0</span>]), ds[<span class="hljs-number">1</span>]<br>            dic[domain] += cnt<br>            <span class="hljs-keyword">for</span> i, x <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(domain):<br>                <span class="hljs-keyword">if</span> x == <span class="hljs-string">&#x27;.&#x27;</span>:<br>                    dic[domain[i+<span class="hljs-number">1</span>:]] += cnt<br>        <span class="hljs-keyword">return</span> [<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;v&#125;</span> <span class="hljs-subst">&#123;k&#125;</span>&quot;</span> <span class="hljs-keyword">for</span> k, v <span class="hljs-keyword">in</span> dic.items()]<br></code></pre></td></tr></table></figure><h2 id="Encouragement"><a href="#Encouragement" class="headerlink" title="Encouragement"></a>Encouragement</h2><p>ç›®å‰å°±è¯»äºæ–°åŠ å¡å›½ç«‹å¤§å­¦ï¼Œè½¬ç èœé¸¡ä¸€æšã€‚</p><p>å†³å¿ƒé€šè¿‡æ—¥æ›´ä¸€ç¯‡é¢˜è§£æ¿€åŠ±è‡ªå·±åšæŒåˆ·é¢˜ï¼ŒåšæŒå­¦ä¹ ç®—æ³•ã€‚</p><p>è¿™æ˜¯æˆ‘æ­å»º<a href="https://github.com/ltyzzzxxx/Leetcode-Everyday">Leetcode-Everyday</a>ä»“åº“åå‘å¸ƒã®ç¬¬13ç¯‡é¢˜è§£ï¼Œæ¬¢è¿å„ä½starå¹¶æå‡ºIssue~</p><p>ç‚¹å‡»<a href="https://leetcode.cn/u/ltyzzz/">è¿™é‡Œ</a>ï¼Œè¿›å…¥æˆ‘çš„ä¸ªäººLeetcodeä¸»é¡µ~</p>]]></content>
    
    
    <categories>
      
      <category>Leetcodeé¢˜è§£</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LC-Solution 921. Minumum Add to Make Parentheses Valid</title>
    <link href="/2022/10/04/LC-Solution-921-Minumum-Add-to-Make-Parentheses-Valid/"/>
    <url>/2022/10/04/LC-Solution-921-Minumum-Add-to-Make-Parentheses-Valid/</url>
    
    <content type="html"><![CDATA[<h1 id="921-ä½¿æ‹¬å·æœ‰æ•ˆçš„æœ€å°‘æ·»åŠ "><a href="#921-ä½¿æ‹¬å·æœ‰æ•ˆçš„æœ€å°‘æ·»åŠ " class="headerlink" title="921. ä½¿æ‹¬å·æœ‰æ•ˆçš„æœ€å°‘æ·»åŠ "></a><a href="https://leetcode.cn/problems/minimum-add-to-make-parentheses-valid/">921. ä½¿æ‹¬å·æœ‰æ•ˆçš„æœ€å°‘æ·»åŠ </a></h1><h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>åªæœ‰æ»¡è¶³ä¸‹é¢å‡ ç‚¹ä¹‹ä¸€ï¼Œæ‹¬å·å­—ç¬¦ä¸²æ‰æ˜¯æœ‰æ•ˆçš„ï¼š</p><ul><li><p>å®ƒæ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼Œæˆ–è€…</p></li><li><p>å®ƒå¯ä»¥è¢«å†™æˆÂ <code>AB</code>Â ï¼ˆ<code>A</code>Â ä¸Â <code>B</code>Â è¿æ¥ï¼‰, å…¶ä¸­Â <code>A</code> å’ŒÂ <code>B</code>Â éƒ½æ˜¯æœ‰æ•ˆå­—ç¬¦ä¸²ï¼Œæˆ–è€…</p></li><li><p>å®ƒå¯ä»¥è¢«å†™ä½œÂ <code>(A)</code>ï¼Œå…¶ä¸­Â <code>A</code>Â æ˜¯æœ‰æ•ˆå­—ç¬¦ä¸²ã€‚</p></li></ul><p>ç»™å®šä¸€ä¸ªæ‹¬å·å­—ç¬¦ä¸² <code>s</code> ï¼Œç§»åŠ¨Næ¬¡ï¼Œä½ å°±å¯ä»¥åœ¨å­—ç¬¦ä¸²çš„ä»»ä½•ä½ç½®æ’å…¥ä¸€ä¸ªæ‹¬å·ã€‚</p><p>ä¾‹å¦‚ï¼Œå¦‚æœ <code>s = &quot;()))&quot;</code> ï¼Œä½ å¯ä»¥æ’å…¥ä¸€ä¸ªå¼€å§‹æ‹¬å·ä¸º <code>&quot;(()))&quot;</code> æˆ–ç»“æŸæ‹¬å·ä¸º <code>&quot;())))&quot;</code> ã€‚<br>è¿”å› ä¸ºä½¿ç»“æœå­—ç¬¦ä¸² <code>s</code> æœ‰æ•ˆè€Œå¿…é¡»æ·»åŠ çš„æœ€å°‘æ‹¬å·æ•°ã€‚</p><p><strong>ç¤ºä¾‹1ï¼š</strong></p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs abnf">è¾“å…¥ï¼šs <span class="hljs-operator">=</span> <span class="hljs-string">&quot;())&quot;</span><br>è¾“å‡ºï¼š<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹2ï¼š</strong></p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs abnf">è¾“å…¥ï¼šs <span class="hljs-operator">=</span> <span class="hljs-string">&quot;(((&quot;</span><br>è¾“å‡ºï¼š<span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li><code>1 &lt;= s.length &lt;= 1000</code></li><li><code>s</code>Â åªåŒ…å«Â <code>&#39;(&#39;</code>Â å’ŒÂ <code>&#39;)&#39;</code>Â å­—ç¬¦ã€‚</li></ul><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><h3 id="æ–¹æ³•ä¸€ï¼šæ ˆ"><a href="#æ–¹æ³•ä¸€ï¼šæ ˆ" class="headerlink" title="æ–¹æ³•ä¸€ï¼šæ ˆ"></a>æ–¹æ³•ä¸€ï¼šæ ˆ</h3><p>å¯¹äºæˆå¯¹å‡ºç°çš„æ‹¬å·é¢˜ï¼Œåˆæ³•çš„æ¯ä¸€å¯¹æ‹¬å·æ˜¯å…·æœ‰é¡ºåºçš„ï¼Œå¯ä»¥ç›´è§‚åœ°æƒ³åˆ°ç”¨æ ˆè§£å†³ã€‚</p><p>å°†æˆå¯¹çš„æ‹¬å·ç§»é™¤å‡ºæ ˆï¼Œæœ€åæ ˆä¸­ä¿ç•™çš„ä¸€å®šæ˜¯æ— æ³•æˆå¯¹çš„æ‹¬å·æ•°é‡ï¼Œæœ€ç»ˆæ ˆçš„å¤§å°å³ä¸ºéœ€è¦æ·»åŠ çš„æ‹¬å·æ¬¡æ•°ã€‚</p><p>éå†å­—ç¬¦ä¸² <code>s</code>ï¼š</p><ul><li><p>è‹¥ <code>s[i] == &#39;(&#39;</code>ï¼Œç›´æ¥å…¥æ ˆã€‚</p></li><li><p>è‹¥ <code>s[i] == &#39;)&#39;</code>ï¼Œä¸”å½“å‰æ ˆä¸ä¸ºç©º and æ ˆé¡¶å…ƒç´ ä¸º <code>&#39;(&#39;</code>ï¼Œè¯´æ˜æ­¤æ—¶æ„æˆäº†ä¸€å¯¹åˆæ³•æ‹¬å·ï¼Œå¯ä»¥å°†æ ˆé¡¶çš„ <code>&#39;(&#39;</code>å‡ºæ ˆã€‚è‹¥ä¸æ»¡è¶³æ­¤æ¡ä»¶ï¼Œåˆ™å°† <code>s[i]</code> å…¥æ ˆ</p></li></ul><h4 id="Python3"><a href="#Python3" class="headerlink" title="Python3"></a>Python3</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">minAddToMakeValid</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        q = deque() <br>        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> s:<br>            <span class="hljs-keyword">if</span> x == <span class="hljs-string">&#x27;(&#x27;</span>:<br>                q.append(x)<br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(q) &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> q[-<span class="hljs-number">1</span>] == <span class="hljs-string">&#x27;(&#x27;</span>:<br>                    q.pop()<br>                <span class="hljs-keyword">else</span>:<br>                    q.append(x)<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(q)<br></code></pre></td></tr></table></figure><h4 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">minAddToMakeValid</span><span class="hljs-params">(String s)</span> &#123;<br>        Deque&lt;Character&gt; d = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayDeque</span>&lt;&gt;();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">char</span> x : s.toCharArray()) &#123;<br>            <span class="hljs-keyword">if</span>(x == <span class="hljs-string">&#x27;(&#x27;</span>) &#123;<br>                d.addLast(x);<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-keyword">if</span>(!d.isEmpty() &amp;&amp; d.peekLast() == <span class="hljs-string">&#x27;(&#x27;</span>) &#123;<br>                    d.pollLast();<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    d.addLast(x);<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> d.size();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ–¹æ³•äºŒï¼šæ¨¡æ‹Ÿè®¡æ•°"><a href="#æ–¹æ³•äºŒï¼šæ¨¡æ‹Ÿè®¡æ•°" class="headerlink" title="æ–¹æ³•äºŒï¼šæ¨¡æ‹Ÿè®¡æ•°"></a>æ–¹æ³•äºŒï¼šæ¨¡æ‹Ÿè®¡æ•°</h3><p>æ ¹æ®é¢˜æ„è¿›è¡Œæ¨¡æ‹Ÿï¼Œç”¨ <code>cnt</code> è¡¨ç¤º <code>&#39;(&#39;</code>çš„ä¸ªæ•°ã€‚</p><p>éå†å­—ç¬¦ä¸² <code>s</code></p><ul><li><p>è‹¥ <code>s[i] == &#39;(&#39;</code>ï¼Œcnt++</p></li><li><p>è‹¥ <code>s[i] == &#39;)&#39;</code>ï¼Œcntâ€“ï¼Œç›¸å½“äºæ¶ˆé™¤ä¸€ä¸ª <code>&#39;(&#39;</code></p><ul><li>è‹¥æ­¤æ—¶è¿›è¡Œ <code>cnt--</code> æ“ä½œä¹‹åï¼Œcntå˜ä¸º-1ï¼Œè¯´æ˜ <code>&#39;(&#39;</code>æ•°é‡ä¸è¶³ï¼Œéœ€è¦æ·»åŠ ä¸€ä¸ª <code>&#39;(&#39;</code>è¿›è¡Œé¢å¤–é…å¯¹ï¼Œå¹¶å°† <code>cnt</code> é‡æ–°ç½®ä¸º0</li></ul></li></ul><h4 id="Python3-1"><a href="#Python3-1" class="headerlink" title="Python3"></a>Python3</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">minAddToMakeValid</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        cnt, ans = <span class="hljs-number">0</span>, <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> s:<br>            <span class="hljs-keyword">if</span> x == <span class="hljs-string">&#x27;(&#x27;</span>:<br>                cnt += <span class="hljs-number">1</span><br>            <span class="hljs-keyword">else</span>:<br>                cnt -= <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span> cnt == -<span class="hljs-number">1</span>:<br>                cnt = <span class="hljs-number">0</span><br>                ans += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> ans + cnt<br></code></pre></td></tr></table></figure><h4 id="Java-1"><a href="#Java-1" class="headerlink" title="Java"></a>Java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">minAddToMakeValid</span><span class="hljs-params">(String s)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">cnt</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, ans = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">char</span> x : s.toCharArray()) &#123;<br>            cnt += x == <span class="hljs-string">&#x27;(&#x27;</span> ? <span class="hljs-number">1</span> : -<span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">if</span>(cnt == -<span class="hljs-number">1</span>) &#123;<br>                cnt = <span class="hljs-number">0</span>;<br>                ans++;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans + cnt;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Encouragement"><a href="#Encouragement" class="headerlink" title="Encouragement"></a>Encouragement</h2><p>ç›®å‰å°±è¯»äºæ–°åŠ å¡å›½ç«‹å¤§å­¦ï¼Œè½¬ç èœé¸¡ä¸€æšã€‚</p><p>å†³å¿ƒé€šè¿‡æ—¥æ›´ä¸€ç¯‡é¢˜è§£æ¿€åŠ±è‡ªå·±åšæŒåˆ·é¢˜ï¼ŒåšæŒå­¦ä¹ ç®—æ³•ã€‚</p><p>è¿™æ˜¯æˆ‘æ­å»º<a href="https://github.com/ltyzzzxxx/Leetcode-Everyday">Leetcode-Everyday</a>ä»“åº“åå‘å¸ƒã®ç¬¬12ç¯‡é¢˜è§£ï¼Œæ¬¢è¿å„ä½starå¹¶æå‡ºIssue~</p><p>ç‚¹å‡»<a href="https://leetcode.cn/u/ltyzzz/">è¿™é‡Œ</a>ï¼Œè¿›å…¥æˆ‘çš„ä¸ªäººLeetcodeä¸»é¡µ~</p>]]></content>
    
    
    <categories>
      
      <category>Leetcodeé¢˜è§£</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LC-Solution 926. Flip String to Monotone Increasing</title>
    <link href="/2022/10/03/LC-Solution-926-Flip-String-to-Monotone-Increasing/"/>
    <url>/2022/10/03/LC-Solution-926-Flip-String-to-Monotone-Increasing/</url>
    
    <content type="html"><![CDATA[<h1 id="926-Flip-String-to-Monotone-Increasing"><a href="#926-Flip-String-to-Monotone-Increasing" class="headerlink" title="926. Flip String to Monotone Increasing"></a><a href="https://leetcode.cn/problems/flip-string-to-monotone-increasing/">926. Flip String to Monotone Increasing</a></h1><h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>å¦‚æœä¸€ä¸ªäºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼Œæ˜¯ä»¥ä¸€äº› <code>0</code>ï¼ˆå¯èƒ½æ²¡æœ‰ <code>0</code>ï¼‰åé¢è·Ÿç€ä¸€äº› <code>1</code>ï¼ˆä¹Ÿå¯èƒ½æ²¡æœ‰ <code>1</code>ï¼‰çš„å½¢å¼ç»„æˆçš„ï¼Œé‚£ä¹ˆè¯¥å­—ç¬¦ä¸²æ˜¯ <strong>å•è°ƒé€’å¢</strong> çš„ã€‚</p><p>ç»™ä½ ä¸€ä¸ªäºŒè¿›åˆ¶å­—ç¬¦ä¸² <code>s</code>ï¼Œä½ å¯ä»¥å°†ä»»ä½• <code>0</code> ç¿»è½¬ä¸º <code>1</code> æˆ–è€…å°† <code>1</code> ç¿»è½¬ä¸º <code>0</code> ã€‚</p><p>è¿”å›ä½¿ <code>s</code> å•è°ƒé€’å¢çš„æœ€å°ç¿»è½¬æ¬¡æ•°ã€‚</p><p><strong>ç¤ºä¾‹1ï¼š</strong></p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf">è¾“å…¥ï¼šs <span class="hljs-operator">=</span> <span class="hljs-string">&quot;00110&quot;</span><br>è¾“å‡ºï¼š<span class="hljs-number">1</span><br>è§£é‡Šï¼šç¿»è½¬æœ€åä¸€ä½å¾—åˆ° <span class="hljs-number">00111</span>.<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹2ï¼š</strong></p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf">è¾“å…¥ï¼šs <span class="hljs-operator">=</span> <span class="hljs-string">&quot;010110&quot;</span><br>è¾“å‡ºï¼š<span class="hljs-number">2</span><br>è§£é‡Šï¼šç¿»è½¬å¾—åˆ° <span class="hljs-number">011111</span>ï¼Œæˆ–è€…æ˜¯ <span class="hljs-number">000111</span>ã€‚<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹3ï¼š</strong></p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf">è¾“å…¥ï¼šs <span class="hljs-operator">=</span> <span class="hljs-string">&quot;00011000&quot;</span><br>è¾“å‡ºï¼š<span class="hljs-number">2</span><br>è§£é‡Šï¼šç¿»è½¬å¾—åˆ° <span class="hljs-number">00000000</span>ã€‚<br></code></pre></td></tr></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li><code>1 &lt;= s.length &lt;= 105</code></li><li><code>s[i]</code>Â ä¸ºÂ <code>&#39;0&#39;</code>Â æˆ–Â <code>&#39;1&#39;</code></li></ul><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><h3 id="æ–¹æ³•ä¸€ï¼šå‰ç¼€å’Œ"><a href="#æ–¹æ³•ä¸€ï¼šå‰ç¼€å’Œ" class="headerlink" title="æ–¹æ³•ä¸€ï¼šå‰ç¼€å’Œ"></a>æ–¹æ³•ä¸€ï¼šå‰ç¼€å’Œ</h3><p>é¢˜ç›®è¦æ±‚é€šè¿‡ç¿»è½¬ <code>0</code> ä¸ <code>1</code> ä½¿å¾—æœ€åå¾—åˆ°çš„äºŒè¿›åˆ¶å­—ç¬¦ä¸²ä¸ºå•è°ƒé€’å¢ï¼Œ</p><p>é€šè¿‡æ­¤å¯ä»¥æƒ³åˆ°ï¼šç»Ÿè®¡å­—ç¬¦ <code>s[i]</code> å·¦è¾¹ <code>1</code> æ•°ç›®ï¼Œå³è¾¹ <code>0</code> çš„æ•°ç›®ã€‚å°†è¿™äº› <code>1</code> ä¸ <code>0</code> ç¿»è½¬ï¼Œæœ€ç»ˆçš„å­—ç¬¦ä¸² <code>s</code> å³å¯æ»¡è¶³å•è°ƒé€’å¢ï¼Œç¿»è½¬æ¬¡æ•° &#x3D; å·¦è¾¹ <code>1</code> çš„æ•°ç›® + å³è¾¹ <code>0</code> çš„æ•°ç›®</p><p>å› æ­¤ï¼Œè¯¥é—®é¢˜å¯ä»¥é‡‡ç”¨å‰ç¼€å’Œçš„æ€è·¯è§£å†³ã€‚</p><ul><li><p>è®¾ç½® <code>sum</code> æ•°ç»„ç»Ÿè®¡å‰ç¼€å’Œï¼ˆé•¿åº¦ä¸º <code>len(s) + 1</code> ï¼‰</p></li><li><p><code>sum[i]</code> ä»£è¡¨å­—ç¬¦ <code>s[i]</code> å·¦è¾¹ <code>1</code> çš„æ•°ç›®ï¼ˆä¸åŒ…å« <code>i</code> ï¼‰</p></li><li><p>é€šè¿‡ <code>sum[i]</code> å¯è®¡ç®—å¾—åˆ° <code>s[i]</code> å³è¾¹ <code>0</code> çš„æ•°ç›®ï¼ˆåŒ…å« <code>i</code>ï¼‰</p><ul><li>å³è¾¹ <code>0</code> çš„æ•°ç›®ä¸ºï¼š<code>(len(s) - i) - (sum[len(s)] - sum[i])</code></li></ul></li></ul><p>éå†ä¸¤æ¬¡å­—ç¬¦ä¸² <code>s</code> ï¼Œæ±‚å¾—æœ€ç»ˆç­”æ¡ˆ</p><ul><li><p>ç¬¬ä¸€æ¬¡éå†ï¼šæ±‚å¾—å‰ç¼€å’Œæ•°ç»„ <code>sum</code></p></li><li><p>ç¬¬äºŒæ¬¡éå†ï¼šè®¡ç®—å½“å‰ç¿»è½¬æ¬¡æ•°ï¼ˆå·¦è¾¹ <code>1</code> çš„æ•°ç›® + å³è¾¹ <code>0</code> çš„æ•°ç›®ï¼‰å¹¶ä¸ <code>ans</code> æ¯”è¾ƒï¼Œå–æœ€å°å€¼ã€‚</p></li></ul><h4 id="Python3"><a href="#Python3" class="headerlink" title="Python3"></a>Python3</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">minFlipsMonoIncr</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        n, ans = <span class="hljs-built_in">len</span>(s), <span class="hljs-built_in">len</span>(s)<br>        <span class="hljs-built_in">sum</span> = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">1</span>) <br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>            <span class="hljs-built_in">sum</span>[i] = <span class="hljs-built_in">sum</span>[i - <span class="hljs-number">1</span>] + (s[i - <span class="hljs-number">1</span>] == <span class="hljs-string">&#x27;1&#x27;</span>)<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, n + <span class="hljs-number">1</span>):<br>            l_ones, r_zeros = <span class="hljs-built_in">sum</span>[i], n - i - (<span class="hljs-built_in">sum</span>[n] - <span class="hljs-built_in">sum</span>[i])<br>            ans = <span class="hljs-built_in">min</span>(ans, l_ones + r_zeros)<br>        <span class="hljs-keyword">return</span> ans<br></code></pre></td></tr></table></figure><h4 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">minFlipsMonoIncr</span><span class="hljs-params">(String s)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> s.length();<br>        <span class="hljs-type">char</span>[] cs = s.toCharArray();<br>        <span class="hljs-type">int</span>[] sum = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n + <span class="hljs-number">1</span>];<br>        <span class="hljs-type">int</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> n;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>            sum[i] = sum[i - <span class="hljs-number">1</span>] + (cs[i - <span class="hljs-number">1</span>] == <span class="hljs-string">&#x27;1&#x27;</span> ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>);<br>        &#125;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt;= n; i++) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">leftOnes</span> <span class="hljs-operator">=</span> sum[i], rightZeros = n - i - (sum[n] - sum[i]);<br>            ans = Math.min(ans, leftOnes + rightZeros);<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ–¹æ³•äºŒï¼šä¼˜åŒ–å‰ç¼€å’Œ"><a href="#æ–¹æ³•äºŒï¼šä¼˜åŒ–å‰ç¼€å’Œ" class="headerlink" title="æ–¹æ³•äºŒï¼šä¼˜åŒ–å‰ç¼€å’Œ"></a>æ–¹æ³•äºŒï¼šä¼˜åŒ–å‰ç¼€å’Œ</h3><p>æ–¹æ³•ä¸€ç§æåˆ°ï¼š</p><ul><li><p><code>s[i]</code> å·¦è¾¹ <code>1</code> çš„æ•°ç›®ä¸º <code>sum[i]</code></p></li><li><p><code>s[i]</code> å³è¾¹ <code>0</code> çš„æ•°ç›®ä¸º <code>(len(s) - i) - (sum[len(s)] - sum[i])</code></p></li><li><p>éå†ä¸€è½® <code>s</code>ï¼ŒäºŒè€…æ±‚å’Œçš„æœ€å°å€¼å³ä¸ºç­”æ¡ˆ</p></li></ul><p>å³ <code>left_ones + right_zeros = 2 * sum[i] - i + len(s) - sum[len(s)]</code></p><p>å› æ­¤ï¼Œåªéœ€ä¿è¯ <code>2 * sum[i] - i</code> ä¸ºæœ€å°å€¼ï¼Œç„¶åæ±‚å¾—æ‰€æœ‰ <code>1</code> çš„æ•°ç›®ï¼Œå³å¯å¾—åˆ°æœ€ç»ˆçš„ç¿»è½¬æ¬¡æ•°ï¼Œé‡‡ç”¨å¸¸æ•°çº§ç©ºé—´å¤æ‚åº¦å³å¯å®ç°ã€‚</p><p>æ³¨æ„ï¼šæ ¹æ®ä¹‹å‰çš„å®šä¹‰ï¼Œè¿™é‡Œ <code>i</code> çš„æœ€å¤§å€¼ä»ç„¶ä¸º <code>len(s)</code></p><h4 id="Python3-1"><a href="#Python3-1" class="headerlink" title="Python3"></a>Python3</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">minFlipsMonoIncr</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        n, ans, l_ones = <span class="hljs-built_in">len</span>(s), inf, <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>):<br>            ans = <span class="hljs-built_in">min</span>(ans, <span class="hljs-number">2</span> * l_ones - i)<br>            <span class="hljs-comment"># é˜²æ­¢è¶Šç•Œ</span><br>            <span class="hljs-keyword">if</span> i &lt; n:<br>                l_ones += s[i] == <span class="hljs-string">&#x27;1&#x27;</span><br>        <span class="hljs-keyword">return</span> ans + n - l_ones;<br></code></pre></td></tr></table></figure><h4 id="Java-1"><a href="#Java-1" class="headerlink" title="Java"></a>Java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">minFlipsMonoIncr</span><span class="hljs-params">(String s)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> s.length(), ans = Integer.MAX_VALUE, leftOnes = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt;= n; i++) &#123;<br>            ans = Math.min(ans, <span class="hljs-number">2</span> * leftOnes - i);<br>            <span class="hljs-keyword">if</span>(i &lt; n) &#123;<br>                leftOnes += s.charAt(i) == <span class="hljs-string">&#x27;1&#x27;</span> ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans + n - leftOnes;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Encouragement"><a href="#Encouragement" class="headerlink" title="Encouragement"></a>Encouragement</h2><p>ç›®å‰å°±è¯»äºæ–°åŠ å¡å›½ç«‹å¤§å­¦ï¼Œè½¬ç èœé¸¡ä¸€æšã€‚</p><p>å†³å¿ƒé€šè¿‡æ—¥æ›´ä¸€ç¯‡é¢˜è§£æ¿€åŠ±è‡ªå·±åšæŒåˆ·é¢˜ï¼ŒåšæŒå­¦ä¹ ç®—æ³•ã€‚</p><p>è¿™æ˜¯æˆ‘æ­å»º<a href="https://github.com/ltyzzzxxx/Leetcode-Everyday">Leetcode-Everyday</a>ä»“åº“åå‘å¸ƒã®ç¬¬11ç¯‡é¢˜è§£ï¼Œæ¬¢è¿å„ä½starå¹¶æå‡ºIssue~</p><p>ç‚¹å‡»<a href="https://leetcode.cn/u/ltyzzz/">è¿™é‡Œ</a>ï¼Œè¿›å…¥æˆ‘çš„ä¸ªäººLeetcodeä¸»é¡µ~</p>]]></content>
    
    
    <categories>
      
      <category>Leetcodeé¢˜è§£</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LC-Solution 881. Boats to Save People</title>
    <link href="/2022/10/03/LC-Solution-881-Boats-to-Save-People/"/>
    <url>/2022/10/03/LC-Solution-881-Boats-to-Save-People/</url>
    
    <content type="html"><![CDATA[<h1 id="881-æ•‘ç”Ÿè‰‡"><a href="#881-æ•‘ç”Ÿè‰‡" class="headerlink" title="881. æ•‘ç”Ÿè‰‡"></a><a href="https://leetcode.cn/problems/boats-to-save-people/">881. æ•‘ç”Ÿè‰‡</a></h1><h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>ç»™å®šæ•°ç»„Â <code>people</code>Â ã€‚<code>people[i]</code>è¡¨ç¤ºç¬¬ <code>i</code>Â ä¸ªäººçš„ä½“é‡Â ï¼Œ<strong>èˆ¹çš„æ•°é‡ä¸é™</strong>ï¼Œæ¯è‰˜èˆ¹å¯ä»¥æ‰¿è½½çš„æœ€å¤§é‡é‡ä¸ºÂ <code>limit</code>ã€‚</p><p>æ¯è‰˜èˆ¹æœ€å¤šå¯åŒæ—¶è½½ä¸¤äººï¼Œä½†æ¡ä»¶æ˜¯è¿™äº›äººçš„é‡é‡ä¹‹å’Œæœ€å¤šä¸ºÂ <code>limit</code>ã€‚</p><p>è¿”å› <em>æ‰¿è½½æ‰€æœ‰äººæ‰€éœ€çš„æœ€å°èˆ¹æ•°</em>Â ã€‚</p><p><strong>ç¤ºä¾‹1ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">è¾“å…¥ï¼špeople = [1,2], <span class="hljs-built_in">limit</span> = 3<br>è¾“å‡ºï¼š1<br>è§£é‡Šï¼š1 è‰˜èˆ¹è½½ (1, 2)<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹2ï¼š</strong></p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs gcode">è¾“å…¥ï¼špeople = [<span class="hljs-number">3</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>], limit = <span class="hljs-number">3</span><br>è¾“å‡ºï¼š<span class="hljs-number">3</span><br>è§£é‡Šï¼š<span class="hljs-number">3</span> è‰˜èˆ¹åˆ†åˆ«è½½ <span class="hljs-comment">(1, 2)</span>, <span class="hljs-comment">(2)</span> å’Œ <span class="hljs-comment">(3)</span><br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹3ï¼š</strong></p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs gcode">è¾“å…¥ï¼špeople = [<span class="hljs-number">3</span>,<span class="hljs-number">5</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>], limit = <span class="hljs-number">5</span><br>è¾“å‡ºï¼š<span class="hljs-number">4</span><br>è§£é‡Šï¼š<span class="hljs-number">4</span> è‰˜èˆ¹åˆ†åˆ«è½½ <span class="hljs-comment">(3)</span>, <span class="hljs-comment">(3)</span>, <span class="hljs-comment">(4)</span>, <span class="hljs-comment">(5)</span><br></code></pre></td></tr></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li><code>1 &lt;= people.length &lt;= 5 * 104</code></li><li><code>1 &lt;= people[i] &lt;= limit &lt;= 3 * 104</code></li></ul><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><h3 id="æ–¹æ³•ä¸€ï¼šè´ªå¿ƒ-åŒæŒ‡é’ˆ"><a href="#æ–¹æ³•ä¸€ï¼šè´ªå¿ƒ-åŒæŒ‡é’ˆ" class="headerlink" title="æ–¹æ³•ä¸€ï¼šè´ªå¿ƒ + åŒæŒ‡é’ˆ"></a>æ–¹æ³•ä¸€ï¼šè´ªå¿ƒ + åŒæŒ‡é’ˆ</h3><p>é€šè¿‡åˆ†æé¢˜æ„å¯ä»¥å¾—å‡ºä»¥ä¸‹å‡ ç‚¹å…³é”®çš„ä¿¡æ¯ï¼š</p><ol><li><p>å¯ç”¨èˆ¹æ•°ä¸é™åˆ¶</p></li><li><p>æ¯è‰˜èˆ¹é™ä¹˜2äººï¼Œæ¯æœèˆ¹é™åˆ¶æ€»é‡ä¸º<code>limit</code></p></li><li><p>è¿”å›ç»“æœä¸<code>people</code>æ•°ç»„çš„é¡ºåºæ— å…³</p></li></ol><p>ä¸ºä½¿å¾—ä½¿ç”¨çš„èˆ¹æ•°æœ€å°‘ï¼Œæ¯æœèˆ¹ä¸Šçš„ä¸¤ä¸ªäººçš„æ€»é‡é‡æœ€å¥½ <strong>ç­‰äºæˆ–å°½å¯èƒ½æ¥è¿‘</strong> <code>limit</code></p><p>å› æ­¤ï¼Œä¸éš¾å¾—å‡ºæœ¬é¢˜çš„æ€è·¯ï¼šå¯¹<code>people</code>æ•°ç»„è¿›è¡Œå‡åºæ’åºï¼ŒåŒæŒ‡é’ˆéå†<code>people</code>æ•°ç»„ã€‚</p><p>éœ€è¦æ³¨æ„çš„ä¸€ç‚¹ï¼šåŒæŒ‡é’ˆ<code>i</code>ä¸<code>j</code>é‡åˆæ—¶ï¼Œæ­¤æ—¶åªå‰©ä½™ä¸€ä¸ªäººï¼Œæ‰€ä»¥ä»–å•ç‹¬ä¹˜ä¸€è‰˜èˆ¹ã€‚</p><h4 id="Python3"><a href="#Python3" class="headerlink" title="Python3"></a>Python3</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">numRescueBoats</span>(<span class="hljs-params">self, people: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], limit: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        people.sort()<br>        i, j, ans = <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(people) - <span class="hljs-number">1</span>, <span class="hljs-number">0</span><br>        <span class="hljs-keyword">while</span> i &lt;= j:<br>            <span class="hljs-keyword">if</span> i == j:<br>                ans += <span class="hljs-number">1</span><br>                <span class="hljs-keyword">break</span><br>            <span class="hljs-keyword">if</span> people[i] + people[j] &lt;= limit:<br>                ans, i, j = ans + <span class="hljs-number">1</span>, i + <span class="hljs-number">1</span>, j - <span class="hljs-number">1</span><br>            <span class="hljs-keyword">else</span>:<br>                ans, j = ans + <span class="hljs-number">1</span>, j - <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> ans<br></code></pre></td></tr></table></figure><h4 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">numRescueBoats</span><span class="hljs-params">(<span class="hljs-type">int</span>[] people, <span class="hljs-type">int</span> limit)</span> &#123;<br>        Arrays.sort(people);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, j = people.length - <span class="hljs-number">1</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span>(i &lt;= j) &#123;<br>            <span class="hljs-keyword">if</span>(i == j) &#123;<br>                ans++;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>            <span class="hljs-keyword">if</span>(people[i] + people[j] &lt;= limit) &#123;<br>                ans++; i++; j--;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                ans++; j--;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Encouragement"><a href="#Encouragement" class="headerlink" title="Encouragement"></a>Encouragement</h2><p>ç›®å‰å°±è¯»äºæ–°åŠ å¡å›½ç«‹å¤§å­¦ï¼Œè½¬ç èœé¸¡ä¸€æšã€‚</p><p>å†³å¿ƒé€šè¿‡æ—¥æ›´ä¸€ç¯‡é¢˜è§£æ¿€åŠ±è‡ªå·±åšæŒåˆ·é¢˜ï¼ŒåšæŒå­¦ä¹ ç®—æ³•ã€‚</p><p>è¿™æ˜¯æˆ‘æ­å»º<a href="https://github.com/ltyzzzxxx/Leetcode-Everyday">Leetcode-Everyday</a>ä»“åº“åå‘å¸ƒã®ç¬¬10ç¯‡é¢˜è§£ï¼Œæ¬¢è¿å„ä½starå¹¶æå‡ºIssue~</p><p>ç‚¹å‡»<a href="https://leetcode.cn/u/ltyzzz/">è¿™é‡Œ</a>ï¼Œè¿›å…¥æˆ‘çš„ä¸ªäººLeetcodeä¸»é¡µ~</p>]]></content>
    
    
    <categories>
      
      <category>Leetcodeé¢˜è§£</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LC-Solution 1784 Check if Binary String Has at Most One Segment of Ones</title>
    <link href="/2022/10/03/LC-Solution-1784-Check-if-Binary-String-Has-at-Most-One-Segment-of-Ones/"/>
    <url>/2022/10/03/LC-Solution-1784-Check-if-Binary-String-Has-at-Most-One-Segment-of-Ones/</url>
    
    <content type="html"><![CDATA[<h1 id="1784-æ£€æŸ¥äºŒè¿›åˆ¶å­—ç¬¦ä¸²å­—æ®µ"><a href="#1784-æ£€æŸ¥äºŒè¿›åˆ¶å­—ç¬¦ä¸²å­—æ®µ" class="headerlink" title="1784. æ£€æŸ¥äºŒè¿›åˆ¶å­—ç¬¦ä¸²å­—æ®µ"></a><a href="https://leetcode.cn/problems/check-if-binary-string-has-at-most-one-segment-of-ones/">1784. æ£€æŸ¥äºŒè¿›åˆ¶å­—ç¬¦ä¸²å­—æ®µ</a></h1><h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>ç»™ä½ ä¸€ä¸ªäºŒè¿›åˆ¶å­—ç¬¦ä¸² <code>s</code> ï¼Œè¯¥å­—ç¬¦ä¸² <strong>ä¸å«å‰å¯¼é›¶</strong> ã€‚</p><p>å¦‚æœ <code>s</code> åŒ…å« <strong>é›¶ä¸ªæˆ–ä¸€ä¸ªç”±è¿ç»­çš„ â€˜1â€™ ç»„æˆçš„å­—æ®µ</strong> ï¼Œè¿”å› <code>true</code>â€‹â€‹â€‹ ã€‚å¦åˆ™ï¼Œè¿”å› <code>false</code></p><p>å¦‚æœ <code>s</code>Â ä¸­Â <strong>ç”±è¿ç»­è‹¥å¹²ä¸ªÂ â€˜1â€™ ç»„æˆçš„å­—æ®µÂ æ•°é‡ä¸è¶…è¿‡ 1</strong>ï¼Œè¿”å› <code>true</code>â€‹â€‹â€‹ ã€‚å¦åˆ™ï¼Œè¿”å› <code>false</code></p><p><strong>ç¤ºä¾‹1ï¼š</strong></p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs actionscript">è¾“å…¥ï¼šs = <span class="hljs-string">&quot;1001&quot;</span><br>è¾“å‡ºï¼š<span class="hljs-literal">false</span><br>è§£é‡Šï¼šç”±è¿ç»­è‹¥å¹²ä¸ª <span class="hljs-string">&#x27;1&#x27;</span> ç»„æˆçš„å­—æ®µæ•°é‡ä¸º <span class="hljs-number">2</span>ï¼Œè¿”å› <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><p>ç¤ºä¾‹2ï¼š</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">è¾“å…¥ï¼š<span class="hljs-attr">s</span> = <span class="hljs-string">&quot;110&quot;</span><br>è¾“å‡ºï¼š<span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li><code>1 &lt;= s.length &lt;= 100</code></li><li><code>s[i]</code>â€‹â€‹â€‹â€‹ ä¸ºÂ <code>&#39;0&#39;</code>Â æˆ–Â <code>&#39;1&#39;</code></li><li><code>s[0]</code>Â ä¸ºÂ <code>&#39;1&#39;</code></li></ul><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><h3 id="æ–¹æ³•ä¸€ï¼šç®€å•æ¨¡æ‹Ÿ"><a href="#æ–¹æ³•ä¸€ï¼šç®€å•æ¨¡æ‹Ÿ" class="headerlink" title="æ–¹æ³•ä¸€ï¼šç®€å•æ¨¡æ‹Ÿ"></a>æ–¹æ³•ä¸€ï¼šç®€å•æ¨¡æ‹Ÿ</h3><p>é¢˜ç›®å·²ç»æ˜ç¡®ç»™å®š<code>s[0] = &#39;1&#39;</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦æ‰¾å‡º<code>s</code>ä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦<code>&#39;0&#39;</code>çš„ä¸‹æ ‡ã€‚</p><ul><li><p>è‹¥å­—ç¬¦ä¸²<code>s</code>ä¸­ä¸å­˜åœ¨<code>&#39;0&#39;</code>ï¼Œé‚£ä¹ˆä¸€å®šå…¨ä¸º<code>&#39;1&#39;</code>ï¼Œè¿”å›<code>True</code></p></li><li><p>è‹¥å­—ç¬¦ä¸²<code>s</code>ä¸­å­˜åœ¨<code>&#39;0&#39;</code>ï¼Œä½†æ˜¯åœ¨å®ƒçš„åé¢ä¸å­˜åœ¨<code>&#39;1&#39;</code>ï¼Œè¯´æ˜<code>s</code>ä¸­åªæœ‰ä¸€ä¸ªç”±è¿ç»­çš„<code>&#39;1&#39;</code>ç»„æˆçš„å­—æ®µï¼ˆå› ä¸º<code>s[0] = &#39;1&#39;</code>ï¼‰ï¼Œè¿”å›<code>True</code></p></li></ul><p>è‹¥ä¸æ»¡è¶³ä»¥ä¸Šä¸¤ç‚¹æ¡ä»¶ï¼Œç›´æ¥è¿”å›<code>False</code></p><h4 id="Python3"><a href="#Python3" class="headerlink" title="Python3"></a>Python3</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">checkOnesSegment</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">bool</span>:<br>        idx = s.find(<span class="hljs-string">&#x27;0&#x27;</span>)<br>        <span class="hljs-keyword">if</span> idx == -<span class="hljs-number">1</span> <span class="hljs-keyword">or</span> <span class="hljs-string">&#x27;1&#x27;</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> s[idx:]:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br></code></pre></td></tr></table></figure><p>é‡‡ç”¨ä¸‰å…ƒè¡¨è¾¾å¼å†™æ³•</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">checkOnesSegment</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">bool</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span> <span class="hljs-keyword">if</span> s.find(<span class="hljs-string">&#x27;0&#x27;</span>) == -<span class="hljs-number">1</span> <span class="hljs-keyword">or</span> <span class="hljs-string">&#x27;1&#x27;</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> s[s.find(<span class="hljs-string">&#x27;0&#x27;</span>):] <span class="hljs-keyword">else</span> <span class="hljs-literal">False</span><br></code></pre></td></tr></table></figure><h4 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">checkOnesSegment</span><span class="hljs-params">(String s)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">idx</span> <span class="hljs-operator">=</span> s.indexOf(<span class="hljs-string">&quot;0&quot;</span>);<br>        <span class="hljs-keyword">if</span>(idx == -<span class="hljs-number">1</span> || s.substring(idx).indexOf(<span class="hljs-string">&quot;1&quot;</span>) == -<span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>&#125;  <br></code></pre></td></tr></table></figure><p>é‡‡ç”¨ä¸‰å…ƒè¡¨è¾¾å¼å†™æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">checkOnesSegment</span><span class="hljs-params">(String s)</span> &#123;<br>        <span class="hljs-keyword">return</span> s.indexOf(<span class="hljs-string">&quot;0&quot;</span>) == -<span class="hljs-number">1</span> || s.substring(s.indexOf(<span class="hljs-string">&quot;0&quot;</span>)).indexOf(<span class="hljs-string">&quot;1&quot;</span>) == -<span class="hljs-number">1</span> ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>;<br>    &#125;<br>&#125;  <br></code></pre></td></tr></table></figure><h2 id="Encouragement"><a href="#Encouragement" class="headerlink" title="Encouragement"></a>Encouragement</h2><p>ç›®å‰å°±è¯»äºæ–°åŠ å¡å›½ç«‹å¤§å­¦ï¼Œè½¬ç èœé¸¡ä¸€æšã€‚</p><p>å†³å¿ƒé€šè¿‡æ—¥æ›´ä¸€ç¯‡é¢˜è§£æ¿€åŠ±è‡ªå·±åšæŒåˆ·é¢˜ï¼ŒåšæŒå­¦ä¹ ç®—æ³•ã€‚</p><p>è¿™æ˜¯æˆ‘æ­å»º<a href="https://github.com/ltyzzzxxx/Leetcode-Everyday">Leetcode-Everyday</a>ä»“åº“åå‘å¸ƒã®ç¬¬9ç¯‡é¢˜è§£ï¼Œæ¬¢è¿å„ä½starå¹¶æå‡ºIssue~</p><p>ç‚¹å‡»<a href="https://leetcode.cn/u/ltyzzz/">è¿™é‡Œ</a>ï¼Œè¿›å…¥æˆ‘çš„ä¸ªäººLeetcodeä¸»é¡µ~</p>]]></content>
    
    
    <categories>
      
      <category>Leetcodeé¢˜è§£</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LC-Solution 807. Max Increase to Keep City Skyline</title>
    <link href="/2022/10/03/LC-Solution-807-Max-Increase-to-Keep-City-Skyline/"/>
    <url>/2022/10/03/LC-Solution-807-Max-Increase-to-Keep-City-Skyline/</url>
    
    <content type="html"><![CDATA[<h1 id="807-ä¿æŒåŸå¸‚å¤©é™…çº¿"><a href="#807-ä¿æŒåŸå¸‚å¤©é™…çº¿" class="headerlink" title="807. ä¿æŒåŸå¸‚å¤©é™…çº¿"></a><a href="https://leetcode.cn/problems/max-increase-to-keep-city-skyline/">807. ä¿æŒåŸå¸‚å¤©é™…çº¿</a></h1><h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>ç»™ä½ ä¸€åº§ç”± <code>n x n</code> ä¸ªè¡—åŒºç»„æˆçš„åŸå¸‚ï¼Œæ¯ä¸ªè¡—åŒºéƒ½åŒ…å«ä¸€åº§ç«‹æ–¹ä½“å»ºç­‘ã€‚ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» <strong>0</strong> å¼€å§‹çš„ <code>n x n</code> æ•´æ•°çŸ©é˜µ <code>grid</code> ï¼Œå…¶ä¸­ <code>grid[r][c]</code> è¡¨ç¤ºåè½äº <code>r</code> è¡Œ <code>c</code> åˆ—çš„å»ºç­‘ç‰©çš„ <strong>é«˜åº¦</strong> ã€‚</p><p>åŸå¸‚çš„ <strong>å¤©é™…çº¿</strong> æ˜¯ä»è¿œå¤„è§‚å¯ŸåŸå¸‚æ—¶ï¼Œæ‰€æœ‰å»ºç­‘ç‰©å½¢æˆçš„å¤–éƒ¨è½®å»“ã€‚ä»ä¸œã€å—ã€è¥¿ã€åŒ—å››ä¸ªä¸»è¦æ–¹å‘è§‚æµ‹åˆ°çš„ <strong>å¤©é™…çº¿</strong> å¯èƒ½ä¸åŒã€‚</p><p>æˆ‘ä»¬è¢«å…è®¸ä¸º <strong>ä»»æ„æ•°é‡çš„å»ºç­‘ç‰©</strong> çš„é«˜åº¦å¢åŠ  <strong>ä»»æ„å¢é‡ï¼ˆä¸åŒå»ºç­‘ç‰©çš„å¢é‡å¯èƒ½ä¸åŒï¼‰</strong> ã€‚ é«˜åº¦ä¸º 0 çš„å»ºç­‘ç‰©çš„é«˜åº¦ä¹Ÿå¯ä»¥å¢åŠ ã€‚ç„¶è€Œï¼Œå¢åŠ çš„å»ºç­‘ç‰©é«˜åº¦ <strong>ä¸èƒ½å½±å“</strong> ä»ä»»ä½•ä¸»è¦æ–¹å‘è§‚å¯ŸåŸå¸‚å¾—åˆ°çš„ <strong>å¤©é™…çº¿</strong> ã€‚</p><p>åœ¨ <strong>ä¸æ”¹å˜</strong> ä»ä»»ä½•ä¸»è¦æ–¹å‘è§‚æµ‹åˆ°çš„åŸå¸‚ <strong>å¤©é™…çº¿</strong> çš„å‰æä¸‹ï¼Œè¿”å›å»ºç­‘ç‰©å¯ä»¥å¢åŠ çš„ <strong>æœ€å¤§é«˜åº¦å¢é‡æ€»å’Œ</strong></p><p><strong>ç¤ºä¾‹1ï¼š</strong></p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šgrid = <span class="hljs-comment">[<span class="hljs-comment">[3,0,8,4]</span>,<span class="hljs-comment">[2,4,5,7]</span>,<span class="hljs-comment">[9,2,6,3]</span>,<span class="hljs-comment">[0,3,1,0]</span>]</span><br>è¾“å‡ºï¼š35<br>è§£é‡Šï¼šå»ºç­‘ç‰©çš„é«˜åº¦å¦‚ä¸Šå›¾ä¸­å¿ƒæ‰€ç¤ºã€‚<br>ç”¨çº¢è‰²ç»˜åˆ¶ä»ä¸åŒæ–¹å‘è§‚çœ‹å¾—åˆ°çš„å¤©é™…çº¿ã€‚<br>åœ¨ä¸å½±å“å¤©é™…çº¿çš„æƒ…å†µä¸‹ï¼Œå¢åŠ å»ºç­‘ç‰©çš„é«˜åº¦ï¼š<br>gridNew = <span class="hljs-comment">[ <span class="hljs-comment">[8, 4, 8, 7]</span>,</span><br><span class="hljs-comment">            <span class="hljs-comment">[7, 4, 7, 7]</span>,</span><br><span class="hljs-comment">            <span class="hljs-comment">[9, 4, 8, 7]</span>,</span><br><span class="hljs-comment">            <span class="hljs-comment">[3, 3, 3, 3]</span> ]</span><br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹2ï¼š</strong></p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua">è¾“å…¥ï¼šgrid = <span class="hljs-string">[[0,0,0],[0,0,0],[0,0,0]]</span><br>è¾“å‡ºï¼š<span class="hljs-number">0</span><br>è§£é‡Šï¼šå¢åŠ ä»»ä½•å»ºç­‘ç‰©çš„é«˜åº¦éƒ½ä¼šå¯¼è‡´å¤©é™…çº¿çš„å˜åŒ–ã€‚<br></code></pre></td></tr></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li><code>n == grid.length</code></li><li><code>n == grid[r].length</code></li><li><code>2 &lt;= n &lt;= 50</code></li><li><code>0 &lt;= grid[r][c] &lt;= 100</code></li></ul><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><h3 id="æ–¹æ³•ä¸€ï¼šè´ªå¿ƒç®—æ³•"><a href="#æ–¹æ³•ä¸€ï¼šè´ªå¿ƒç®—æ³•" class="headerlink" title="æ–¹æ³•ä¸€ï¼šè´ªå¿ƒç®—æ³•"></a>æ–¹æ³•ä¸€ï¼šè´ªå¿ƒç®—æ³•</h3><p>åˆ†æé¢˜æ„ä¸éš¾å¾—å‡ºï¼Œä¸œå—è¥¿åŒ—çš„è§†å›¾å³<code>å¤©é™…çº¿</code>æ˜¯ç”±æ¯è¡Œæ¯åˆ—çš„æœ€å¤§å€¼å†³å®šçš„ã€‚</p><p>å› æ­¤ï¼Œæ¯ä¸ªå»ºç­‘æœ€ç»ˆè¾¾åˆ°çš„é«˜åº¦ä¸èƒ½è¶…è¿‡å…¶æ‰€åœ¨è¡Œä¸åˆ—çš„æœ€å¤§é«˜åº¦ï¼Œæ›´åŠ å…·ä½“åœ°è¯´ï¼Œä¸èƒ½è¶…è¿‡<code>min(è¯¥è¡Œæœ€å¤§é«˜åº¦, è¯¥åˆ—æœ€å¤§é«˜åº¦)</code>ã€‚</p><ul><li><p>ç¬¬ä¸€ééå†ï¼šæå‰é¢„å¤„ç†å‡ºæ¯ä¸€è¡Œä¸æ¯ä¸€åˆ—å¯¹åº”çš„æœ€å¤§é«˜åº¦å€¼</p></li><li><p>ç¬¬äºŒééå†ï¼šå¾€<code>ans</code>ç»“æœä¸­ç´¯åŠ å½“å‰éå†çš„å»ºç­‘å¯ä»¥å¢åŠ çš„æœ€å¤§é«˜åº¦</p></li></ul><h4 id="Python3"><a href="#Python3" class="headerlink" title="Python3"></a>Python3</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">maxIncreaseKeepingSkyline</span>(<span class="hljs-params">self, grid: <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]]</span>) -&gt; <span class="hljs-built_in">int</span>:<br>        ans, n = <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(grid)<br>        rowMax, colMax = [<span class="hljs-number">0</span>] * n, [<span class="hljs-number">0</span>] * n<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>                rowMax[i] = <span class="hljs-built_in">max</span>(rowMax[i], grid[i][j])<br>                colMax[j] = <span class="hljs-built_in">max</span>(colMax[j], grid[i][j])<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>                ans += <span class="hljs-built_in">min</span>(rowMax[i], colMax[j]) - grid[i][j]<br>        <span class="hljs-keyword">return</span> ans<br></code></pre></td></tr></table></figure><h4 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">maxIncreaseKeepingSkyline</span><span class="hljs-params">(<span class="hljs-type">int</span>[][] grid)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> grid.length;<br>        <span class="hljs-type">int</span>[] rowMax = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n], colMax = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n];<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; n; j++) &#123;<br>                rowMax[i] = Math.max(rowMax[i], grid[i][j]);<br>                colMax[j] = Math.max(colMax[j], grid[i][j]);<br>            &#125;<br>        &#125;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; n; j++) &#123;<br>                ans += Math.min(rowMax[i], colMax[j]) - grid[i][j];<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Encouragement"><a href="#Encouragement" class="headerlink" title="Encouragement"></a>Encouragement</h2><p>ç›®å‰å°±è¯»äºæ–°åŠ å¡å›½ç«‹å¤§å­¦ï¼Œè½¬ç èœé¸¡ä¸€æšã€‚</p><p>å†³å¿ƒé€šè¿‡æ—¥æ›´ä¸€ç¯‡é¢˜è§£æ¿€åŠ±è‡ªå·±åšæŒåˆ·é¢˜ï¼ŒåšæŒå­¦ä¹ ç®—æ³•ã€‚</p><p>è¿™æ˜¯æˆ‘æ­å»º<a href="https://github.com/ltyzzzxxx/Leetcode-Everyday">Leetcode-Everyday</a>ä»“åº“åå‘å¸ƒã®ç¬¬8ç¯‡é¢˜è§£ï¼Œæ¬¢è¿å„ä½starå¹¶æå‡ºIssue~</p><p>ç‚¹å‡»<a href="https://leetcode.cn/u/ltyzzz/">è¿™é‡Œ</a>ï¼Œè¿›å…¥æˆ‘çš„ä¸ªäººLeetcodeä¸»é¡µ~</p>]]></content>
    
    
    <categories>
      
      <category>Leetcodeé¢˜è§£</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LC-Solution 781. Rabbits in Forest</title>
    <link href="/2022/10/03/LC-Solution-781-Rabbits-in-Forest/"/>
    <url>/2022/10/03/LC-Solution-781-Rabbits-in-Forest/</url>
    
    <content type="html"><![CDATA[<h1 id="781-æ£®æ—ä¸­çš„å…”å­"><a href="#781-æ£®æ—ä¸­çš„å…”å­" class="headerlink" title="781. æ£®æ—ä¸­çš„å…”å­"></a><a href="https://leetcode.cn/problems/rabbits-in-forest/">781. æ£®æ—ä¸­çš„å…”å­</a></h1><h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>æ£®æ—ä¸­æœ‰æœªçŸ¥æ•°é‡çš„å…”å­ã€‚æé—®å…¶ä¸­è‹¥å¹²åªå…”å­ â€œ<strong>è¿˜æœ‰å¤šå°‘åªå…”å­ä¸ä½ ï¼ˆæŒ‡è¢«æé—®çš„å…”å­ï¼‰é¢œè‰²ç›¸åŒ?</strong>â€œ ï¼Œå°†ç­”æ¡ˆæ”¶é›†åˆ°ä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>answers</code> ä¸­ï¼Œå…¶ä¸­ <code>answers[i]</code> æ˜¯ç¬¬ <code>i</code> åªå…”å­çš„å›ç­”ã€‚</p><p>ç»™ä½ æ•°ç»„ <code>answers</code> ï¼Œè¿”å›æ£®æ—ä¸­å…”å­çš„æœ€å°‘æ•°é‡ã€‚</p><p><strong>ç¤ºä¾‹1ï¼š</strong></p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs prolog">è¾“å…¥ï¼šanswers = [<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>]<br>è¾“å‡ºï¼š<span class="hljs-number">5</span><br>è§£é‡Šï¼š<br>ä¸¤åªå›ç­”äº† <span class="hljs-string">&quot;1&quot;</span> çš„å…”å­å¯èƒ½æœ‰ç›¸åŒçš„é¢œè‰²ï¼Œè®¾ä¸ºçº¢è‰²ã€‚ <br>ä¹‹åå›ç­”äº† <span class="hljs-string">&quot;2&quot;</span> çš„å…”å­ä¸ä¼šæ˜¯çº¢è‰²ï¼Œå¦åˆ™ä»–ä»¬çš„å›ç­”ä¼šç›¸äº’çŸ›ç›¾ã€‚<br>è®¾å›ç­”äº† <span class="hljs-string">&quot;2&quot;</span> çš„å…”å­ä¸ºè“è‰²ã€‚ <br>æ­¤å¤–ï¼Œæ£®æ—ä¸­è¿˜åº”æœ‰å¦å¤– <span class="hljs-number">2</span> åªè“è‰²å…”å­çš„å›ç­”æ²¡æœ‰åŒ…å«åœ¨æ•°ç»„ä¸­ã€‚ <br>å› æ­¤æ£®æ—ä¸­å…”å­çš„æœ€å°‘æ•°é‡æ˜¯ <span class="hljs-number">5</span> åªï¼š<span class="hljs-number">3</span> åªå›ç­”çš„å’Œ <span class="hljs-number">2</span> åªæ²¡æœ‰å›ç­”çš„ã€‚<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹2ï¼š</strong></p><figure class="highlight fix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs fix"><span class="hljs-attr">è¾“å…¥ï¼šanswers </span>=<span class="hljs-string"> [10,10,10]</span><br><span class="hljs-string">è¾“å‡ºï¼š11</span><br></code></pre></td></tr></table></figure><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><h3 id="æ–¹æ³•ä¸€ï¼šæ‰¾è§„å¾‹"><a href="#æ–¹æ³•ä¸€ï¼šæ‰¾è§„å¾‹" class="headerlink" title="æ–¹æ³•ä¸€ï¼šæ‰¾è§„å¾‹"></a>æ–¹æ³•ä¸€ï¼šæ‰¾è§„å¾‹</h3><p>ä¸¾ä¾‹åˆ†æï¼š</p><ol><li><p>å½“æ•°ç»„ä¸º<code>[2, 2 ,2]</code>æ—¶ï¼Œ1ç§é¢œè‰² - 3åªå…”å­</p></li><li><p>å½“æ•°ç»„ä¸º<code>[2, 2, 2, 2]</code>æ—¶ï¼Œ2ç§é¢œè‰² - 6åªå…”å­ï¼ˆå‰ä¸‰åªå…”å­ä¸ºä¸€ç§é¢œè‰²ï¼Œæœ€åä¸€åªå…”å­ä»¥åŠæœªè¢«é—®åˆ°çš„å¦å¤–ä¸¤åªä¸çŸ¥åå…”å­ä¸ºå¦ä¸€ç§é¢œè‰²ï¼‰</p></li><li><p>å½“æ•°ç»„ä¸º<code>[2, 2, 2, 2, 2, 2]</code>æ—¶ï¼Œ2ç§é¢œè‰² - 6åªå…”å­ï¼ˆå‰ä¸‰åªå…”å­ä¸ºä¸€ç§é¢œè‰²ï¼Œåä¸‰åªå…”å­ä¸ºå¦ä¸€ç§é¢œè‰²ï¼‰</p></li><li><p>å½“æ•°ç»„ä¸º<code>[2, 2, 2, 2, 2, 2, 2]</code>æ—¶ï¼Œ3ç§é¢œè‰² - 9åªå…”å­ï¼ˆ1,2,3å·å…”å­ä¸ºè‰²å·1ï¼Œ4,5,6å·å…”å­ä¸ºè‰²å·2ï¼Œ7å·å…”å­ä»¥åŠå¦å¤–ä¸¤åªä¸çŸ¥åå…”å­ä¸ºè‰²å·3ï¼‰</p></li><li><p>ä»¥æ­¤ç±»æ¨â€¦</p></li></ol><p>ç»è¿‡åˆ†æï¼ŒæŠ½è±¡ä¸ºæ•°å­¦æ‰¾è§„å¾‹çš„é¢˜ç›®ã€‚</p><p>ç”¨å“ˆå¸Œè¡¨ç»Ÿè®¡åŒä¸€ä¸ªæ•°å­—å‡ºç°çš„é¢‘ç‡ã€‚è®¾<code>num</code>ä¸ºå“ˆå¸Œè¡¨çš„keyï¼Œ<code>freq</code>ä¸ºå“ˆå¸Œè¡¨çš„å€¼ã€‚</p><p>å°†<code>freq</code>åˆ†ä¸º<code>freq // (num + 1)</code>ä¸ªç»„ï¼Œä½™æ•°å†å•ç‹¬åˆ†åˆ°å¦ä¸€ä¸ªç»„ã€‚</p><p>ä¸¾ä¾‹ï¼š<code>[1, 1, 2, 2, 2, 2, 2]</code>æ•°ç»„ç»Ÿè®¡å­˜å…¥å“ˆå¸Œè¡¨åã€‚ä¸€ä¸ªé”®å€¼å¯¹ä¸º<code>&#123;1: 2&#125;</code>ï¼Œå¯ä»¥è¢«åˆ†ä¸º<code>2 // (1 + 1) = 1</code>ä¸ªç»„ï¼Œæ­£å¥½æ•´é™¤ã€‚å¦ä¸€ä¸ªé”®å€¼å¯¹ä¸º<code>&#123;2: 4&#125;</code>ï¼Œå¯ä»¥è¢«åˆ†ä¸º<code>4 // (2 + 1) = 1</code>ä¸ªç»„ï¼Œå‰©ä½™çš„2ç»„æˆä¸€ä¸ªç»„ã€‚ç­”æ¡ˆä¸ºæ¯ä¸ªé”®å€¼å¯¹å¯¹åº”çš„ç»„æ•°ä¹˜ä»¥<code>num + 1</code>æ±‚å’Œ</p><h4 id="Python3"><a href="#Python3" class="headerlink" title="Python3"></a>Python3</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">numRabbits</span>(<span class="hljs-params">self, answers: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:<br>        dic = Counter(answers)<br>        ans = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> num, freq <span class="hljs-keyword">in</span> dic.items():<br>            ans += freq // (num + <span class="hljs-number">1</span>) * (num + <span class="hljs-number">1</span>) <br>            <span class="hljs-keyword">if</span> freq % (num + <span class="hljs-number">1</span>) != <span class="hljs-number">0</span>:<br>                ans += num + <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> ans<br></code></pre></td></tr></table></figure><h2 id="Encouragement"><a href="#Encouragement" class="headerlink" title="Encouragement"></a>Encouragement</h2><p>ç›®å‰å°±è¯»äºæ–°åŠ å¡å›½ç«‹å¤§å­¦ï¼Œè½¬ç èœé¸¡ä¸€æšã€‚</p><p>å†³å¿ƒé€šè¿‡æ—¥æ›´ä¸€ç¯‡é¢˜è§£æ¿€åŠ±è‡ªå·±åšæŒåˆ·é¢˜ï¼ŒåšæŒå­¦ä¹ ç®—æ³•ã€‚</p><p>è¿™æ˜¯æˆ‘æ­å»º<a href="https://github.com/ltyzzzxxx/Leetcode-Everyday">Leetcode-Everyday</a>ä»“åº“åå‘å¸ƒã®ç¬¬7ç¯‡é¢˜è§£ï¼Œæ¬¢è¿å„ä½starå¹¶æå‡ºIssue~</p><p>ç‚¹å‡»<a href="https://leetcode.cn/u/ltyzzz/">è¿™é‡Œ</a>ï¼Œè¿›å…¥æˆ‘çš„ä¸ªäººLeetcodeä¸»é¡µ~</p>]]></content>
    
    
    <categories>
      
      <category>Leetcodeé¢˜è§£</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LC-Solution 777. Swap Adjacent in LR String</title>
    <link href="/2022/10/03/LC-Solution-777-Swap-Adjacent-in-LR-String/"/>
    <url>/2022/10/03/LC-Solution-777-Swap-Adjacent-in-LR-String/</url>
    
    <content type="html"><![CDATA[<h1 id="777-åœ¨LRå­—ç¬¦ä¸²ä¸­äº¤æ¢ç›¸é‚»å­—ç¬¦"><a href="#777-åœ¨LRå­—ç¬¦ä¸²ä¸­äº¤æ¢ç›¸é‚»å­—ç¬¦" class="headerlink" title="777. åœ¨LRå­—ç¬¦ä¸²ä¸­äº¤æ¢ç›¸é‚»å­—ç¬¦"></a><a href="https://leetcode.cn/problems/swap-adjacent-in-lr-string/">777. åœ¨LRå­—ç¬¦ä¸²ä¸­äº¤æ¢ç›¸é‚»å­—ç¬¦</a></h1><h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>åœ¨ä¸€ä¸ªç”± <code>&#39;L&#39;</code> , <code>&#39;R&#39;</code> å’Œ <code>&#39;X&#39;</code> ä¸‰ä¸ªå­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚<code>&quot;RXXLRXRXL&quot;</code>ï¼‰ä¸­è¿›è¡Œç§»åŠ¨æ“ä½œã€‚ä¸€æ¬¡ç§»åŠ¨æ“ä½œæŒ‡ç”¨ä¸€ä¸ª<code>&quot;LX&quot;</code>æ›¿æ¢ä¸€ä¸ª<code>&quot;XL&quot;</code>ï¼Œæˆ–è€…ç”¨ä¸€ä¸ª<code>&quot;XR&quot;</code>æ›¿æ¢ä¸€ä¸ª<code>&quot;RX&quot;</code>ã€‚ç°ç»™å®šèµ·å§‹å­—ç¬¦ä¸²<code>start</code>å’Œç»“æŸå­—ç¬¦ä¸²<code>end</code>ï¼Œè¯·ç¼–å†™ä»£ç ï¼Œå½“ä¸”ä»…å½“å­˜åœ¨ä¸€ç³»åˆ—ç§»åŠ¨æ“ä½œä½¿å¾—<code>start</code>å¯ä»¥è½¬æ¢æˆ<code>end</code>æ—¶ï¼Œ è¿”å›<code>True</code>ã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs coq">è¾“å…¥: start = <span class="hljs-string">&quot;RXXLRXRXL&quot;</span>, <span class="hljs-keyword">end</span> = <span class="hljs-string">&quot;XRLXXRRLX&quot;</span><br>è¾“å‡º: True<br>è§£é‡Š:<br>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ æ­¥å°†startè½¬æ¢æˆ<span class="hljs-keyword">end</span>:<br>RXXLRXRXL -&gt;<br>XRXLRXRXL -&gt;<br>XRLXRXRXL -&gt;<br>XRLXXRRXL -&gt;<br>XRLXXRRLX<br></code></pre></td></tr></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li><code>1 &lt;= len(start) = len(end) &lt;= 10000</code>ã€‚</li><li><code>start</code>å’Œ<code>end</code>ä¸­çš„å­—ç¬¦ä¸²ä»…é™äº<code>&#39;L&#39;</code>,Â <code>&#39;R&#39;</code>å’Œ<code>&#39;X&#39;</code>ã€‚</li></ul><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><h3 id="æ–¹æ³•ä¸€ï¼šæ¨¡æ‹Ÿ"><a href="#æ–¹æ³•ä¸€ï¼šæ¨¡æ‹Ÿ" class="headerlink" title="æ–¹æ³•ä¸€ï¼šæ¨¡æ‹Ÿ"></a>æ–¹æ³•ä¸€ï¼šæ¨¡æ‹Ÿ</h3><p>æ ¹æ®é¢˜æ„è¿›è¡Œåˆ†ææ¨¡æ‹Ÿï¼Œé¢˜ç›®å°†æ¯ä¸€ä¸ª<code>XL</code>éƒ½æ›¿æ¢æˆäº†<code>LX</code>ï¼Œå°†æ¯ä¸€ä¸ª<code>RX</code>éƒ½æ›¿æ¢æˆäº†<code>XR</code></p><p>é€šè¿‡æ‰¾è§„å¾‹å¯å‘ç°ï¼Œæ›¿æ¢çš„è¿‡ç¨‹å¯ä»¥ç†è§£ä¸º<code>L</code>ä¸<code>R</code>ç§»åŠ¨çš„è¿‡ç¨‹ã€‚</p><ul><li><p>å½“<code>L</code>çš„å·¦è¾¹ä¸º<code>X</code>æ—¶ï¼Œ<code>L</code>å¯å‘å·¦ç§»åŠ¨</p></li><li><p>å½“<code>R</code>çš„å³è¾¹ä¸º<code>X</code>æ—¶ï¼Œ<code>R</code>å¯å‘å³ç§»åŠ¨</p></li><li><p><code>L</code>ä¸<code>R</code>æ— æ³•äº’ç›¸ç©¿è¿‡ï¼ˆå› ä¸º<code>L</code>å·¦å’Œ<code>R</code>å³å¿…é¡»ä¸º<code>X</code>ï¼‰</p><ul><li>å¯å¾—çŸ¥å½“<code>start</code>ä¸<code>end</code>å»æ‰<code>X</code>åï¼Œå‰©ä½™å­—ç¬¦å¿…é¡»ç›¸åŒï¼Œå¦åˆ™è¿”å›False</li></ul></li></ul><p>æ ¹æ®æ­¤è§„å¾‹ï¼Œä½¿ç”¨åŒæŒ‡é’ˆ<code>i</code>ä¸<code>j</code>ä»å¤´åˆ°å°¾éå†<code>start</code>ä¸<code>end</code></p><p>æ‰¾åˆ°<code>start</code>ä¸<code>end</code>ä¸­<code>éX</code>çš„å­—ç¬¦æ—¶åˆ™åœæ­¢ç§»åŠ¨ï¼Œè¿›è¡Œåˆ¤æ–­</p><p>åˆ¤æ–­æ¡ä»¶ä¸ºï¼š</p><ul><li><p>è‹¥<code>start[i] == L and i &lt; j</code>ï¼Œåˆå› <code>L</code>æ— æ³•å‘å³ç§»åŠ¨ï¼Œç›´æ¥è¿”å›False</p></li><li><p>è‹¥<code>start[i] == R and i &gt; j</code>ï¼Œåˆå› <code>R</code>æ— æ³•å‘å·¦ç§»åŠ¨ï¼Œç›´æ¥è¿”å›False</p></li></ul><p>å½“åŒæŒ‡é’ˆéå†å­—ç¬¦ä¸²ç»“æŸåï¼Œè¯´æ˜ä¸­é€”æœªè¿”å›Falseï¼Œåˆ™æœ€ç»ˆè¿”å›True</p><p>æ³¨æ„ï¼š</p><p><code>if i != j and (start[i] == &#39;L&#39;) != (i &gt; j)</code>è¯¥è¡Œä»£ç æ‘˜è‡ª<a href="https://leetcode.cn/u/endlesscheng/">çµå±±èŒ¶è‰¾åºœ</a>å¤§ä½¬çš„é¢˜è§£ï¼Œç›¸å½“äºå°†ä¸¤ä¸ª<code>if</code>åˆ¤æ–­æ¡ä»¶æ‰ä¸ºä¸€ä¸ªï¼Œå…¶æœ¬è´¨ä¸ºï¼š</p><ul><li><p><code>if i &lt; j and start[i] == &#39;L&#39;: return False</code></p></li><li><p><code>if i &gt; j and start[i] == &#39;R&#39;: return False</code></p></li></ul><h4 id="Python3"><a href="#Python3" class="headerlink" title="Python3"></a>Python3</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">canTransform</span>(<span class="hljs-params">self, start: <span class="hljs-built_in">str</span>, end: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">bool</span>:<br>        <span class="hljs-keyword">if</span> start.replace(<span class="hljs-string">&#x27;X&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>) != end.replace(<span class="hljs-string">&#x27;X&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>): <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>        n = <span class="hljs-built_in">len</span>(start)<br>        i = j = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">while</span> i &lt; n <span class="hljs-keyword">and</span> j &lt; n:<br>            <span class="hljs-keyword">while</span> i &lt; n <span class="hljs-keyword">and</span> start[i] == <span class="hljs-string">&#x27;X&#x27;</span>: i += <span class="hljs-number">1</span><br>            <span class="hljs-keyword">while</span> j &lt; n <span class="hljs-keyword">and</span> end[j] == <span class="hljs-string">&#x27;X&#x27;</span>: j += <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span> i != j <span class="hljs-keyword">and</span> (start[i] == <span class="hljs-string">&#x27;L&#x27;</span>) != (i &gt; j): <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>            i, j = i + <span class="hljs-number">1</span>, j + <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br></code></pre></td></tr></table></figure><h4 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">canTransform</span><span class="hljs-params">(String start, String end)</span> &#123;<br>        <span class="hljs-keyword">if</span>(!start.replace(<span class="hljs-string">&quot;X&quot;</span>, <span class="hljs-string">&quot;&quot;</span>).equals(end.replace(<span class="hljs-string">&quot;X&quot;</span>, <span class="hljs-string">&quot;&quot;</span>))) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> start.length();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, j = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span>(i &lt; n &amp;&amp; j &lt; n) &#123;<br>            <span class="hljs-keyword">while</span>(i &lt; n &amp;&amp; start.charAt(i) == <span class="hljs-string">&#x27;X&#x27;</span>) i += <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">while</span>(j &lt; n &amp;&amp; end.charAt(j) == <span class="hljs-string">&#x27;X&#x27;</span>) j += <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">if</span> ((i != j) &amp;&amp; ((start.charAt(i) == <span class="hljs-string">&#x27;L&#x27;</span>) != (i &gt; j))) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            i++; j++;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;   <br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Encouragement"><a href="#Encouragement" class="headerlink" title="Encouragement"></a>Encouragement</h2><p>ç›®å‰å°±è¯»äºæ–°åŠ å¡å›½ç«‹å¤§å­¦ï¼Œè½¬ç èœé¸¡ä¸€æšã€‚</p><p>å†³å¿ƒé€šè¿‡æ—¥æ›´ä¸€ç¯‡é¢˜è§£æ¿€åŠ±è‡ªå·±åšæŒåˆ·é¢˜ï¼ŒåšæŒå­¦ä¹ ç®—æ³•ã€‚</p><p>è¿™æ˜¯æˆ‘æ­å»º<a href="https://github.com/ltyzzzxxx/Leetcode-Everyday">Leetcode-Everyday</a>ä»“åº“åå‘å¸ƒã®ç¬¬5ç¯‡é¢˜è§£ï¼Œæ¬¢è¿å„ä½starå¹¶æå‡ºIssue~</p><p>ç‚¹å‡»<a href="https://leetcode.cn/u/ltyzzz/">è¿™é‡Œ</a>ï¼Œè¿›å…¥æˆ‘çš„ä¸ªäººLeetcodeä¸»é¡µ~</p>]]></content>
    
    
    <categories>
      
      <category>Leetcodeé¢˜è§£</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LC-Solution 1694. Reformat Phone Number</title>
    <link href="/2022/10/03/LC-Solution-1694-Reformat-Phone-Number/"/>
    <url>/2022/10/03/LC-Solution-1694-Reformat-Phone-Number/</url>
    
    <content type="html"><![CDATA[<h1 id="1694-é‡æ–°æ ¼å¼åŒ–ç”µè¯å·ç "><a href="#1694-é‡æ–°æ ¼å¼åŒ–ç”µè¯å·ç " class="headerlink" title="1694. é‡æ–°æ ¼å¼åŒ–ç”µè¯å·ç "></a><a href="https://leetcode.cn/problems/reformat-phone-number/">1694. é‡æ–°æ ¼å¼åŒ–ç”µè¯å·ç </a></h1><h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²å½¢å¼çš„ç”µè¯å·ç  <code>number</code> ã€‚<code>number</code> ç”±æ•°å­—ã€ç©ºæ ¼ <code>&#39; &#39;</code>ã€å’Œç ´æŠ˜å·<code>&#39;-&#39;</code>ç»„æˆã€‚</p><p>è¯·ä½ æŒ‰ä¸‹è¿°æ–¹å¼é‡æ–°æ ¼å¼åŒ–ç”µè¯å·ç ã€‚</p><ul><li><p>é¦–å…ˆï¼Œåˆ é™¤ æ‰€æœ‰çš„ç©ºæ ¼å’Œç ´æŠ˜å·ã€‚</p></li><li><p>å…¶æ¬¡ï¼Œå°†æ•°ç»„ä»å·¦åˆ°å³ æ¯ 3 ä¸ªä¸€ç»„ åˆ†å—ï¼Œç›´åˆ° å‰©ä¸‹ 4 ä¸ªæˆ–æ›´å°‘æ•°å­—ã€‚å‰©ä¸‹çš„æ•°å­—å°†æŒ‰ä¸‹è¿°è§„å®šå†åˆ†å—ï¼š</p><ul><li><p>2 ä¸ªæ•°å­—ï¼šå•ä¸ªå« 2 ä¸ªæ•°å­—çš„å—ã€‚</p></li><li><p>3 ä¸ªæ•°å­—ï¼šå•ä¸ªå« 3 ä¸ªæ•°å­—çš„å—ã€‚</p></li><li><p>4 ä¸ªæ•°å­—ï¼šä¸¤ä¸ªåˆ†åˆ«å« 2 ä¸ªæ•°å­—çš„å—ã€‚</p></li></ul></li><li><p>æœ€åç”¨ç ´æŠ˜å·å°†è¿™äº›å—è¿æ¥èµ·æ¥ã€‚æ³¨æ„ï¼Œé‡æ–°æ ¼å¼åŒ–è¿‡ç¨‹ä¸­ ä¸åº”è¯¥ ç”Ÿæˆä»…å« 1 ä¸ªæ•°å­—çš„å—ï¼Œå¹¶ä¸” æœ€å¤š ç”Ÿæˆä¸¤ä¸ªå« 2 ä¸ªæ•°å­—çš„å—ã€‚</p></li></ul><p>è¿”å›æ ¼å¼åŒ–åçš„ç”µè¯å·ç ã€‚</p><p><strong>ç¤ºä¾‹1ï¼š</strong></p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs abnf">è¾“å…¥ï¼šnumber <span class="hljs-operator">=</span> <span class="hljs-string">&quot;1-23-45 6&quot;</span><br>è¾“å‡ºï¼š<span class="hljs-string">&quot;123-456&quot;</span><br>è§£é‡Šï¼šæ•°å­—æ˜¯ <span class="hljs-string">&quot;123456&quot;</span><br>æ­¥éª¤ <span class="hljs-number">1</span>ï¼šå…±æœ‰è¶…è¿‡ <span class="hljs-number">4</span> ä¸ªæ•°å­—ï¼Œæ‰€ä»¥å…ˆå– <span class="hljs-number">3</span> ä¸ªæ•°å­—åˆ†ä¸ºä¸€ç»„ã€‚ç¬¬ <span class="hljs-number">1</span> ä¸ªå—æ˜¯ <span class="hljs-string">&quot;123&quot;</span> ã€‚<br>æ­¥éª¤ <span class="hljs-number">2</span>ï¼šå‰©ä¸‹ <span class="hljs-number">3</span> ä¸ªæ•°å­—ï¼Œå°†å®ƒä»¬æ”¾å…¥å•ä¸ªå« <span class="hljs-number">3</span> ä¸ªæ•°å­—çš„å—ã€‚ç¬¬ <span class="hljs-number">2</span> ä¸ªå—æ˜¯ <span class="hljs-string">&quot;456&quot;</span> ã€‚<br>è¿æ¥è¿™äº›å—åå¾—åˆ° <span class="hljs-string">&quot;123-456&quot;</span> ã€‚<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹2ï¼š</strong></p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs abnf">è¾“å…¥ï¼šnumber <span class="hljs-operator">=</span> <span class="hljs-string">&quot;123 4-567&quot;</span><br>è¾“å‡ºï¼š<span class="hljs-string">&quot;123-45-67&quot;</span><br>è§£é‡Šï¼šæ•°å­—æ˜¯ <span class="hljs-string">&quot;1234567&quot;</span>.<br>æ­¥éª¤ <span class="hljs-number">1</span>ï¼šå…±æœ‰è¶…è¿‡ <span class="hljs-number">4</span> ä¸ªæ•°å­—ï¼Œæ‰€ä»¥å…ˆå– <span class="hljs-number">3</span> ä¸ªæ•°å­—åˆ†ä¸ºä¸€ç»„ã€‚ç¬¬ <span class="hljs-number">1</span> ä¸ªå—æ˜¯ <span class="hljs-string">&quot;123&quot;</span> ã€‚<br>æ­¥éª¤ <span class="hljs-number">2</span>ï¼šå‰©ä¸‹ <span class="hljs-number">4</span> ä¸ªæ•°å­—ï¼Œæ‰€ä»¥å°†å®ƒä»¬åˆ†æˆä¸¤ä¸ªå« <span class="hljs-number">2</span> ä¸ªæ•°å­—çš„å—ã€‚è¿™ <span class="hljs-number">2</span> å—åˆ†åˆ«æ˜¯ <span class="hljs-string">&quot;45&quot;</span> å’Œ <span class="hljs-string">&quot;67&quot;</span> ã€‚<br>è¿æ¥è¿™äº›å—åå¾—åˆ° <span class="hljs-string">&quot;123-45-67&quot;</span> ã€‚<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹3ï¼š</strong></p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs abnf">è¾“å…¥ï¼šnumber <span class="hljs-operator">=</span> <span class="hljs-string">&quot;123 4-5678&quot;</span><br>è¾“å‡ºï¼š<span class="hljs-string">&quot;123-456-78&quot;</span><br>è§£é‡Šï¼šæ•°å­—æ˜¯ <span class="hljs-string">&quot;12345678&quot;</span> ã€‚<br>æ­¥éª¤ <span class="hljs-number">1</span>ï¼šç¬¬ <span class="hljs-number">1</span> ä¸ªå— <span class="hljs-string">&quot;123&quot;</span> ã€‚<br>æ­¥éª¤ <span class="hljs-number">2</span>ï¼šç¬¬ <span class="hljs-number">2</span> ä¸ªå— <span class="hljs-string">&quot;456&quot;</span> ã€‚<br>æ­¥éª¤ <span class="hljs-number">3</span>ï¼šå‰©ä¸‹ <span class="hljs-number">2</span> ä¸ªæ•°å­—ï¼Œå°†å®ƒä»¬æ”¾å…¥å•ä¸ªå« <span class="hljs-number">2</span> ä¸ªæ•°å­—çš„å—ã€‚ç¬¬ <span class="hljs-number">3</span> ä¸ªå—æ˜¯ <span class="hljs-string">&quot;78&quot;</span> ã€‚<br>è¿æ¥è¿™äº›å—åå¾—åˆ° <span class="hljs-string">&quot;123-456-78&quot;</span> ã€‚<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹4ï¼š</strong></p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs abnf">è¾“å…¥ï¼šnumber <span class="hljs-operator">=</span> <span class="hljs-string">&quot;12&quot;</span><br>è¾“å‡ºï¼š<span class="hljs-string">&quot;12&quot;</span><br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹5ï¼š</strong></p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs subunit">è¾“å…¥ï¼šnumber = &quot;-<span class="hljs-string">-17</span><span class="hljs-string">-5</span> 229 35<span class="hljs-string">-39475</span> &quot;<br>è¾“å‡ºï¼š&quot;175<span class="hljs-string">-229</span><span class="hljs-string">-353</span><span class="hljs-string">-94</span><span class="hljs-string">-75</span>&quot;<br></code></pre></td></tr></table></figure><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><h3 id="æ–¹æ³•ä¸€ï¼šç®€å•æ¨¡æ‹Ÿ"><a href="#æ–¹æ³•ä¸€ï¼šç®€å•æ¨¡æ‹Ÿ" class="headerlink" title="æ–¹æ³•ä¸€ï¼šç®€å•æ¨¡æ‹Ÿ"></a>æ–¹æ³•ä¸€ï¼šç®€å•æ¨¡æ‹Ÿ</h3><p>å…ˆé¢„å¤„ç†<code>number</code>å­—ç¬¦ä¸²ï¼Œå»é™¤å­—ç¬¦ä¸²ä¸­é™¤æ•°å­—ä¹‹å¤–çš„å­—ç¬¦ã€‚</p><p>å®šä¹‰<code>res</code>ä¸ºå­—ç¬¦ä¸²åˆ—è¡¨ï¼Œå…¶ä¸­çš„æ¯ä¸€ä¸ªå­—ç¬¦ä¸²æœ€ç»ˆéœ€è¦ä»¥<code>&#39;-&#39;</code>åˆ†å‰²ã€‚</p><p>æ ¹æ®é¢˜æ„åˆ†æå¾ªç¯è¿‡ç¨‹ä¸­çš„ifæ¡ä»¶ï¼ˆ<code>i</code>è¡¨ç¤ºå½“å‰éå†ä½ç½®ï¼Œ<code>s</code>è¡¨ç¤ºé¢„å¤„ç†åçš„å­—ç¬¦ä¸²ï¼‰ï¼š</p><ul><li><p>è‹¥å½“å‰ä½ç½®<code>i + 4 == len(s)</code>ï¼Œå°†<code>s[i:i+2]</code>ä¸<code>s[i+2:i+4]</code>åˆ‡ç‰‡è¿½åŠ åˆ°<code>res</code>åˆ—è¡¨</p></li><li><p>å¦åˆ™ï¼Œç›´æ¥å°†<code>s[i:i+3]</code>åˆ‡ç‰‡è¿½åŠ åˆ°<code>res</code>åˆ—è¡¨</p><ul><li><p>è¿™é‡Œéšè—äº†ä¸€ç‚¹ï¼š<code>i + 2 == len(s)</code>çš„ç‰¹æ®Šæƒ…å†µå·²ç»è€ƒè™‘åœ¨elseæƒ…å†µä¸­ï¼š</p><ul><li>å·§å¦™åˆ©ç”¨äº†Pythonçš„åˆ‡ç‰‡æ€§è´¨ï¼šå³è¾¹ç•Œè¶…å‡ºå­—ç¬¦ä¸²é•¿åº¦æ—¶ï¼Œç›´æ¥å°†å­—ç¬¦ä¸²é•¿åº¦ä½œä¸ºå³è¾¹ç•Œã€‚</li></ul></li></ul></li></ul><p>ç†æ¸…æ¨¡æ‹Ÿé€»è¾‘åï¼Œå¼€å§‹ç¼–å†™ä»£ç ï¼Œæ³¨æ„å¾ªç¯çš„<code>step</code>ä¸º3ï¼Œæœ€åç”¨<code>&#39;-&#39;</code>å°†resæ‹¼æ¥ã€‚</p><h4 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">reformatNumber</span>(<span class="hljs-params">self, number: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:<br>        s = number.replace(<span class="hljs-string">&#x27; &#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>).replace(<span class="hljs-string">&#x27;-&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>)<br>        res = []<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(s), <span class="hljs-number">3</span>):<br>            <span class="hljs-keyword">if</span> i + <span class="hljs-number">4</span> == <span class="hljs-built_in">len</span>(s):<br>                res.append(s[i:i + <span class="hljs-number">2</span>])<br>                res.append(s[i + <span class="hljs-number">2</span>:i + <span class="hljs-number">4</span>])   <br>                <span class="hljs-keyword">break</span><br>            <span class="hljs-keyword">else</span>:<br>                res.append(s[i: i + <span class="hljs-number">3</span>])<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;-&#x27;</span>.join(res)<br></code></pre></td></tr></table></figure><h2 id="Encouragement"><a href="#Encouragement" class="headerlink" title="Encouragement"></a>Encouragement</h2><p>ç›®å‰å°±è¯»äºæ–°åŠ å¡å›½ç«‹å¤§å­¦ï¼Œè½¬ç èœé¸¡ä¸€æšã€‚</p><p>å†³å¿ƒé€šè¿‡æ—¥æ›´ä¸€ç¯‡é¢˜è§£æ¿€åŠ±è‡ªå·±åšæŒåˆ·é¢˜ï¼ŒåšæŒå­¦ä¹ ç®—æ³•ã€‚</p><p>è¿™æ˜¯æˆ‘æ­å»º<a href="https://github.com/ltyzzzxxx/Leetcode-Everyday">Leetcode-Everyday</a>ä»“åº“åå‘å¸ƒã®ç¬¬4ç¯‡é¢˜è§£ï¼Œæ¬¢è¿å„ä½starå¹¶æå‡ºIssue~</p><p>ç‚¹å‡»<a href="https://leetcode.cn/u/ltyzzz/">è¿™é‡Œ</a>ï¼Œè¿›å…¥æˆ‘çš„ä¸ªäººLeetcodeä¸»é¡µ~</p>]]></content>
    
    
    <categories>
      
      <category>Leetcodeé¢˜è§£</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LC-Solution Interview Questions 01.08</title>
    <link href="/2022/10/03/LC-Solution-Interview-Questions-01-08/"/>
    <url>/2022/10/03/LC-Solution-Interview-Questions-01-08/</url>
    
    <content type="html"><![CDATA[<h1 id="01-08-Zero-Matrix-LCCI"><a href="#01-08-Zero-Matrix-LCCI" class="headerlink" title="01.08. Zero Matrix LCCI"></a><a href="https://leetcode.cn/problems/zero-matrix-lcci/">01.08. Zero Matrix LCCI</a></h1><h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>ç¼–å†™ä¸€ç§ç®—æ³•ï¼Œè‹¥M Ã— NçŸ©é˜µä¸­æŸä¸ªå…ƒç´ ä¸º0ï¼Œåˆ™å°†å…¶æ‰€åœ¨çš„è¡Œä¸åˆ—æ¸…é›¶ã€‚</p><p><strong>ç¤ºä¾‹1ï¼š</strong></p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼š<br><span class="hljs-comment">[</span><br><span class="hljs-comment">  <span class="hljs-comment">[1,1,1]</span>,</span><br><span class="hljs-comment">  <span class="hljs-comment">[1,0,1]</span>,</span><br><span class="hljs-comment">  <span class="hljs-comment">[1,1,1]</span></span><br><span class="hljs-comment">]</span><br>è¾“å‡ºï¼š<br><span class="hljs-comment">[</span><br><span class="hljs-comment">  <span class="hljs-comment">[1,0,1]</span>,</span><br><span class="hljs-comment">  <span class="hljs-comment">[0,0,0]</span>,</span><br><span class="hljs-comment">  <span class="hljs-comment">[1,0,1]</span></span><br><span class="hljs-comment">]</span><br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹2</strong></p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼š<br><span class="hljs-comment">[</span><br><span class="hljs-comment">  <span class="hljs-comment">[0,1,2,0]</span>,</span><br><span class="hljs-comment">  <span class="hljs-comment">[3,4,5,2]</span>,</span><br><span class="hljs-comment">  <span class="hljs-comment">[1,3,1,5]</span></span><br><span class="hljs-comment">]</span><br>è¾“å‡ºï¼š<br><span class="hljs-comment">[</span><br><span class="hljs-comment">  <span class="hljs-comment">[0,0,0,0]</span>,</span><br><span class="hljs-comment">  <span class="hljs-comment">[0,4,5,0]</span>,</span><br><span class="hljs-comment">  <span class="hljs-comment">[0,3,1,0]</span></span><br><span class="hljs-comment">]</span><br></code></pre></td></tr></table></figure><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><h3 id="æ–¹æ³•ä¸€ï¼šæ¨¡æ‹Ÿ"><a href="#æ–¹æ³•ä¸€ï¼šæ¨¡æ‹Ÿ" class="headerlink" title="æ–¹æ³•ä¸€ï¼šæ¨¡æ‹Ÿ"></a>æ–¹æ³•ä¸€ï¼šæ¨¡æ‹Ÿ</h3><p>é¢˜ç›®è¦æ±‚å½“äºŒç»´æ•°ç»„ä¸­çš„æŸä¸ªå…ƒç´ å€¼ä¸º0æ—¶ï¼Œå°†å…¶æ‰€åœ¨çš„è¡Œå’Œåˆ—çš„å…¨éƒ¨å…ƒç´ ç½®ä¸º0ã€‚</p><p>é€šè¿‡åˆ†æé¢˜æ„ï¼Œå¯ä»¥æƒ³åˆ°é‡‡ç”¨æ ‡è®°æ•°ç»„å­˜å‚¨ç¬¦åˆé¢˜æ„çš„è¡Œä¸åˆ—ã€‚</p><ul><li><p>ç¬¬ä¸€æ¬¡éå†ï¼šæ ‡è®°è¡Œä¸åˆ—</p></li><li><p>ç¬¬äºŒæ¬¡éå†ï¼šå¯¹æ ‡è®°çš„è¡Œä¸åˆ—ä¸­çš„å…ƒç´ è¿›è¡Œä¿®æ”¹</p></li></ul><h4 id="Python3"><a href="#Python3" class="headerlink" title="Python3"></a>Python3</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">setZeroes</span>(<span class="hljs-params">self, matrix: <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]]</span>) -&gt; <span class="hljs-literal">None</span>:<br>        row = [<span class="hljs-literal">False</span>] * <span class="hljs-built_in">len</span>(matrix)<br>        col = [<span class="hljs-literal">False</span>] * <span class="hljs-built_in">len</span>(matrix[<span class="hljs-number">0</span>])<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(matrix)):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(matrix[<span class="hljs-number">0</span>])):<br>                <span class="hljs-keyword">if</span> matrix[i][j] == <span class="hljs-number">0</span>:<br>                    row[i] = col[j] = <span class="hljs-literal">True</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(matrix)):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(matrix[<span class="hljs-number">0</span>])):<br>                matrix[i][j] = <span class="hljs-number">0</span> <span class="hljs-keyword">if</span> row[i] == <span class="hljs-literal">True</span> <span class="hljs-keyword">or</span> col[j] == <span class="hljs-literal">True</span> <span class="hljs-keyword">else</span> matrix[i][j]<br></code></pre></td></tr></table></figure><h4 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setZeroes</span><span class="hljs-params">(<span class="hljs-type">int</span>[][] matrix)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> matrix.length, n = matrix[<span class="hljs-number">0</span>].length;<br>        <span class="hljs-type">boolean</span>[] row = <span class="hljs-keyword">new</span> <span class="hljs-title class_">boolean</span>[m], col = <span class="hljs-keyword">new</span> <span class="hljs-title class_">boolean</span>[n];<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; m; i++) &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; n; j++) &#123;<br>                <span class="hljs-keyword">if</span>(matrix[i][j] == <span class="hljs-number">0</span>) &#123;<br>                    row[i] = col[j] = <span class="hljs-literal">true</span>;<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; m; i++) &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; n; j++) &#123;<br>                <span class="hljs-keyword">if</span>(row[i] == <span class="hljs-literal">true</span> || col[j] == <span class="hljs-literal">true</span>) &#123;<br>                    matrix[i][j] = <span class="hljs-number">0</span>;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Encouragement"><a href="#Encouragement" class="headerlink" title="Encouragement"></a>Encouragement</h2><p>ç›®å‰å°±è¯»äºæ–°åŠ å¡å›½ç«‹å¤§å­¦ï¼Œè½¬ç èœé¸¡ä¸€æšã€‚</p><p>å†³å¿ƒé€šè¿‡æ—¥æ›´ä¸€ç¯‡é¢˜è§£æ¿€åŠ±è‡ªå·±åšæŒåˆ·é¢˜ï¼ŒåšæŒå­¦ä¹ ç®—æ³•ã€‚</p><p>è¿™æ˜¯æˆ‘æ­å»º<a href="https://github.com/ltyzzzxxx/Leetcode-Everyday">Leetcode-Everyday</a>ä»“åº“åå‘å¸ƒã®ç¬¬3ç¯‡é¢˜è§£ï¼Œæ¬¢è¿å„ä½starå¹¶æå‡ºIssue~</p><p>ç‚¹å‡»<a href="https://leetcode.cn/u/ltyzzz/">è¿™é‡Œ</a>ï¼Œè¿›å…¥æˆ‘çš„ä¸ªäººLeetcodeä¸»é¡µ~</p>]]></content>
    
    
    <categories>
      
      <category>Leetcodeé¢˜è§£</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LC-Solution 3. Longest Substring Without Repeating Characters</title>
    <link href="/2022/10/03/LC-Solution-3-Longest-Substring-Without-Repeating-Characters/"/>
    <url>/2022/10/03/LC-Solution-3-Longest-Substring-Without-Repeating-Characters/</url>
    
    <content type="html"><![CDATA[<h1 id="3-æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²"><a href="#3-æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²" class="headerlink" title="3. æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²"></a><a href="https://leetcode.cn/problems/longest-substring-without-repeating-characters/">3. æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²</a></h1><h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²Â <code>s</code>Â ï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­ä¸å«æœ‰é‡å¤å­—ç¬¦çš„Â <strong>æœ€é•¿å­ä¸²</strong>Â çš„é•¿åº¦ã€‚</p><p><strong>ç¤ºä¾‹1ï¼š</strong></p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥: s = &quot;abcabcbb&quot;</span><br><span class="hljs-section">è¾“å‡º: 3 </span><br><span class="hljs-section">è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ &quot;abc&quot;ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚</span><br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹2ï¼š</strong></p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥: s = &quot;bbbbb&quot;</span><br><span class="hljs-section">è¾“å‡º: 1</span><br><span class="hljs-section">è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ &quot;b&quot;ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 1ã€‚</span><br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹3ï¼š</strong></p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥: s = &quot;pwwkew&quot;</span><br><span class="hljs-section">è¾“å‡º: 3</span><br><span class="hljs-section">è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯Â &quot;wke&quot;ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚</span><br>Â     è¯·æ³¨æ„ï¼Œä½ çš„ç­”æ¡ˆå¿…é¡»æ˜¯ å­ä¸² çš„é•¿åº¦ï¼Œ<span class="hljs-string">&quot;pwke&quot;</span>Â æ˜¯ä¸€ä¸ªå­åºåˆ—ï¼Œä¸æ˜¯å­ä¸²ã€‚<br></code></pre></td></tr></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li><code>0 &lt;= s.length &lt;= 5 * 104</code></li><li><code>s</code>Â ç”±è‹±æ–‡å­—æ¯ã€æ•°å­—ã€ç¬¦å·å’Œç©ºæ ¼ç»„æˆ</li></ul><h2 id="è§£å†³æ–¹æ¡ˆï¼š"><a href="#è§£å†³æ–¹æ¡ˆï¼š" class="headerlink" title="è§£å†³æ–¹æ¡ˆï¼š"></a>è§£å†³æ–¹æ¡ˆï¼š</h2><h3 id="æ–¹æ³•ä¸€ï¼šæ»‘åŠ¨çª—å£"><a href="#æ–¹æ³•ä¸€ï¼šæ»‘åŠ¨çª—å£" class="headerlink" title="æ–¹æ³•ä¸€ï¼šæ»‘åŠ¨çª—å£"></a>æ–¹æ³•ä¸€ï¼šæ»‘åŠ¨çª—å£</h3><p>é¢˜ç›®è¦æ±‚ä»ç»™å®šå­—ç¬¦ä¸²<code>s</code>ä¸­æ‰¾å‡ºä¸åŒ…å«é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²çš„é•¿åº¦</p><p>ç”±äºå­ä¸²æ˜¯è¿ç»­çš„ï¼Œå¯ä»¥æƒ³åˆ°é‡‡ç”¨æ»‘åŠ¨çª—å£è§£å†³è¯¥é—®é¢˜ã€‚</p><p>æ€è·¯å¦‚ä¸‹ï¼š</p><ul><li><p>é‡‡ç”¨åŒæŒ‡é’ˆ<code>i</code>ä¸<code>j</code>ä½œä¸ºæ»‘åŠ¨çª—å£çš„å·¦ç«¯ç‚¹ä¸å³ç«¯ç‚¹ï¼Œåˆå§‹å€¼ä¸º0</p></li><li><p>é‡‡ç”¨å“ˆå¸Œè¡¨è®°å½•å·²ç»éå†è¿‡çš„å­—ç¬¦ã€‚å…¶<code>key</code>ä¸ºå­—ç¬¦æœ¬èº«ï¼Œ<code>value</code>ä¸ºå½“å‰å­—ç¬¦å¯¹åº”çš„ä¸‹æ ‡</p></li><li><p>è®¾<code>maxLen</code>ä¸ºä¸åŒ…å«é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²çš„é•¿åº¦</p></li><li><p>ä»å¤´åˆ°å°¾éå†å­—ç¬¦ä¸²<code>s</code></p><ol><li>åˆ¤æ–­å“ˆå¸Œè¡¨æ˜¯å¦å­˜å‚¨å½“å‰å­—ç¬¦<code>c</code></li></ol><ul><li><p>è‹¥å“ˆå¸Œè¡¨å·²å­˜å‚¨å½“å‰å­—ç¬¦<code>c</code></p><ul><li><p>éœ€è¦æ”¶ç¼©æ»‘åŠ¨çª—å£ï¼Œå³æ›´æ–°æ»‘åŠ¨çª—å£å·¦ç«¯ç‚¹<code>i</code>çš„ä½ç½®</p><ul><li><p>æ­¤æ—¶ï¼Œå·¦ç«¯ç‚¹<code>i</code>æœ‰ä¸¤ç§é€‰æ‹©ï¼Œç¬¬ä¸€ç§ä¸ºä¿æŒ<code>i</code>ä¸å˜ï¼Œç¬¬äºŒç§ä¸ºå°†å…¶æ›´æ–°ä¸ºå“ˆå¸Œè¡¨ä¸­å½“å‰å­—ç¬¦<code>c</code>å¯¹åº”çš„ä¸‹æ ‡å†åŠ 1</p><ol><li><p>å¦‚æœå½“å‰æ»‘åŠ¨çª—å£ä¸åŒ…å«å½“å‰å­—ç¬¦<code>c</code>ä½†å“ˆå¸Œè¡¨ä¸­å´å­˜å‚¨ç€<code>c</code>ï¼Œåˆ™éœ€è¦é€‰æ‹©ç¬¬ä¸€ç§æ›´æ–°æ–¹æ¡ˆã€‚ä¾‹å¦‚<code>abba</code>å­—ç¬¦ä¸²ã€‚</p></li><li><p>å¦‚æœå½“å‰æ»‘åŠ¨çª—å£åŒ…å«å½“å‰å­—ç¬¦<code>c</code>ï¼Œåˆ™éœ€è¦é€‰æ‹©ç¬¬äºŒç§æ›´æ–°æ–¹æ¡ˆã€‚ä¾‹å¦‚<code>abca</code>å­—ç¬¦ä¸²ã€‚</p></li></ol></li></ul><p>. ä¸ºç»¼åˆä»¥ä¸Šä¸¤ç§æ›´æ–°æ–¹æ¡ˆï¼Œå·¦ç«¯ç‚¹<code>i</code>æ›´æ–°æ—¶åŒºäºŒè€…æœ€å¤§å€¼å³å¯ã€‚</p></li></ul></li></ul><ol start="2"><li><p>æ›´æ–°å“ˆå¸Œè¡¨</p></li><li><p>æ¯”è¾ƒå½“å‰æ»‘åŠ¨çª—å£é•¿åº¦ä¸<code>maxLen</code>çš„å¤§å°ï¼Œå¹¶ä¸º<code>maxLen</code>èµ‹å€¼</p></li><li><p>æ»‘åŠ¨çª—å£å‘å³æ»‘åŠ¨ï¼Œ<code>j</code>è‡ªå¢</p></li></ol></li></ul><h4 id="Python3"><a href="#Python3" class="headerlink" title="Python3"></a>Python3</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">lengthOfLongestSubstring</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> s:<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>        dic = defaultdict(<span class="hljs-built_in">int</span>)<br>        maxlen, left = <span class="hljs-number">0</span>, <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(s)):<br>            <span class="hljs-keyword">if</span> s[i] <span class="hljs-keyword">in</span> dic:<br>                left = <span class="hljs-built_in">max</span>(dic[s[i]] + <span class="hljs-number">1</span>, left)<br>            dic[s[i]] = i<br>            maxlen = <span class="hljs-built_in">max</span>(maxlen, i - left + <span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> maxlen<br></code></pre></td></tr></table></figure><h4 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">lengthOfLongestSubstring</span><span class="hljs-params">(String s)</span> &#123;<br>        <span class="hljs-keyword">if</span>(s.length() == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">left</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, n = s.length();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">maxLen</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, curLen = <span class="hljs-number">0</span>;<br>        Set&lt;Character&gt; set = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>            curLen++;<br>            <span class="hljs-keyword">while</span>(set.contains(s.charAt(i))) &#123;<br>                set.remove(s.charAt(left));<br>                left++;<br>                curLen--;<br>            &#125;<br>            maxLen = Math.max(curLen, maxLen);<br>            set.add(s.charAt(i));<br>        &#125;<br>        <span class="hljs-keyword">return</span> maxLen;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Encouragement"><a href="#Encouragement" class="headerlink" title="Encouragement"></a>Encouragement</h2><p>ç›®å‰å°±è¯»äºæ–°åŠ å¡å›½ç«‹å¤§å­¦ï¼Œè½¬ç èœé¸¡ä¸€æšã€‚</p><p>å†³å¿ƒé€šè¿‡æ—¥æ›´ä¸€ç¯‡é¢˜è§£æ¿€åŠ±è‡ªå·±åšæŒåˆ·é¢˜ï¼ŒåšæŒå­¦ä¹ ç®—æ³•ã€‚</p><p>è¿™æ˜¯æˆ‘æ­å»º<a href="https://github.com/ltyzzzxxx/Leetcode-Everyday">Leetcode-Everyday</a>ä»“åº“åå‘å¸ƒã®ç¬¬6ç¯‡é¢˜è§£ï¼Œæ¬¢è¿å„ä½starå¹¶æå‡ºIssue~</p><p>ç‚¹å‡»<a href="https://leetcode.cn/u/ltyzzz/">è¿™é‡Œ</a>ï¼Œè¿›å…¥æˆ‘çš„ä¸ªäººLeetcodeä¸»é¡µ~</p>]]></content>
    
    
    <categories>
      
      <category>Leetcodeé¢˜è§£</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LC-Solution 2. Add Two Nums</title>
    <link href="/2022/10/03/LC-Solution-2-Add-Two-Nums/"/>
    <url>/2022/10/03/LC-Solution-2-Add-Two-Nums/</url>
    
    <content type="html"><![CDATA[<h1 id="2-ä¸¤æ•°ç›¸åŠ "><a href="#2-ä¸¤æ•°ç›¸åŠ " class="headerlink" title="2. ä¸¤æ•°ç›¸åŠ "></a><a href="https://leetcode.cn/problems/add-two-numbers/">2. ä¸¤æ•°ç›¸åŠ </a></h1><h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>ç»™ä½ ä¸¤ä¸ªÂ éç©º çš„é“¾è¡¨ï¼Œè¡¨ç¤ºä¸¤ä¸ªéè´Ÿçš„æ•´æ•°ã€‚å®ƒä»¬æ¯ä½æ•°å­—éƒ½æ˜¯æŒ‰ç…§Â é€†åºÂ çš„æ–¹å¼å­˜å‚¨çš„ï¼Œå¹¶ä¸”æ¯ä¸ªèŠ‚ç‚¹åªèƒ½å­˜å‚¨Â ä¸€ä½Â æ•°å­—ã€‚</p><p>è¯·ä½ å°†ä¸¤ä¸ªæ•°ç›¸åŠ ï¼Œå¹¶ä»¥ç›¸åŒå½¢å¼è¿”å›ä¸€ä¸ªè¡¨ç¤ºå’Œçš„é“¾è¡¨ã€‚</p><p>ä½ å¯ä»¥å‡è®¾é™¤äº†æ•°å­— 0 ä¹‹å¤–ï¼Œè¿™ä¸¤ä¸ªæ•°éƒ½ä¸ä¼šä»¥ 0Â å¼€å¤´ã€‚</p><p>ç¤ºä¾‹1ï¼š</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šl1 = <span class="hljs-comment">[2,4,3]</span>, l2 = <span class="hljs-comment">[5,6,4]</span><br>è¾“å‡ºï¼š<span class="hljs-comment">[7,0,8]</span><br>è§£é‡Šï¼š342 + 465 = 807.<br></code></pre></td></tr></table></figure><p>ç¤ºä¾‹2ï¼š</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šl1 = <span class="hljs-comment">[0]</span>, l2 = <span class="hljs-comment">[0]</span><br>è¾“å‡ºï¼š<span class="hljs-comment">[0]</span><br></code></pre></td></tr></table></figure><p>ç¤ºä¾‹3ï¼š</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dns">è¾“å…¥ï¼šl1 = [<span class="hljs-number">9,9,9,9</span>,<span class="hljs-number">9</span>,<span class="hljs-number">9</span>,<span class="hljs-number">9</span>], l2 = [<span class="hljs-number">9,9,9,9</span>]<br>è¾“å‡ºï¼š[<span class="hljs-number">8,9,9,9</span>,<span class="hljs-number">0,0,0,1</span>]<br></code></pre></td></tr></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li>æ¯ä¸ªé“¾è¡¨ä¸­çš„èŠ‚ç‚¹æ•°åœ¨èŒƒå›´Â <code>[1, 100]</code>Â å†…</li><li><code>0 &lt;= Node.val &lt;= 9</code></li><li>é¢˜ç›®æ•°æ®ä¿è¯åˆ—è¡¨è¡¨ç¤ºçš„æ•°å­—ä¸å«å‰å¯¼é›¶</li></ul><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><h3 id="æ–¹æ³•ä¸€ï¼šé“¾è¡¨-æ•°å­¦-æ¨¡æ‹Ÿ"><a href="#æ–¹æ³•ä¸€ï¼šé“¾è¡¨-æ•°å­¦-æ¨¡æ‹Ÿ" class="headerlink" title="æ–¹æ³•ä¸€ï¼šé“¾è¡¨ + æ•°å­¦ + æ¨¡æ‹Ÿ"></a>æ–¹æ³•ä¸€ï¼šé“¾è¡¨ + æ•°å­¦ + æ¨¡æ‹Ÿ</h3><p>æ­¤é¢˜å¯ç›´æ¥ç†è§£ä¸ºæ•°å­¦ä¸­çš„ç«–å¼ç›¸åŠ </p><p>é“¾è¡¨ä»å·¦è‡³å³å¯ä»¥ç†è§£ä¸ºä»ä½ä½åˆ°é«˜ä½ï¼Œå› æ­¤ä¾æ¬¡éå†é“¾è¡¨ï¼ŒåŒä¸€ä½ç½®ç›´æ¥ç›¸åŠ å³å¯</p><p>è®¾å½“å‰ä¸¤ä¸ªé“¾è¡¨ç›¸åŒä½ç½®ä¸Šçš„æ•°åˆ†åˆ«ä¸º<code>x1</code>ä¸<code>x2</code>ï¼Œå…¶è¿›ä½å€¼ä¸º<code>carry</code></p><p>è¿›è¡Œç›¸åŠ ä¹‹åï¼Œ<code>sum</code>ä¸º<code>x1 + x2 + carry</code>ï¼Œåˆ™</p><ul><li><p>ç»“æœé“¾è¡¨çš„å½“å‰å€¼<code>head.val = sum % 10</code>ï¼Œæ·»åŠ è‡³ç»“æœé“¾è¡¨ï¼Œé“¾è¡¨å‰ç§»</p></li><li><p>æ–°çš„è¿›ä½å€¼<code>carry = sum // 10</code></p></li></ul><p>ä¾æ¬¡ç±»æ¨ï¼Œç»§ç»­å‰ç§»é“¾è¡¨èŠ‚ç‚¹ï¼Œç›´è‡³ä¸¤é“¾è¡¨éå†ç»“æŸã€‚</p><p>æ³¨æ„ï¼šéå†ç»“æŸä¹‹åï¼Œéœ€è¦åˆ¤æ–­æœ€åçš„<code>carry</code>æ˜¯å¦ä¸º1</p><ul><li>è‹¥æœ€åçš„<code>carry == 1</code>ï¼Œåˆ™è¯´æ˜éœ€è¦å†å‘ä¸Šè¿›ä¸€ä½</li></ul><h4 id="Python3"><a href="#Python3" class="headerlink" title="Python3"></a>Python3</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">addTwoNumbers</span>(<span class="hljs-params">self, l1: <span class="hljs-type">Optional</span>[ListNode], l2: <span class="hljs-type">Optional</span>[ListNode]</span>) -&gt; <span class="hljs-type">Optional</span>[ListNode]:<br>        res = head = <span class="hljs-literal">None</span><br>        carry = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">while</span> l1 <span class="hljs-keyword">or</span> l2:<br>            v1 = l1.val <span class="hljs-keyword">if</span> l1 <span class="hljs-keyword">else</span> <span class="hljs-number">0</span><br>            v2 = l2.val <span class="hljs-keyword">if</span> l2 <span class="hljs-keyword">else</span> <span class="hljs-number">0</span><br>            <span class="hljs-built_in">sum</span> = v1 + v2 + carry<br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> res:<br>                res = head = ListNode(<span class="hljs-built_in">sum</span> % <span class="hljs-number">10</span>)<br>            <span class="hljs-keyword">else</span>:<br>                head.<span class="hljs-built_in">next</span> = ListNode(<span class="hljs-built_in">sum</span> % <span class="hljs-number">10</span>)<br>                head = head.<span class="hljs-built_in">next</span><br>            carry = <span class="hljs-built_in">sum</span> // <span class="hljs-number">10</span><br>            <span class="hljs-keyword">if</span> l1:<br>                l1 = l1.<span class="hljs-built_in">next</span><br>            <span class="hljs-keyword">if</span> l2:<br>                l2 = l2.<span class="hljs-built_in">next</span><br>        <span class="hljs-keyword">if</span> carry &gt; <span class="hljs-number">0</span>:<br>            head.<span class="hljs-built_in">next</span> = ListNode(carry)<br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></table></figure><h4 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> ListNode <span class="hljs-title function_">addTwoNumbers</span><span class="hljs-params">(ListNode l1, ListNode l2)</span> &#123;<br>        <span class="hljs-type">ListNode</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>, head = <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">carry</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span>(l1 != <span class="hljs-literal">null</span> || l2 != <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">v1</span> <span class="hljs-operator">=</span> l1 == <span class="hljs-literal">null</span> ? <span class="hljs-number">0</span> : l1.val;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">v2</span> <span class="hljs-operator">=</span> l2 == <span class="hljs-literal">null</span> ? <span class="hljs-number">0</span> : l2.val;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> v1 + v2 + carry;<br>            <span class="hljs-keyword">if</span>(res == <span class="hljs-literal">null</span>) &#123;<br>                res = head = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ListNode</span>(sum % <span class="hljs-number">10</span>);<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                head.next = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ListNode</span>(sum % <span class="hljs-number">10</span>);<br>                head = head.next;<br>            &#125;<br>            carry = sum / <span class="hljs-number">10</span>;<br>            <span class="hljs-keyword">if</span>(l1 != <span class="hljs-literal">null</span>) l1 = l1.next;<br>            <span class="hljs-keyword">if</span>(l2 != <span class="hljs-literal">null</span>) l2 = l2.next;<br>        &#125;<br>        <span class="hljs-keyword">if</span>(carry &gt; <span class="hljs-number">0</span>) &#123;<br>            head.next = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ListNode</span>(carry);<br>        &#125;<br>        <span class="hljs-keyword">return</span> res;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Encouragement"><a href="#Encouragement" class="headerlink" title="Encouragement"></a>Encouragement</h2><p>ç›®å‰å°±è¯»äºæ–°åŠ å¡å›½ç«‹å¤§å­¦ï¼Œè½¬ç èœé¸¡ä¸€æšã€‚</p><p>å†³å¿ƒé€šè¿‡æ—¥æ›´ä¸€ç¯‡é¢˜è§£æ¿€åŠ±è‡ªå·±åšæŒåˆ·é¢˜ï¼ŒåšæŒå­¦ä¹ ç®—æ³•ã€‚</p><p>è¿™æ˜¯æˆ‘æ­å»º<a href="https://github.com/ltyzzzxxx/Leetcode-Everyday">Leetcode-Everyday</a>ä»“åº“åå‘å¸ƒã®ç¬¬2ç¯‡é¢˜è§£ï¼Œæ¬¢è¿å„ä½starå¹¶æå‡ºIssue~</p><p>ç‚¹å‡»<a href="https://leetcode.cn/u/ltyzzz/">è¿™é‡Œ</a>ï¼Œè¿›å…¥æˆ‘çš„ä¸ªäººLeetcodeä¸»é¡µ~</p>]]></content>
    
    
    <categories>
      
      <category>Leetcodeé¢˜è§£</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LC-Solution 1. Two Sum</title>
    <link href="/2022/10/03/LC-Solution-1-Two-Sum/"/>
    <url>/2022/10/03/LC-Solution-1-Two-Sum/</url>
    
    <content type="html"><![CDATA[<h1 id="1-ä¸¤æ•°ä¹‹å’Œ"><a href="#1-ä¸¤æ•°ä¹‹å’Œ" class="headerlink" title="1.ä¸¤æ•°ä¹‹å’Œ"></a><a href="https://leetcode.cn/problems/two-sum/">1.ä¸¤æ•°ä¹‹å’Œ</a></h1><h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„Â <code>nums</code>Â å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å€¼Â <code>target</code>ï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡ºÂ <strong>å’Œä¸ºç›®æ ‡å€¼</strong>Â <em><code>target</code></em>Â  çš„é‚£Â <strong>ä¸¤ä¸ª</strong>Â æ•´æ•°ï¼Œå¹¶è¿”å›å®ƒä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚</p><p>ä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œæ•°ç»„ä¸­åŒä¸€ä¸ªå…ƒç´ åœ¨ç­”æ¡ˆé‡Œä¸èƒ½é‡ltå¤å‡ºç°ã€‚</p><p>ä½ å¯ä»¥æŒ‰ä»»æ„é¡ºåºè¿”å›ç­”æ¡ˆã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šnums = <span class="hljs-comment">[2,7,11,15]</span>, target = 9<br>è¾“å‡ºï¼š<span class="hljs-comment">[0,1]</span><br>è§£é‡Šï¼šå› ä¸º nums<span class="hljs-comment">[0]</span> + nums<span class="hljs-comment">[1]</span> == 9 ï¼Œè¿”å› <span class="hljs-comment">[0, 1]</span> ã€‚<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šnums = <span class="hljs-comment">[3,2,4]</span>, target = 6<br>è¾“å‡ºï¼š<span class="hljs-comment">[1,2]</span><br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 3ï¼š</strong></p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šnums = <span class="hljs-comment">[3,3]</span>, target = 6<br>è¾“å‡ºï¼š<span class="hljs-comment">[0,1]</span><br></code></pre></td></tr></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li><code>2 &lt;= nums.length &lt;= 104</code></li><li><code>-109Â &lt;= nums[i] &lt;= 109</code></li><li><code>-109Â &lt;= target &lt;= 109</code></li><li><strong>åªä¼šå­˜åœ¨ä¸€ä¸ªæœ‰æ•ˆç­”æ¡ˆ</strong></li></ul><p>è¿›é˜¶ï¼šä½ å¯ä»¥æƒ³å‡ºä¸€ä¸ªæ—¶é—´å¤æ‚åº¦å°äºÂ <code>O(n2)</code>Â çš„ç®—æ³•å—ï¼Ÿ</p><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><h3 id="æ–¹æ³•ä¸€ï¼šå“ˆå¸Œè¡¨"><a href="#æ–¹æ³•ä¸€ï¼šå“ˆå¸Œè¡¨" class="headerlink" title="æ–¹æ³•ä¸€ï¼šå“ˆå¸Œè¡¨"></a>æ–¹æ³•ä¸€ï¼šå“ˆå¸Œè¡¨</h3><p>å¯¹æ•°ç»„è¿›è¡Œéå†ï¼Œç”¨å“ˆå¸Œè¡¨å­˜æ”¾æ•°ç»„å€¼åŠå…¶å¯¹åº”çš„ä¸‹æ ‡å€¼ã€‚</p><ul><li><code>key</code> &#x3D;&gt; å…ƒç´ å€¼ï¼Œ <code>value</code> &#x3D;&gt; å…ƒç´ å€¼å¯¹åº”çš„ä¸‹æ ‡å€¼</li></ul><p>å½“å‘ç°<code>target - nums[i]</code> å³ <code>ç›®æ ‡å€¼ä¸å½“å‰å€¼ä¹‹å·®</code> æ˜¯å¦åœ¨å“ˆå¸Œè¡¨ä¸­å‡ºç°è¿‡</p><ul><li><p>è‹¥å‡ºç°è¿‡ï¼Œåˆ™è¯´æ˜æ‰¾åˆ°äº†ç›®æ ‡å€¼ï¼Œç›´æ¥è¿”å›å³å¯</p></li><li><p>è‹¥æœªå‡ºç°ï¼Œç»§ç»­éå†</p></li></ul><p>æ ¸å¿ƒæ€è·¯ä¸º<code>ç©ºé—´æ¢æ—¶é—´</code>ï¼Œè‹¥ä¸é‡‡ç”¨å“ˆå¸Œè¡¨ï¼Œåˆ™åŒé‡forå¾ªç¯æœ´ç´ è§£æ³•æ—¶é—´å¤æ‚åº¦ä¸º<code>O(n^2)</code></p><p>åœ¨å¾ªç¯éå†çš„è¿‡ç¨‹ä¸­ç¡®å®š<code>nums[i]</code>ä¸ºå½“å‰æ•°ï¼Œç„¶ååœ¨å“ˆå¸Œè¡¨ä¸­æŸ¥æ‰¾è¯¥æ•°ä¹‹å‰æ˜¯å¦å­˜åœ¨ä¸€ä¸ªæ•°ä¸º<code>target - nums[i]</code>ã€‚</p><h4 id="Python3"><a href="#Python3" class="headerlink" title="Python3"></a>Python3</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">twoSum</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], t: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:<br>        dic = defaultdict(<span class="hljs-built_in">int</span>)<br>        <span class="hljs-keyword">for</span> i, v <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(nums):<br>            x = t - v<br>            <span class="hljs-keyword">if</span> x <span class="hljs-keyword">in</span> dic:<br>                <span class="hljs-keyword">return</span> [dic[x], i]<br>            dic[v] = i<br></code></pre></td></tr></table></figure><h4 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span>[] twoSum(<span class="hljs-type">int</span>[] nums, <span class="hljs-type">int</span> t) &#123;<br>        HashMap&lt;Integer, Integer&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; nums.length; i++) &#123;<br>            <span class="hljs-keyword">if</span>(map.containsKey(t - nums[i])) <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[]&#123;map.get(t - nums[i]), i&#125;;<br>            map.put(nums[i], i);<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[]&#123;&#125;;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Encouragement"><a href="#Encouragement" class="headerlink" title="Encouragement"></a>Encouragement</h2><p>ç›®å‰å°±è¯»äºæ–°åŠ å¡å›½ç«‹å¤§å­¦ï¼Œè½¬ç èœé¸¡ä¸€æšã€‚</p><p>å†³å¿ƒé€šè¿‡æ—¥æ›´ä¸€ç¯‡é¢˜è§£æ¿€åŠ±è‡ªå·±åšæŒåˆ·é¢˜ï¼ŒåšæŒå­¦ä¹ ç®—æ³•ã€‚</p><p>è¿™æ˜¯æˆ‘æ­å»º<a href="https://github.com/ltyzzzxxx/Leetcode-Everyday">Leetcode-Everyday</a>ä»“åº“åå‘å¸ƒã®ç¬¬1ç¯‡é¢˜è§£ï¼Œæ¬¢è¿å„ä½starå¹¶æå‡ºIssue~</p><p>ç‚¹å‡»<a href="https://leetcode.cn/u/ltyzzz/">è¿™é‡Œ</a>ï¼Œè¿›å…¥æˆ‘çš„ä¸ªäººLeetcodeä¸»é¡µ~</p>]]></content>
    
    
    <categories>
      
      <category>Leetcodeé¢˜è§£</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
